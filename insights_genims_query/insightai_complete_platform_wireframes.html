<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightAI - Enterprise AI Transformation Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0e27;
            color: #ffffff;
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1f3a 0%, #2d1b4e 100%);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #00d9ff;
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.2);
            height: 70px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header h1 {
            font-size: 1.5.     rem;
            background: linear-gradient(135deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .breadcrumb {
            color: #8b92b0;
            font-size: 0.9rem;
        }

        .breadcrumb span {
            color: #00d9ff;
        }

        .header-right {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .factory-selector {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Layout Container */
        .layout {
            display: flex;
            height: calc(100vh - 70px);
        }

        /* Left Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1a1f3a 0%, #2d1b4e 100%);
            border-right: 2px solid rgba(0, 217, 255, 0.2);
            overflow-y: auto;
            padding: 1rem 0;
        }

        .nav-section {
            margin-bottom: 0.5rem;
        }

        .nav-main {
            padding: 1rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 1rem;
            border-left: 4px solid transparent;
        }

        .nav-main:hover {
            background: rgba(0, 217, 255, 0.1);
            border-left-color: #00d9ff;
        }

        .nav-main.active {
            background: rgba(0, 217, 255, 0.2);
            border-left-color: #00d9ff;
            color: #00d9ff;
        }

        .nav-icon {
            font-size: 1.3rem;
            margin-right: 0.75rem;
        }

        .nav-arrow {
            transition: transform 0.3s;
        }

        .nav-arrow.expanded {
            transform: rotate(90deg);
        }

        .nav-submenu {
            display: none;
            background: rgba(0, 0, 0, 0.2);
            padding: 0.5rem 0;
        }

        .nav-submenu.show {
            display: block;
        }

        .nav-item {
            padding: 0.75rem 1.5rem 0.75rem 3rem;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            color: #8b92b0;
            border-left: 4px solid transparent;
        }

        .nav-item:hover {
            background: rgba(0, 217, 255, 0.1);
            color: #00d9ff;
            border-left-color: #00d9ff;
        }

        .nav-item.active {
            background: rgba(0, 217, 255, 0.15);
            color: #00d9ff;
            border-left-color: #00d9ff;
            font-weight: 600;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background: #0a0e27;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Screen Header */
        .screen-header {
            margin-bottom: 2rem;
        }

        .screen-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .screen-subtitle {
            color: #8b92b0;
            font-size: 1rem;
        }

        /* Factory Map */
        .factory-map-container {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.9), rgba(45, 27, 78, 0.9));
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(0, 217, 255, 0.3);
            position: relative;
            height: 500px;
        }

        .map-canvas {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a2332 0%, #2d1b3e 100%);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .factory-marker {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }

        .factory-marker:hover {
            transform: scale(1.2);
            z-index: 100;
        }

        .marker-pin {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            border: 3px solid;
            box-shadow: 0 0 20px;
            position: relative;
        }

        .marker-pin.healthy {
            background: rgba(0, 255, 136, 0.2);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .marker-pin.warning {
            background: rgba(255, 170, 0, 0.2);
            border-color: #ffaa00;
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.5);
        }

        .marker-pin.critical {
            background: rgba(255, 51, 102, 0.2);
            border-color: #ff3366;
            box-shadow: 0 0 20px rgba(255, 51, 102, 0.5);
            animation: pulse-critical 2s infinite;
        }

        @keyframes pulse-critical {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 51, 102, 0.5); }
            50% { box-shadow: 0 0 40px rgba(255, 51, 102, 0.8); }
        }

        .marker-label {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(26, 31, 58, 0.95);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 600;
            white-space: nowrap;
            border: 1px solid rgba(0, 217, 255, 0.3);
        }

        .factory-popup {
            position: absolute;
            background: linear-gradient(135deg, #1a1f3a, #2d1b4e);
            border: 2px solid #00d9ff;
            border-radius: 12px;
            padding: 1.5rem;
            min-width: 300px;
            box-shadow: 0 10px 40px rgba(0, 217, 255, 0.3);
            display: none;
            z-index: 1000;
        }

        .factory-popup.show {
            display: block;
            animation: popupAppear 0.3s;
        }

        @keyframes popupAppear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(0, 217, 255, 0.3);
        }

        .popup-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #00d9ff;
        }

        .popup-status {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .popup-status.healthy { background: rgba(0, 255, 136, 0.2); color: #00ff88; }
        .popup-status.warning { background: rgba(255, 170, 0, 0.2); color: #ffaa00; }
        .popup-status.critical { background: rgba(255, 51, 102, 0.2); color: #ff3366; }

        .popup-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .popup-metric {
            text-align: center;
        }

        .popup-metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00d9ff;
        }

        .popup-metric-label {
            font-size: 0.75rem;
            color: #8b92b0;
            margin-top: 0.25rem;
        }

        .close-popup {
            background: none;
            border: none;
            color: #00d9ff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-popup:hover {
            color: #ff3366;
            transform: rotate(90deg);
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.9), rgba(45, 27, 78, 0.9));
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            transition: all 0.3s;
            cursor: pointer;
        }

        .metric-card:hover {
            transform: translateY(-4px);
            border-color: #00d9ff;
            box-shadow: 0 8px 30px rgba(0, 217, 255, 0.3);
        }

        .metric-label {
            color: #8b92b0;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .metric-value.good { color: #00ff88; }
        .metric-value.warning { color: #ffaa00; }
        .metric-value.critical { color: #ff3366; }
        .metric-value.info { color: #00d9ff; }

        .metric-change {
            font-size: 0.875rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            display: inline-block;
        }

        .metric-change.positive { background: rgba(0, 255, 136, 0.2); color: #00ff88; }
        .metric-change.negative { background: rgba(255, 51, 102, 0.2); color: #ff3366; }

        /* Production Lines */
        .lines-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .line-card {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.8), rgba(45, 27, 78, 0.8));
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid;
            cursor: pointer;
            transition: all 0.3s;
        }

        .line-card.healthy {
            border-color: #00ff88;
        }

        .line-card.warning {
            border-color: #ffaa00;
        }

        .line-card.critical {
            border-color: #ff3366;
            animation: pulse-critical 2s infinite;
        }

        .line-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 217, 255, 0.3);
        }

        .line-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .line-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .status-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.green {
            background: #00ff88;
            box-shadow: 0 0 10px #00ff88;
        }

        .status-dot.yellow {
            background: #ffaa00;
            box-shadow: 0 0 10px #ffaa00;
        }

        .status-dot.red {
            background: #ff3366;
            box-shadow: 0 0 10px #ff3366;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .line-metrics {
            display: flex;
            justify-content: space-around;
            margin: 1rem 0;
        }

        .line-metric {
            text-align: center;
        }

        .line-metric-value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .line-metric-label {
            font-size: 0.75rem;
            color: #8b92b0;
        }

        .line-status {
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Asset Grid */
        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .asset-card {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.9), rgba(45, 27, 78, 0.9));
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(138, 43, 226, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }

        .asset-card:hover {
            transform: translateY(-4px);
            border-color: #8a2be2;
            box-shadow: 0 8px 30px rgba(138, 43, 226, 0.3);
        }

        .asset-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .asset-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #8a2be2;
        }

        .asset-location {
            font-size: 0.875rem;
            color: #8b92b0;
            margin-bottom: 1rem;
        }

        .asset-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .asset-metric {
            text-align: center;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
        }

        .asset-metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #8a2be2;
        }

        .asset-metric-label {
            font-size: 0.7rem;
            color: #8b92b0;
        }

        /* Correlation Cards */
        .correlation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .correlation-card {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.9), rgba(45, 27, 78, 0.9));
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid rgba(138, 43, 226, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }

        .correlation-card:hover {
            transform: translateY(-4px);
            border-color: #8a2be2;
            box-shadow: 0 8px 30px rgba(138, 43, 226, 0.4);
        }

        .correlation-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .correlation-icon {
            font-size: 2.5rem;
        }

        .correlation-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #8a2be2;
        }

        .correlation-description {
            font-size: 0.875rem;
            color: #8b92b0;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .correlation-stats {
            display: flex;
            justify-content: space-around;
            padding-top: 1rem;
            border-top: 1px solid rgba(138, 43, 226, 0.3);
        }

        .correlation-stat {
            text-align: center;
        }

        .correlation-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8a2be2;
        }

        .correlation-stat-label {
            font-size: 0.75rem;
            color: #8b92b0;
        }

        /* Section Titles */
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
            color: #00d9ff;
        }

        /* Insight Panels */
        .insights-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .insight-column {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.8), rgba(45, 27, 78, 0.8));
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .insight-column h3 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .insight-column.happening { border-left: 4px solid #00d9ff; }
        .insight-column.issues { border-left: 4px solid #ff3366; }
        .insight-column.predictions { border-left: 4px solid #ffaa00; }

        .insight-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            border-left: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .insight-item:hover {
            transform: translateX(4px);
            background: rgba(0, 0, 0, 0.5);
        }

        .insight-item.critical { border-left-color: #ff3366; }
        .insight-item.warning { border-left-color: #ffaa00; }
        .insight-item.info { border-left-color: #00d9ff; }

        .insight-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .insight-description {
            font-size: 0.875rem;
            color: #8b92b0;
            line-height: 1.5;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d9ff, #00ff88);
            color: #0a0e27;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(139, 146, 176, 0.2);
            color: #00d9ff;
            border: 1px solid #00d9ff;
        }

        .btn-back {
            background: rgba(139, 146, 176, 0.2);
            color: #8b92b0;
            border: 1px solid #8b92b0;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn-back:hover {
            background: rgba(139, 146, 176, 0.3);
            color: #00d9ff;
            border-color: #00d9ff;
        }

        /* Drill-Down Modal */
        .drill-down-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            overflow-y: auto;
            padding: 2rem;
        }

        .drill-down-modal.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .drill-down-content {
            background: linear-gradient(135deg, #1a1f3a, #2d1b4e);
            max-width: 1400px;
            margin: 0 auto;
            border-radius: 12px;
            padding: 2rem;
            border: 2px solid #00d9ff;
            box-shadow: 0 10px 50px rgba(0, 217, 255, 0.3);
        }

        .drill-down-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
        }

        .drill-down-title {
            font-size: 2rem;
            color: #00d9ff;
        }

        .drill-down-breadcrumb {
            color: #8b92b0;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .drill-down-breadcrumb span {
            color: #00d9ff;
        }

        .drill-down-close {
            background: none;
            border: none;
            color: #00d9ff;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .drill-down-close:hover {
            color: #ff3366;
            transform: rotate(90deg);
        }

        /* Asset Table */
        .asset-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            overflow: hidden;
        }

        .asset-table thead {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 255, 136, 0.2));
        }

        .asset-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #00d9ff;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
        }

        .asset-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(139, 146, 176, 0.1);
        }

        .asset-table tbody tr {
            cursor: pointer;
            transition: all 0.3s;
        }

        .asset-table tbody tr:hover {
            background: rgba(0, 217, 255, 0.1);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-badge.operational {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }

        .status-badge.maintenance {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
        }

        .status-badge.down {
            background: rgba(255, 51, 102, 0.2);
            color: #ff3366;
        }

        /* Detail Sections */
        .detail-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #00d9ff;
        }

        .detail-section h3 {
            color: #00d9ff;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .detail-item {
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
        }

        .detail-label {
            color: #8b92b0;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .detail-value {
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #00d9ff, #00ff88);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
        }

        .timeline-dot {
            position: absolute;
            left: -2.5rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00d9ff;
            box-shadow: 0 0 10px #00d9ff;
        }

        .timeline-content {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid #00d9ff;
        }

        .timeline-date {
            color: #00d9ff;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .timeline-description {
            color: #8b92b0;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Document List */
        .document-list {
            display: grid;
            gap: 0.75rem;
        }

        .document-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .document-item:hover {
            background: rgba(0, 217, 255, 0.1);
            transform: translateX(4px);
        }

        .document-icon {
            font-size: 2rem;
        }

        .document-info {
            flex: 1;
        }

        .document-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .document-meta {
            color: #8b92b0;
            font-size: 0.875rem;
        }

        /* Action History */
        .action-history {
            display: grid;
            gap: 0.75rem;
        }

        .action-item {
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 3px solid #8a2be2;
        }

        .action-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .action-user {
            font-weight: 600;
            color: #8a2be2;
        }

        .action-time {
            color: #8b92b0;
            font-size: 0.875rem;
        }

        .action-description {
            color: #8b92b0;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Tab Navigation */
        .tab-navigation {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            color: #8b92b0;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            font-weight: 600;
        }

        .tab-button:hover {
            color: #00d9ff;
        }

        .tab-button.active {
            color: #00d9ff;
            border-bottom-color: #00d9ff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1f3a;
        }

        ::-webkit-scrollbar-thumb {
            background: #00d9ff;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00ff88;
        }

        /* Search History Styles */
        .search-history-item {
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .search-history-item:hover {
            background: rgba(0, 217, 255, 0.1);
            border-left-color: #00d9ff;
        }

        .search-history-title {
            color: #ffffff;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            line-height: 1.4;
        }

        .search-history-time {
            color: #8b92b0;
            font-size: 0.75rem;
        }

        /* Analysis Step Styles */
        .analysis-step {
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            border-left: 3px solid #00d9ff;
        }

        .analysis-step-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .analysis-step-icon {
            width: 24px;
            height: 24px;
            background: rgba(0, 217, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
            color: #00d9ff;
            font-size: 0.875rem;
        }

        .analysis-step-title {
            color: #00d9ff;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .analysis-step-content {
            color: #8b92b0;
            font-size: 0.813rem;
            line-height: 1.6;
            padding-left: 2.25rem;
        }

        .analysis-step.completed {
            border-left-color: #00ff88;
        }

        .analysis-step.completed .analysis-step-icon {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }

        .analysis-step.completed .analysis-step-title {
            color: #00ff88;
        }

        .analysis-step.thinking {
            border-left-color: #ffaa00;
            animation: pulse 2s infinite;
        }

        .analysis-step.thinking .analysis-step-icon {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
        }

        .analysis-step.thinking .analysis-step-title {
            color: #ffaa00;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Value Stream Dashboard Styles */
        .value-stream-container {
            padding: 2rem;
            overflow-x: auto;
            overflow-y: auto;
            height: calc(100vh - 200px);
        }

        .value-stream-flow {
            display: flex;
            flex-direction: column;
            gap: 3rem;
            min-width: 1800px;
        }

        .value-stream-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
        }

        .value-stream-card {
            flex: 1;
            min-width: 220px;
            max-width: 280px;
            background: linear-gradient(135deg, rgba(10, 14, 39, 0.95), rgba(26, 31, 58, 0.95));
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid rgba(0, 217, 255, 0.2);
            position: relative;
        }

        .value-stream-card:hover {
            transform: translateY(-5px);
            border-color: #00d9ff;
            box-shadow: 0 10px 30px rgba(0, 217, 255, 0.3);
        }

        .value-stream-card.healthy {
            border-color: rgba(0, 255, 136, 0.5);
        }

        .value-stream-card.warning {
            border-color: rgba(255, 170, 0, 0.5);
        }

        .value-stream-card.critical {
            border-color: rgba(255, 51, 102, 0.5);
            animation: pulse 2s infinite;
        }

        .vs-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .vs-card-icon {
            font-size: 2rem;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .vs-health-score {
            font-size: 1.5rem;
            font-weight: bold;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            background: rgba(0, 217, 255, 0.1);
        }

        .vs-health-score.excellent {
            color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .vs-health-score.good {
            color: #00d9ff;
            background: rgba(0, 217, 255, 0.1);
        }

        .vs-health-score.warning {
            color: #ffaa00;
            background: rgba(255, 170, 0, 0.1);
        }

        .vs-health-score.critical {
            color: #ff3366;
            background: rgba(255, 51, 102, 0.1);
        }

        .vs-card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.75rem;
        }

        .vs-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .vs-metric {
            background: rgba(0, 0, 0, 0.3);
            padding: 0.5rem;
            border-radius: 6px;
        }

        .vs-metric-label {
            font-size: 0.75rem;
            color: #8b92b0;
            margin-bottom: 0.25rem;
        }

        .vs-metric-value {
            font-size: 1rem;
            font-weight: 600;
            color: #00d9ff;
        }

        .vs-badges {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .vs-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .vs-badge.alert {
            background: rgba(255, 51, 102, 0.2);
            color: #ff3366;
            border: 1px solid #ff3366;
        }

        .vs-badge.prediction {
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
            border: 1px solid #00d9ff;
        }

        .vs-badge.improvement {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid #00ff88;
        }

        .vs-next-action {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 0.813rem;
        }

        .vs-next-action-title {
            color: #00d9ff;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .vs-next-action-text {
            color: #8b92b0;
            line-height: 1.4;
        }

        .vs-connector {
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            position: relative;
            flex-shrink: 0;
        }

        .vs-connector::after {
            content: '‚ñ∂';
            position: absolute;
            right: -8px;
            top: -8px;
            color: #00ff88;
            font-size: 1rem;
        }

        .vs-connector.critical {
            background: linear-gradient(90deg, #ff3366, #ff6b9d);
            animation: pulse 2s infinite;
        }

        .vs-connector.critical::after {
            color: #ff3366;
        }

        .vs-row-label {
            position: absolute;
            left: -120px;
            font-size: 0.875rem;
            font-weight: 600;
            color: #00d9ff;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        .vs-support-functions {
            background: rgba(0, 217, 255, 0.05);
            border: 2px dashed rgba(0, 217, 255, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .vs-support-title {
            color: #00d9ff;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .vs-support-cards {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Tab Styles */
        .tab-button {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            color: #8b92b0;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-button:hover {
            color: #00d9ff;
            border-bottom-color: rgba(0, 217, 255, 0.3);
        }

        .tab-button.active {
            color: #00d9ff;
            border-bottom-color: #00d9ff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Drawer System */
        .sidebar {
            width: 280px;
            transition: width 0.3s ease, margin-left 0.3s ease;
            position: relative;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .insights-panel {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <h1>üéØ InsightAI Platform</h1>
            <div class="breadcrumb">
                <span id="breadcrumb-text">GenOEE ‚Ä¢ Factory Overview</span>
            </div>
        </div>
        <div class="header-right">
            <select class="factory-selector" id="factory-selector" onchange="switchFactory()">
                <option value="all">üåç All Factories</option>
                <option value="pune">üè≠ Factory A - Pune</option>
                <option value="mumbai">üè≠ Factory B - Mumbai</option>
                <option value="delhi">üè≠ Factory C - Delhi</option>
                <option value="chennai">üè≠ Factory D - Chennai</option>
                <option value="bangalore">üè≠ Factory E - Bangalore</option>
            </select>
        </div>
    </div>

    <!-- Layout Container -->
    <div class="layout">
        <!-- Left Sidebar Navigation -->
        <div class="sidebar">
            <!-- Command Center Section -->
            <div class="nav-section">
                <div class="nav-main" onclick="toggleSubmenu('command-center')" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.2), rgba(255, 170, 0, 0.1)); border-left: 4px solid #ffaa00;">
                    <div>
                        <span class="nav-icon">üéØ</span>
                        <span>COMMAND CENTER</span>
                    </div>
                    <span class="nav-arrow expanded">‚ñ∂</span>
                </div>
                <div class="nav-submenu active show" id="submenu-command-center">
                    <div class="nav-item active" onclick="showScreen('dashboard')" style="position: relative;">
                        Alerts & Warnings
                        <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: #ff3366; color: white; font-size: 0.75rem; padding: 2px 6px; border-radius: 10px; font-weight: 600;">16</span>
                    </div>
                    <div class="nav-item" onclick="showScreen('value-stream')">Value Stream Dashboard</div>
                    <div class="nav-item" onclick="showScreen('what-if')">What-If Analysis</div>
                    <div class="nav-item" onclick="showScreen('multidimensional-search')">Multidimensional Analysis</div>
                </div>
            </div>

            <!-- GenOEE Section -->
            <div class="nav-section">
                <div class="nav-main active" onclick="toggleSubmenu('genoee')">
                    <div>
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>GenOEE (OT)</span>
                    </div>
                    <span class="nav-arrow expanded">‚ñ∂</span>
                </div>
                <div class="nav-submenu show" id="submenu-genoee">
                    <div class="nav-item active" onclick="showScreen('factory-overview')">Factory Overview</div>
                    <div class="nav-item" onclick="showScreen('live-operations')">Live Operations Monitor</div>
                    <div class="nav-item" onclick="showScreen('predictive-analytics')">Predictive Analytics</div>
                    <div class="nav-item" onclick="showScreen('quality-intelligence')">Quality Intelligence</div>
                    <div class="nav-item" onclick="showScreen('asset-performance')">Asset Performance</div>
                </div>
            </div>

            <!-- GenIMS Section -->
            <div class="nav-section">
                <div class="nav-main" onclick="toggleSubmenu('genims')">
                    <div>
                        <span class="nav-icon">üè¢</span>
                        <span>GenIMS (IT)</span>
                    </div>
                    <span class="nav-arrow">‚ñ∂</span>
                </div>
                <div class="nav-submenu" id="submenu-genims">
                    <div class="nav-item" onclick="showScreen('correlation-engine')">Correlation Engine</div>
                    <div class="nav-item" onclick="showScreen('asset-management')">Asset Management</div>
                    <div class="nav-item" onclick="showScreen('resource-optimization')">Resource Optimization</div>
                    <div class="nav-item" onclick="showScreen('supply-chain')">Supply Chain Intelligence</div>
                    <div class="nav-item" onclick="showScreen('quality-management')">Quality Management</div>
                    <div class="nav-item" onclick="showScreen('project-management')">Project Management</div>
                    <div class="nav-item" onclick="showScreen('compliance-audit')">Compliance & Audit</div>
                </div>
            </div>

            <!-- Data Center Section -->
            <div class="nav-section">
                <div class="nav-main" onclick="toggleSubmenu('data-center')">
                    <div>
                        <span class="nav-icon">üíæ</span>
                        <span>DATA CENTER</span>
                    </div>
                    <span class="nav-arrow">‚ñ∂</span>
                </div>
                <div class="nav-submenu" id="submenu-data-center">
                    <div class="nav-item" onclick="showScreen('database-inventory')">Database Inventory</div>
                    <div class="nav-item" onclick="showScreen('value-stream-mapping')">Value Stream Mapping</div>
                    <div class="nav-item" onclick="showScreen('database-relationships')">Database Relationships</div>
                    <div class="nav-item" onclick="showScreen('integration-health')">Data & Integration Health</div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Dashboard Screen (Command Center) -->
            <div id="dashboard" class="screen active">
                <div class="screen-header">
                    <h2 class="screen-title">üéØ Command Center Dashboard</h2>
                    <p class="screen-subtitle">Critical alerts, warnings, and opportunities across GenOEE & GenIMS</p>
                </div>

                <!-- Summary Metrics -->
                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 51, 102, 0.2), rgba(255, 51, 102, 0.05));">
                        <div class="metric-label">Critical Alerts</div>
                        <div class="metric-value critical">3</div>
                        <span style="font-size: 0.875rem; color: #ff3366;">Immediate action required</span>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.2), rgba(255, 170, 0, 0.05));">
                        <div class="metric-label">Warnings</div>
                        <div class="metric-value warning">5</div>
                        <span style="font-size: 0.875rem; color: #ffaa00;">Monitor closely</span>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 217, 255, 0.05));">
                        <div class="metric-label">Information</div>
                        <div class="metric-value info">12</div>
                        <span style="font-size: 0.875rem; color: #00d9ff;">For awareness</span>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05));">
                        <div class="metric-label">Opportunities</div>
                        <div class="metric-value good">8</div>
                        <span style="font-size: 0.875rem; color: #00ff88;">Potential value: $2.4M</span>
                    </div>
                </div>

                <!-- Critical Alerts Section -->
                <h3 class="section-title" style="color: #ff3366;">üî¥ CRITICAL ALERTS - Immediate Action Required</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="showDashboardAlert('machine-m205-down')" style="border-left-color: #ff3366; cursor: pointer; background: linear-gradient(135deg, rgba(255, 51, 102, 0.1), rgba(255, 51, 102, 0.05));">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üî•</div>
                            <div>
                                <div class="correlation-title" style="color: #ff3366;">Machine M-205 DOWN - 4.2 Hours</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">Line 3 | Bearing Failure</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Impact:</strong> WO-12352 at risk (34% complete, should be 70%)<br>
                            <strong>Revenue Risk:</strong> $45,000 + $5,000/day late penalty<br>
                            <strong>Customer:</strong> DEF Manufacturing (strategic account)<br>
                            <strong>Action Required:</strong> Emergency bearing replacement ETA 30 min
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">4.2hr</div>
                                <div class="correlation-stat-label">Downtime</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">$50K</div>
                                <div class="correlation-stat-label">Total Impact</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">HIGH</div>
                                <div class="correlation-stat-label">Priority</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('material-shortage-m456')" style="border-left-color: #ff3366; cursor: pointer; background: linear-gradient(135deg, rgba(255, 51, 102, 0.1), rgba(255, 51, 102, 0.05));">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üì¶</div>
                            <div>
                                <div class="correlation-title" style="color: #ff3366;">Material Stockout in 23 Days</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">Part M-456 | Critical Component</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Current Stock:</strong> 850 units (15 days supply at current rate)<br>
                            <strong>Demand Surge:</strong> +45% due to Product X promotion<br>
                            <strong>Supplier Lead Time:</strong> 45 days (too late to order now)<br>
                            <strong>Action Required:</strong> Emergency transfer from Factory B or expedite
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">23d</div>
                                <div class="correlation-stat-label">Stockout</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">$450K</div>
                                <div class="correlation-stat-label">Revenue Risk</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">CRITICAL</div>
                                <div class="correlation-stat-label">Status</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('certification-crisis')" style="border-left-color: #ff3366; cursor: pointer; background: linear-gradient(135deg, rgba(255, 51, 102, 0.1), rgba(255, 51, 102, 0.05));">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üë•</div>
                            <div>
                                <div class="correlation-title" style="color: #ff3366;">12 Operators Losing Certification</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">Lines 3, 5, 7 | Next 30 Days</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Impact:</strong> 40% capacity reduction on critical lines<br>
                            <strong>Production Risk:</strong> $850K/week if operators can't work<br>
                            <strong>Compliance Risk:</strong> Customer audit violations<br>
                            <strong>Action Required:</strong> Schedule immediate recertification training
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">12</div>
                                <div class="correlation-stat-label">Operators</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">30d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #ff3366;">$850K</div>
                                <div class="correlation-stat-label">Weekly Risk</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Warnings Section -->
                <h3 class="section-title" style="color: #ffaa00; margin-top: 2rem;">üü° WARNINGS - Monitor Closely</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="showDashboardAlert('supplier-quality-decline')" style="border-left-color: #ffaa00; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">‚ö†Ô∏è</div>
                            <div>
                                <div class="correlation-title" style="color: #ffaa00;">Supplier Quality Declining</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">Supplier S-123 | PPM 3x Increase</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            PPM increased from 500 to 1,500 in last 60 days. Root cause: New manufacturing facility with quality control gaps. Trending to 2,200 PPM if not addressed.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">1,500</div>
                                <div class="correlation-stat-label">Current PPM</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$185K</div>
                                <div class="correlation-stat-label">Annual Cost</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('capacity-constraint')" style="border-left-color: #ffaa00; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üìà</div>
                            <div>
                                <div class="correlation-title" style="color: #ffaa00;">Capacity Constraint Week of Dec 25</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">Demand: 15K vs Capacity: 12.5K</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Order spike predicted. 20% overcapacity situation. Will result in late deliveries and customer penalties unless addressed.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">20%</div>
                                <div class="correlation-stat-label">Overcapacity</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$125K</div>
                                <div class="correlation-stat-label">Penalty Risk</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('machine-m118-risk')" style="border-left-color: #ffaa00; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">‚öôÔ∏è</div>
                            <div>
                                <div class="correlation-title" style="color: #ffaa00;">Machine M-118 Failure Risk</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">45% Probability in 14 Days</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Bearing temperature rising. Vibration increasing. Predictive model shows 45% failure probability if not serviced.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45%</div>
                                <div class="correlation-stat-label">Failure Prob</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$28K</div>
                                <div class="correlation-stat-label">Impact</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('night-shift-performance')" style="border-left-color: #ffaa00; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üåô</div>
                            <div>
                                <div class="correlation-title" style="color: #ffaa00;">Night Shift Performance Gap</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">18% Lower OEE Than Day Shift</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Consistent underperformance. Root cause: Fatigue + reduced supervision. Monthly loss: $85K.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">18%</div>
                                <div class="correlation-stat-label">OEE Gap</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$85K</div>
                                <div class="correlation-stat-label">Monthly Loss</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('customer-complaint-risk')" style="border-left-color: #ffaa00; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üìû</div>
                            <div>
                                <div class="correlation-title" style="color: #ffaa00;">Customer Complaint Risk</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">Batch BT-2024-089 | 245 Units Shipped</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Marginal quality batch shipped to 8 customers. Predicted: 3-5 complaints in next 30 days.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3-5</div>
                                <div class="correlation-stat-label">Predicted</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8</div>
                                <div class="correlation-stat-label">Customers</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Opportunities Section -->
                <h3 class="section-title" style="color: #00ff88; margin-top: 2rem;">üíé OPPORTUNITIES - Value Creation</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="showDashboardAlert('oee-improvement')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üìä</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">OEE Improvement Potential</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">82.4% ‚Üí 89.5% (+7.1%)</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Combined impact of fixing Line 3, reducing stoppages, and improving quality. Annual value: $2.86M.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">+7.1%</div>
                                <div class="correlation-stat-label">OEE Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$2.86M</div>
                                <div class="correlation-stat-label">Annual Value</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('downtime-reduction')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">‚ö°</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">Downtime Reduction -75%</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Predictive Maintenance + Inventory</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Implement predictive maintenance + optimize inventory. Reduce downtime from 48.5hrs to 12hrs/month.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">-75%</div>
                                <div class="correlation-stat-label">Reduction</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$321K</div>
                                <div class="correlation-stat-label">Annual Save</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('product-mix-optimization')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üéØ</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">Product Mix Optimization</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Shift 10% from Product B to A</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Product A: 65% margin, Product B: 25% margin. Shift 10% volume to higher margin product.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">+40%</div>
                                <div class="correlation-stat-label">Margin</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$280K</div>
                                <div class="correlation-stat-label">Monthly Gain</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('energy-optimization')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">‚ö°</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">Energy Cost Reduction</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Batch Similar Orders</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Energy spikes 35% during changeovers. Batch similar orders to reduce changeover frequency.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">-35%</div>
                                <div class="correlation-stat-label">Peak Reduction</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$45K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('dual-sourcing')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üîó</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">Dual-Source Critical Part</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">M-456 Risk Reduction</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Add second supplier for Part M-456. Reduce stockout risk 75% with only 3% cost increase.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">-75%</div>
                                <div class="correlation-stat-label">Risk</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$340K</div>
                                <div class="correlation-stat-label">Annual Benefit</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('training-roi')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üìö</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">Training Investment ROI</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">40 Hours/Year Per Operator</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Operators with >40hrs training submit 4.2x more improvement ideas. Average idea saves $15K.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8.5x</div>
                                <div class="correlation-stat-label">ROI</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$180K</div>
                                <div class="correlation-stat-label">Annual Value</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('safety-productivity')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üõ°Ô∏è</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">Safety = Productivity</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Zero Incidents ‚Üí +12% OEE</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Lines with zero safety incidents show 12% higher OEE and 8% fewer defects. Safe = Disciplined.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">+12%</div>
                                <div class="correlation-stat-label">OEE Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$145K</div>
                                <div class="correlation-stat-label">Annual Value</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showDashboardAlert('customer-otif')" style="border-left-color: #00ff88; cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon" style="font-size: 2rem;">üì¶</div>
                            <div>
                                <div class="correlation-title" style="color: #00ff88;">OTIF Improvement ‚Üí Revenue</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">93.2% ‚Üí 98% (+4.8%)</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Each 1% OTIF improvement increases customer LTV by $125K. Target: 93.2% ‚Üí 98% = $600K value.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">+4.8%</div>
                                <div class="correlation-stat-label">OTIF Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$600K</div>
                                <div class="correlation-stat-label">LTV Increase</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- What-If Scenarios Screen -->
            <div id="what-if" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîÆ What-If Scenario Planning</h2>
                    <p class="screen-subtitle">Simulate operational changes and predict outcomes</p>
                </div>

                <!-- Scenario Simulator -->
                <div class="detail-section" style="margin-bottom: 2rem;">
                    <h3>üí≠ Describe Your Scenario</h3>
                    <div style="background: rgba(0, 217, 255, 0.05); padding: 2rem; border-radius: 8px; border: 2px solid #00d9ff;">
                        <label style="display: block; margin-bottom: 1rem; color: #00d9ff; font-size: 1.1rem; font-weight: 600;">
                            Explain what will happen if...
                        </label>
                        <textarea 
                            id="what-if-prompt" 
                            placeholder="Type your scenario here. Examples:

‚Ä¢ I add a 3rd shift on Line 3
‚Ä¢ Supplier S-123 stops delivering Part M-456
‚Ä¢ I increase safety stock from 15 to 30 days
‚Ä¢ Machine M-205 breaks down for 1 week
‚Ä¢ I implement predictive maintenance on all lines
‚Ä¢ Demand increases by 50% next month
‚Ä¢ I dual-source Part M-456 with a new supplier
‚Ä¢ I reduce changeover time by 50%
‚Ä¢ Line 3 achieves 95% OEE (world class)
‚Ä¢ A new competitor enters the market with 20% lower prices"
                            style="width: 100%; min-height: 150px; padding: 1rem; background: rgba(0,0,0,0.5); border: 2px solid #00d9ff; border-radius: 8px; color: #ffffff; font-size: 1.1rem; font-family: inherit; resize: vertical;"
                        ></textarea>
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <button class="btn btn-primary" style="font-size: 1.2rem; padding: 1rem 3rem;" onclick="runWhatIfSimulation()">
                                ‚ñ∂Ô∏è Run Simulation
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Simulation Results -->
                <div id="simulation-results" style="display: none;">
                    <!-- Results will be dynamically inserted here -->
                </div>

                <!-- Pre-Listed Scenarios (Examples) -->
                <div id="what-if-prelisted">
                    <h3 class="section-title">üìã Example Scenarios (Click to simulate)</h3>
                    <div class="correlation-grid">
                        <div class="correlation-card" onclick="document.getElementById('what-if-prompt').value='I add a 3rd shift on Line 3'; runWhatIfSimulation();" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üïê</div>
                                <div class="correlation-title">Add 3rd Shift on Line 3</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Change:</strong> Add night shift (10PM-6AM)<br>
                                <strong>Capacity:</strong> +33% (current 16hrs ‚Üí 24hrs)<br>
                                <strong>Cost:</strong> $45K/month (labor + overhead)<br>
                                <strong>Revenue:</strong> +$180K/month<br>
                                <strong>Net Benefit:</strong> $135K/month
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">+$135K</div>
                                    <div class="correlation-stat-label">Monthly Benefit</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">3.0x</div>
                                    <div class="correlation-stat-label">ROI</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('new-machine')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">‚öôÔ∏è</div>
                                <div class="correlation-title">Add CNC Machine to Line 2</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Investment:</strong> $450K (machine + installation)<br>
                                <strong>Capacity:</strong> +20% on Line 2<br>
                                <strong>Lead Time:</strong> 12 weeks<br>
                                <strong>Payback Period:</strong> 18 months<br>
                                <strong>5-Year NPV:</strong> $1.2M
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">$1.2M</div>
                                    <div class="correlation-stat-label">5-Year NPV</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">18mo</div>
                                    <div class="correlation-stat-label">Payback</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('reduce-changeover')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">‚ö°</div>
                                <div class="correlation-title">Reduce Changeover Time 50%</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current:</strong> 4.5 hours average<br>
                                <strong>Target:</strong> 2.25 hours (SMED implementation)<br>
                                <strong>Investment:</strong> $25K (training + tooling)<br>
                                <strong>Capacity Gain:</strong> +8%<br>
                                <strong>Annual Benefit:</strong> $280K
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">11.2x</div>
                                    <div class="correlation-stat-label">ROI</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$280K</div>
                                    <div class="correlation-stat-label">Annual Benefit</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="document.getElementById('what-if-prompt').value='Supplier S-123 stops delivering Part M-456'; runWhatIfSimulation();" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üîó</div>
                                <div class="correlation-title">Dual-Source Part M-456</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current:</strong> Single supplier, 3.8x stockout risk<br>
                                <strong>Change:</strong> Add 2nd supplier<br>
                                <strong>Cost Increase:</strong> +3% ($12K/year)<br>
                                <strong>Risk Reduction:</strong> -75%<br>
                                <strong>Net Benefit:</strong> $328K/year
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">-75%</div>
                                    <div class="correlation-stat-label">Risk</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$328K</div>
                                    <div class="correlation-stat-label">Net Benefit</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('increase-safety-stock')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üì¶</div>
                                <div class="correlation-title">Increase Safety Stock 15‚Üí30 Days</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Carrying Cost:</strong> +$140K/year<br>
                                <strong>Stockout Avoidance:</strong> $450K/year<br>
                                <strong>Service Level:</strong> 92% ‚Üí 99%<br>
                                <strong>Customer Satisfaction:</strong> +12%<br>
                                <strong>Net Benefit:</strong> $310K/year
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">+7%</div>
                                    <div class="correlation-stat-label">Service</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$310K</div>
                                    <div class="correlation-stat-label">Net Benefit</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('automation')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">ü§ñ</div>
                                <div class="correlation-title">Automate Assembly Line 5</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Investment:</strong> $850K (robotics + integration)<br>
                                <strong>Labor Reduction:</strong> 8 operators ‚Üí 2<br>
                                <strong>Throughput:</strong> +40%<br>
                                <strong>Quality:</strong> +15% (defect reduction)<br>
                                <strong>Payback:</strong> 24 months
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">$2.1M</div>
                                    <div class="correlation-stat-label">5-Year NPV</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">24mo</div>
                                    <div class="correlation-stat-label">Payback</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('product-mix')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üéØ</div>
                                <div class="correlation-title">Shift Product Mix (B‚ÜíA)</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current Mix:</strong> Product A 30%, B 60%, C 10%<br>
                                <strong>New Mix:</strong> Product A 40%, B 50%, C 10%<br>
                                <strong>Margin Impact:</strong> A 65%, B 25%<br>
                                <strong>Same Capacity:</strong> No capital needed<br>
                                <strong>Monthly Gain:</strong> $280K
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">+40%</div>
                                    <div class="correlation-stat-label">Margin</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$3.36M</div>
                                    <div class="correlation-stat-label">Annual Value</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('preventive-maintenance')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üîß</div>
                                <div class="correlation-title">Implement Predictive Maintenance</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Investment:</strong> $120K (sensors + software)<br>
                                <strong>Current Downtime:</strong> 48.5 hrs/month<br>
                                <strong>Predicted:</strong> 7.3 hrs/month (-85%)<br>
                                <strong>Production Recovery:</strong> 3,300 units/month<br>
                                <strong>Annual Benefit:</strong> $1.27M
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">-85%</div>
                                    <div class="correlation-stat-label">Downtime</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">10.6x</div>
                                    <div class="correlation-stat-label">ROI</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('energy-optimization')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">‚ö°</div>
                                <div class="correlation-title">Energy Demand Management</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Strategy:</strong> Batch similar orders, reduce changeovers<br>
                                <strong>Peak Reduction:</strong> -35% during changeovers<br>
                                <strong>Investment:</strong> $15K (scheduling software)<br>
                                <strong>Monthly Savings:</strong> $45K<br>
                                <strong>Annual Benefit:</strong> $540K
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">36x</div>
                                    <div class="correlation-stat-label">ROI</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$540K</div>
                                    <div class="correlation-stat-label">Annual Save</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('quality-investment')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">‚úì</div>
                                <div class="correlation-title">100% Incoming Inspection</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current:</strong> Sample inspection (AQL 2.5%)<br>
                                <strong>Change:</strong> 100% automated vision inspection<br>
                                <strong>Investment:</strong> $180K (equipment)<br>
                                <strong>Defect Reduction:</strong> 7.9% ‚Üí 1.2%<br>
                                <strong>Scrap Savings:</strong> $385K/year
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">-85%</div>
                                    <div class="correlation-stat-label">Defects</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$385K</div>
                                    <div class="correlation-stat-label">Annual Save</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('training-program')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üìö</div>
                                <div class="correlation-title">Operator Training Program</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current:</strong> 12 hrs/year per operator<br>
                                <strong>Target:</strong> 40 hrs/year<br>
                                <strong>Cost:</strong> $85K/year (training + time)<br>
                                <strong>Impact:</strong> 4.2x more improvement ideas<br>
                                <strong>Value:</strong> $720K/year (avg $15K per idea)
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">8.5x</div>
                                    <div class="correlation-stat-label">ROI</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$635K</div>
                                    <div class="correlation-stat-label">Net Benefit</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card" onclick="runWhatIfScenario('vendor-consolidation')" style="cursor: pointer;">
                            <div class="correlation-header">
                                <div class="correlation-icon">ü§ù</div>
                                <div class="correlation-title">Supplier Consolidation</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current:</strong> 45 suppliers<br>
                                <strong>Target:</strong> 20 strategic suppliers<br>
                                <strong>Volume Leverage:</strong> 5-8% price reduction<br>
                                <strong>Admin Savings:</strong> $120K/year<br>
                                <strong>Total Benefit:</strong> $580K/year
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value" style="color: #00ff88;">-55%</div>
                                    <div class="correlation-stat-label">Suppliers</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$580K</div>
                                    <div class="correlation-stat-label">Annual Save</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Multidimensional Search Screen -->
            <div id="multidimensional-search" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîç Multidimensional Search</h2>
                    <p class="screen-subtitle">Query anything across all correlated data - AI-powered intelligent answers</p>
                </div>

                <div style="display: flex; gap: 0; height: calc(100vh - 200px);">
                    <!-- Left Sidebar - Previous Searches -->
                    <div id="search-history-sidebar" style="width: 280px; background: rgba(0,0,0,0.3); border-radius: 8px; padding: 1rem; overflow-y: auto;">
                        <h3 style="color: #00d9ff; font-size: 1rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid rgba(0, 217, 255, 0.3);">
                            üí¨ Search History
                        </h3>
                        <div id="search-history-list">
                            <div class="search-history-item" onclick="loadPreviousSearch(0)">
                                <div class="search-history-title">Which supplier is best performing?</div>
                                <div class="search-history-time">2 hours ago</div>
                            </div>
                            <div class="search-history-item" onclick="loadPreviousSearch(1)">
                                <div class="search-history-title">What's causing quality issues on Line 3?</div>
                                <div class="search-history-time">3 hours ago</div>
                            </div>
                            <div class="search-history-item" onclick="loadPreviousSearch(2)">
                                <div class="search-history-title">Compare OEE across all factories</div>
                                <div class="search-history-time">Yesterday</div>
                            </div>
                            <div class="search-history-item" onclick="loadPreviousSearch(3)">
                                <div class="search-history-title">Which work orders are at risk?</div>
                                <div class="search-history-time">Yesterday</div>
                            </div>
                            <div class="search-history-item" onclick="loadPreviousSearch(4)">
                                <div class="search-history-title">Show me all late deliveries from suppliers</div>
                                <div class="search-history-time">2 days ago</div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Search Area -->
                    <div style="flex: 1; display: flex; flex-direction: column; padding: 0 1rem;">
                        <!-- Query Results Area -->
                        <div id="search-results-area" style="flex: 1; overflow-y: auto; margin-bottom: 1rem; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
                            <div style="text-align: center; padding: 4rem 2rem; color: #8b92b0;">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                                <h3 style="color: #00d9ff; margin-bottom: 1rem;">Ask Me Anything</h3>
                                <p style="line-height: 1.8; max-width: 600px; margin: 0 auto;">
                                    Query across all your operational data - production, quality, supply chain, workforce, maintenance, and more.
                                    I'll analyze the data, show my thinking process, and provide comprehensive answers.
                                </p>
                                <div style="margin-top: 2rem; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
                                    <div style="color: #00d9ff; margin-bottom: 0.5rem; font-weight: 600;">Example queries:</div>
                                    <div style="color: #8b92b0; line-height: 2;">
                                        ‚Ä¢ Which supplier is best performing?<br>
                                        ‚Ä¢ What's causing quality issues on Line 3?<br>
                                        ‚Ä¢ Compare OEE across all factories<br>
                                        ‚Ä¢ Which work orders are at risk?<br>
                                        ‚Ä¢ Show me all late deliveries from suppliers<br>
                                        ‚Ä¢ What's the correlation between operator training and quality?<br>
                                        ‚Ä¢ Which machines need maintenance soon?<br>
                                        ‚Ä¢ Find root cause of downtime on Line 5
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Query Input -->
                        <div style="background: rgba(0, 217, 255, 0.05); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff;">
                            <textarea 
                                id="multidim-search-input" 
                                placeholder="Ask anything about your operations... (e.g., 'Which supplier is best performing?')"
                                style="width: 100%; min-height: 80px; padding: 1rem; background: rgba(0,0,0,0.5); border: 2px solid #00d9ff; border-radius: 8px; color: #ffffff; font-size: 1.1rem; font-family: inherit; resize: vertical; margin-bottom: 1rem;"
                            ></textarea>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem;">
                                    üí° Tip: Be specific for better results
                                </div>
                                <button class="btn btn-primary" style="padding: 0.75rem 2rem;" onclick="runMultidimensionalSearch()">
                                    üîç Search
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Right Tray - Analysis Process (Initially Hidden) -->
                    <div id="analysis-tray" style="width: 400px; background: rgba(0,0,0,0.3); border-radius: 8px; padding: 1.5rem; overflow-y: auto; display: none;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="color: #00d9ff; font-size: 1rem; margin: 0;">ü§ñ AI Analysis Process</h3>
                            <button onclick="document.getElementById('analysis-tray').style.display='none'" style="background: none; border: none; color: #8b92b0; font-size: 1.5rem; cursor: pointer; padding: 0;">‚úï</button>
                        </div>
                        <div id="analysis-tray-content">
                            <!-- Content dynamically inserted -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Value Stream Dashboard -->
            <div id="value-stream" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üéØ Value Stream Dashboard</h2>
                    <p class="screen-subtitle">End-to-end visibility of your entire business value chain with actionable insights</p>
                </div>

                <div class="value-stream-container">
                    <div class="value-stream-flow">
                        <!-- Row 1: Customer Demand ‚Üí Procurement -->
                        <div class="value-stream-row">
                            <!-- Customer/CRM -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('crm')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00d9ff;">üë•</div>
                                    <div class="vs-health-score excellent">96</div>
                                </div>
                                <div class="vs-card-title">Customer / CRM</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Active Orders</div>
                                        <div class="vs-metric-value">248</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Satisfaction</div>
                                        <div class="vs-metric-value">4.8/5</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge prediction">üìà Demand +12%</div>
                                    <div class="vs-badge improvement">‚úì OTIF 96.5%</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Review Q1 demand forecast with top 5 customers</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Sales & Demand Planning -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('sales')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00ff88;">üìä</div>
                                    <div class="vs-health-score excellent">94</div>
                                </div>
                                <div class="vs-card-title">Sales & Planning</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Forecast Acc.</div>
                                        <div class="vs-metric-value">87%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Pipeline</div>
                                        <div class="vs-metric-value">$4.2M</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge prediction">üìà +15% next Q</div>
                                    <div class="vs-badge improvement">‚úì S&OP aligned</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Update capacity plan for demand surge</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Procurement/Suppliers -->
                            <div class="value-stream-card warning" onclick="showValueStreamDetail('procurement')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #ffaa00;">üè¢</div>
                                    <div class="vs-health-score warning">68</div>
                                </div>
                                <div class="vs-card-title">Suppliers</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">OTIF</div>
                                        <div class="vs-metric-value">82%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Quality PPM</div>
                                        <div class="vs-metric-value">650</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge alert">‚ö†Ô∏è 3 Late POs</div>
                                    <div class="vs-badge alert">‚ö†Ô∏è S-123 Risk</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Qualify alternative for Part M-456 (30 days)</div>
                                </div>
                            </div>

                            <div class="vs-connector critical"></div>

                            <!-- Inbound Logistics -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('inbound')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00d9ff;">üöö</div>
                                    <div class="vs-health-score good">89</div>
                                </div>
                                <div class="vs-card-title">Inbound Logistics</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">In Transit</div>
                                        <div class="vs-metric-value">12 loads</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Avg Lead</div>
                                        <div class="vs-metric-value">2.3 days</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì 95% on time</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Optimize routes for cost reduction</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- WMS Raw Materials -->
                            <div class="value-stream-card warning" onclick="showValueStreamDetail('wms-rm')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #ffaa00;">üì¶</div>
                                    <div class="vs-health-score warning">72</div>
                                </div>
                                <div class="vs-card-title">WMS (Raw Mat.)</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Stock Level</div>
                                        <div class="vs-metric-value">78%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Turnover</div>
                                        <div class="vs-metric-value">8.2x</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge alert">‚ö†Ô∏è Stockout in 23d</div>
                                    <div class="vs-badge prediction">üìâ Part M-456</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Emergency order Part M-456 (Factory B transfer)</div>
                                </div>
                            </div>
                        </div>

                        <!-- Row 2: Production Planning ‚Üí Factory Operations -->
                        <div class="value-stream-row">
                            <!-- Production Planning -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('planning')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00ff88;">üìÖ</div>
                                    <div class="vs-health-score excellent">91</div>
                                </div>
                                <div class="vs-card-title">Production Planning</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Schedule Adh.</div>
                                        <div class="vs-metric-value">94%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Capacity Util.</div>
                                        <div class="vs-metric-value">82%</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì APS optimized</div>
                                    <div class="vs-badge prediction">üìà +3% efficiency</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Evaluate 3rd shift for Line 3 capacity</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Manufacturing/Production -->
                            <div class="value-stream-card critical" onclick="showValueStreamDetail('production')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #ff3366;">üè≠</div>
                                    <div class="vs-health-score critical">62</div>
                                </div>
                                <div class="vs-card-title">Production Lines</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">OEE</div>
                                        <div class="vs-metric-value">68.5%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Output</div>
                                        <div class="vs-metric-value">42.8K/d</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge alert">üî¥ M-205 DOWN</div>
                                    <div class="vs-badge alert">‚ö†Ô∏è Line 3: 45%</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">URGENT ACTION</div>
                                    <div class="vs-next-action-text">Fix Machine M-205 bearing (30min ETA)</div>
                                </div>
                            </div>

                            <div class="vs-connector critical"></div>

                            <!-- Machines & Assets -->
                            <div class="value-stream-card warning" onclick="showValueStreamDetail('assets')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #ffaa00;">‚öôÔ∏è</div>
                                    <div class="vs-health-score warning">74</div>
                                </div>
                                <div class="vs-card-title">Assets & Machines</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Uptime</div>
                                        <div class="vs-metric-value">89.2%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">MTBF</div>
                                        <div class="vs-metric-value">285hrs</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge alert">‚ö†Ô∏è 1 DOWN</div>
                                    <div class="vs-badge prediction">üîß 3 PM due</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Install vibration sensors on critical machines</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Maintenance/CMMS -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('maintenance')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00d9ff;">üîß</div>
                                    <div class="vs-health-score good">86</div>
                                </div>
                                <div class="vs-card-title">Maintenance</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">PM Comp.</div>
                                        <div class="vs-metric-value">92%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">MTTR</div>
                                        <div class="vs-metric-value">2.4hrs</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì 92% PM on time</div>
                                    <div class="vs-badge alert">‚ö†Ô∏è 1 Emergency</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Schedule 3 overdue PMs this weekend</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Quality Control -->
                            <div class="value-stream-card warning" onclick="showValueStreamDetail('quality')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #ffaa00;">‚úì</div>
                                    <div class="vs-health-score warning">71</div>
                                </div>
                                <div class="vs-card-title">Quality Control</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">FPY</div>
                                        <div class="vs-metric-value">91.1%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Defect Rate</div>
                                        <div class="vs-metric-value">8.9%</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge alert">‚ö†Ô∏è Line 3: 8.9%</div>
                                    <div class="vs-badge alert">‚ö†Ô∏è S-123 mat.</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">100% inspection S-123 materials + recertify 5 ops</div>
                                </div>
                            </div>
                        </div>

                        <!-- Row 3: Finished Goods ‚Üí Customer Delivery -->
                        <div class="value-stream-row">
                            <!-- WMS Finished Goods -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('wms-fg')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00ff88;">üì¶</div>
                                    <div class="vs-health-score excellent">93</div>
                                </div>
                                <div class="vs-card-title">WMS (Fin. Goods)</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Stock Level</div>
                                        <div class="vs-metric-value">85%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Fill Rate</div>
                                        <div class="vs-metric-value">96.5%</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì Optimal levels</div>
                                    <div class="vs-badge improvement">‚úì Fast turnover</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Implement automated picking for efficiency</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Outbound Logistics -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('outbound')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00d9ff;">üöõ</div>
                                    <div class="vs-health-score excellent">95</div>
                                </div>
                                <div class="vs-card-title">Outbound Logistics</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">OTIF</div>
                                        <div class="vs-metric-value">96.5%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">In Transit</div>
                                        <div class="vs-metric-value">28 loads</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì GPS tracking</div>
                                    <div class="vs-badge improvement">‚úì 96.5% OTIF</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Review carrier performance quarterly</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Customer Delivery -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('delivery')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00ff88;">‚úì</div>
                                    <div class="vs-health-score excellent">94</div>
                                </div>
                                <div class="vs-card-title">Customer Delivery</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">On Time</div>
                                        <div class="vs-metric-value">96.5%</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Damages</div>
                                        <div class="vs-metric-value">0.3%</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì Excellent OTIF</div>
                                    <div class="vs-badge improvement">‚úì Low damage</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Customer feedback survey Q1</div>
                                </div>
                            </div>

                            <div class="vs-connector"></div>

                            <!-- Customer Service -->
                            <div class="value-stream-card healthy" onclick="showValueStreamDetail('service')">
                                <div class="vs-card-header">
                                    <div class="vs-card-icon" style="color: #00d9ff;">üí¨</div>
                                    <div class="vs-health-score excellent">92</div>
                                </div>
                                <div class="vs-card-title">Customer Service</div>
                                <div class="vs-metrics">
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">CSAT</div>
                                        <div class="vs-metric-value">4.8/5</div>
                                    </div>
                                    <div class="vs-metric">
                                        <div class="vs-metric-label">Resolution</div>
                                        <div class="vs-metric-value">92%</div>
                                    </div>
                                </div>
                                <div class="vs-badges">
                                    <div class="vs-badge improvement">‚úì High CSAT</div>
                                    <div class="vs-badge prediction">üìà NPS +8</div>
                                </div>
                                <div class="vs-next-action">
                                    <div class="vs-next-action-title">Next Best Action</div>
                                    <div class="vs-next-action-text">Deploy AI chatbot for 24/7 support</div>
                                </div>
                            </div>
                        </div>

                        <!-- Support Functions -->
                        <div class="vs-support-functions">
                            <div class="vs-support-title">üîÑ Cross-Functional Support Systems</div>
                            <div class="vs-support-cards">
                                <!-- ERP -->
                                <div class="value-stream-card healthy" onclick="showValueStreamDetail('erp')" style="max-width: 350px;">
                                    <div class="vs-card-header">
                                        <div class="vs-card-icon" style="color: #00d9ff;">üíæ</div>
                                        <div class="vs-health-score excellent">96</div>
                                    </div>
                                    <div class="vs-card-title">ERP System</div>
                                    <div class="vs-metrics">
                                        <div class="vs-metric">
                                            <div class="vs-metric-label">Data Quality</div>
                                            <div class="vs-metric-value">98%</div>
                                        </div>
                                        <div class="vs-metric">
                                            <div class="vs-metric-label">Integration</div>
                                            <div class="vs-metric-value">100%</div>
                                        </div>
                                    </div>
                                    <div class="vs-badges">
                                        <div class="vs-badge improvement">‚úì Real-time sync</div>
                                        <div class="vs-badge improvement">‚úì All modules live</div>
                                    </div>
                                    <div class="vs-next-action">
                                        <div class="vs-next-action-title">Next Best Action</div>
                                        <div class="vs-next-action-text">Review financial close cycle time</div>
                                    </div>
                                </div>

                                <!-- HR/HCM -->
                                <div class="value-stream-card healthy" onclick="showValueStreamDetail('hr')" style="max-width: 350px;">
                                    <div class="vs-card-header">
                                        <div class="vs-card-icon" style="color: #00ff88;">üë•</div>
                                        <div class="vs-health-score excellent">91</div>
                                    </div>
                                    <div class="vs-card-title">HR / HCM</div>
                                    <div class="vs-metrics">
                                        <div class="vs-metric">
                                            <div class="vs-metric-label">Headcount</div>
                                            <div class="vs-metric-value">485</div>
                                        </div>
                                        <div class="vs-metric">
                                            <div class="vs-metric-label">Training</div>
                                            <div class="vs-metric-value">94%</div>
                                        </div>
                                    </div>
                                    <div class="vs-badges">
                                        <div class="vs-badge improvement">‚úì 94% certified</div>
                                        <div class="vs-badge alert">‚ö†Ô∏è 5 certs expired</div>
                                    </div>
                                    <div class="vs-next-action">
                                        <div class="vs-next-action-title">Next Best Action</div>
                                        <div class="vs-next-action-text">Recertify 5 Line 3 operators (2 weeks)</div>
                                    </div>
                                </div>

                                <!-- Finance -->
                                <div class="value-stream-card healthy" onclick="showValueStreamDetail('finance')" style="max-width: 350px;">
                                    <div class="vs-card-header">
                                        <div class="vs-card-icon" style="color: #ffaa00;">üí∞</div>
                                        <div class="vs-health-score excellent">93</div>
                                    </div>
                                    <div class="vs-card-title">Finance</div>
                                    <div class="vs-metrics">
                                        <div class="vs-metric">
                                            <div class="vs-metric-label">Revenue</div>
                                            <div class="vs-metric-value">$2.8M/mo</div>
                                        </div>
                                        <div class="vs-metric">
                                            <div class="vs-metric-label">Margin</div>
                                            <div class="vs-metric-value">18.5%</div>
                                        </div>
                                    </div>
                                    <div class="vs-badges">
                                        <div class="vs-badge improvement">‚úì On budget</div>
                                        <div class="vs-badge prediction">üìà +8% Q1</div>
                                    </div>
                                    <div class="vs-next-action">
                                        <div class="vs-next-action-title">Next Best Action</div>
                                        <div class="vs-next-action-text">Review cost reduction initiatives</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Factory Overview Screen (Default) -->
            <div id="factory-overview" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üè≠ Factory Overview - Geographic View</h2>
                    <p class="screen-subtitle">Real-time visibility across all manufacturing locations</p>
                </div>

                <!-- Factory Map -->
                <div class="factory-map-container">
                    <div class="map-canvas" id="factory-map">
                        <!-- Factory A - Pune (Healthy) -->
                        <div class="factory-marker" style="left: 25%; top: 35%;" 
                             onclick="showFactoryPopup('pune', this)">
                            <div class="marker-pin healthy">üè≠</div>
                            <div class="marker-label">Factory A - Pune</div>
                        </div>

                        <!-- Factory B - Mumbai (Warning) -->
                        <div class="factory-marker" style="left: 40%; top: 30%;" 
                             onclick="showFactoryPopup('mumbai', this)">
                            <div class="marker-pin warning">üè≠</div>
                            <div class="marker-label">Factory B - Mumbai</div>
                        </div>

                        <!-- Factory C - Delhi (Critical) -->
                        <div class="factory-marker" style="left: 50%; top: 18%;" 
                             onclick="showFactoryPopup('delhi', this)">
                            <div class="marker-pin critical">üè≠</div>
                            <div class="marker-label">Factory C - Delhi</div>
                        </div>

                        <!-- Factory D - Chennai (Healthy) -->
                        <div class="factory-marker" style="left: 65%; top: 50%;" 
                             onclick="showFactoryPopup('chennai', this)">
                            <div class="marker-pin healthy">üè≠</div>
                            <div class="marker-label">Factory D - Chennai</div>
                        </div>

                        <!-- Factory E - Bangalore (Healthy) -->
                        <div class="factory-marker" style="left: 75%; top: 42%;" 
                             onclick="showFactoryPopup('bangalore', this)">
                            <div class="marker-pin healthy">üè≠</div>
                            <div class="marker-label">Factory E - Bangalore</div>
                        </div>

                        <!-- Factory Popup (Hidden by default) -->
                        <div id="factory-popup" class="factory-popup"></div>
                    </div>
                </div>

                <!-- Overall Metrics -->
                <h3 class="section-title">üìä Network-Wide Metrics</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Overall OEE (All Factories)</div>
                        <div class="metric-value warning">84.7%</div>
                        <span class="metric-change positive">‚Üë +1.2%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Production Lines</div>
                        <div class="metric-value info">38 / 42</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">90.5% Utilization</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Critical Issues</div>
                        <div class="metric-value critical">7</div>
                        <span style="font-size: 0.875rem; color: #ff3366;">Immediate attention</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Network Revenue (Today)</div>
                        <div class="metric-value good">$2.8M</div>
                        <span class="metric-change positive">‚Üë +8.3%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Quality First Pass Yield</div>
                        <div class="metric-value good">96.8%</div>
                        <span class="metric-change positive">‚Üë +0.5%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">On-Time Delivery</div>
                        <div class="metric-value warning">93.2%</div>
                        <span class="metric-change negative">‚Üì -1.8%</span>
                    </div>
                </div>
            </div>

            <!-- Live Operations Monitor Screen -->
            <div id="live-operations" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">‚ö° Live Operations Monitor</h2>
                    <p class="screen-subtitle">Real-time production status and immediate actions</p>
                </div>

                <!-- Live Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card" onclick="showOEECalculation()" style="cursor: pointer;">
                        <div class="metric-label">Current OEE</div>
                        <div class="metric-value warning">82.4%</div>
                        <span class="metric-change negative">‚Üì -2.1%</span>
                    </div>
                    <div class="metric-card" onclick="showLinesVisualization()" style="cursor: pointer;">
                        <div class="metric-label">Lines Running</div>
                        <div class="metric-value good">7 / 8</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">Line 3 down</span>
                    </div>
                    <div class="metric-card" onclick="showActiveWorkOrders()" style="cursor: pointer;">
                        <div class="metric-label">Active Work Orders</div>
                        <div class="metric-value info">24</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">18 on-time, 6 at-risk</span>
                    </div>
                    <div class="metric-card" onclick="showDowntimeAnalysis()" style="cursor: pointer;">
                        <div class="metric-label">Unplanned Downtime</div>
                        <div class="metric-value critical">4.2 hrs</div>
                        <span style="font-size: 0.875rem; color: #ff3366;">Line 3: 4 hours</span>
                    </div>
                </div>

                <!-- Production Lines -->
                <h3 class="section-title">üìä Live Production Lines</h3>
                <div class="lines-grid">
                    <div class="line-card healthy" onclick="showLineDetailView(1, 'operational')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 1 - Assembly</span>
                            <span class="status-dot green"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00ff88;">92%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00d9ff;">245</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status">
                            ‚úì Running smoothly<br>
                            WO-12350 ‚Ä¢ On schedule
                        </div>
                    </div>

                    <div class="line-card healthy" onclick="showLineDetailView(2, 'operational')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 2 - CNC</span>
                            <span class="status-dot green"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00ff88;">89%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00d9ff;">180</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status">
                            ‚úì Running smoothly<br>
                            WO-12351 ‚Ä¢ On schedule
                        </div>
                    </div>

                    <div class="line-card critical" onclick="showLineDetailView(3, 'down')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 3 - CNC</span>
                            <span class="status-dot red"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #ff3366;">45%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #ff3366;">65</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status" style="color: #ff3366;">
                            ‚ö†Ô∏è Machine M-205 DOWN<br>
                            Bearing failure ‚Ä¢ 4hr downtime
                        </div>
                    </div>

                    <div class="line-card healthy" onclick="showLineDetailView(4, 'operational')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 4 - Welding</span>
                            <span class="status-dot green"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00ff88;">91%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00d9ff;">220</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status">
                            ‚úì Exceeding targets<br>
                            WO-12352 ‚Ä¢ Ahead of schedule
                        </div>
                    </div>

                    <div class="line-card warning" onclick="showLineDetailView(5, 'warning')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 5 - Assembly</span>
                            <span class="status-dot yellow"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #ffaa00;">78%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #ffaa00;">195</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status" style="color: #ffaa00;">
                            ‚ö†Ô∏è Material wait<br>
                            Part M-456 ETA: 2 hours
                        </div>
                    </div>

                    <div class="line-card healthy" onclick="showLineDetailView(6, 'operational')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 6 - Packaging</span>
                            <span class="status-dot green"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00ff88;">88%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00d9ff;">310</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status">
                            ‚úì Running smoothly<br>
                            WO-12354 ‚Ä¢ On schedule
                        </div>
                    </div>

                    <div class="line-card healthy" onclick="showLineDetailView(7, 'operational')" style="cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 7 - Testing</span>
                            <span class="status-dot green"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00ff88;">85%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #00d9ff;">150</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status">
                            ‚úì Running smoothly<br>
                            WO-12355 ‚Ä¢ On schedule
                        </div>
                    </div>

                    <div class="line-card" onclick="showLineDetailView(8, 'maintenance')" style="opacity: 0.6; border-color: #8b92b0; cursor: pointer;">
                        <div class="line-header">
                            <span class="line-name">Line 8 - Painting</span>
                            <span class="status-dot" style="background: #8b92b0;"></span>
                        </div>
                        <div class="line-metrics">
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #8b92b0;">0%</div>
                                <div class="line-metric-label">OEE</div>
                            </div>
                            <div class="line-metric">
                                <div class="line-metric-value" style="color: #8b92b0;">0</div>
                                <div class="line-metric-label">Units/hr</div>
                            </div>
                        </div>
                        <div class="line-status" style="color: #8b92b0;">
                            üîß Planned maintenance<br>
                            Resumes: Tomorrow 6AM
                        </div>
                    </div>
                </div>

                <!-- Three-Column Insights -->
                <h3 class="section-title">üéØ Live Insights & Actions</h3>
                <div class="insights-panel">
                    <div class="insight-column happening">
                        <h3>üîµ What's Happening</h3>
                        <div class="insight-item info">
                            <div class="insight-title">Active Production</div>
                            <div class="insight-description">24 work orders in progress</div>
                        </div>
                        <div class="insight-item info">
                            <div class="insight-title">Material Flow</div>
                            <div class="insight-description">Truck arriving (ETA: 2 hrs)</div>
                        </div>
                        <div class="insight-item info">
                            <div class="insight-title">Quality Checks</div>
                            <div class="insight-description">98% first pass yield</div>
                        </div>
                    </div>

                    <div class="insight-column issues">
                        <h3>üî¥ What's Wrong</h3>
                        <div class="insight-item critical">
                            <div class="insight-title">Machine M-205 DOWN</div>
                            <div class="insight-description">4 hours downtime</div>
                        </div>
                        <div class="insight-item critical">
                            <div class="insight-title">Material Shortage</div>
                            <div class="insight-description">Part M-456 low stock</div>
                        </div>
                        <div class="insight-item warning">
                            <div class="insight-title">Quality Declining</div>
                            <div class="insight-description">Supplier S-123 PPM ‚Üë3x</div>
                        </div>
                    </div>

                    <div class="insight-column predictions">
                        <h3>üü° What Will Go Wrong</h3>
                        <div class="insight-item warning">
                            <div class="insight-title">M-118 Failure Risk</div>
                            <div class="insight-description">85% prob in 7 days</div>
                        </div>
                        <div class="insight-item warning">
                            <div class="insight-title">Capacity Constraint</div>
                            <div class="insight-description">Week of Dec 25</div>
                        </div>
                        <div class="insight-item warning">
                            <div class="insight-title">Stockout Coming</div>
                            <div class="insight-description">Part M-789 in 23 days</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Predictive Analytics Screen -->
            <div id="predictive-analytics" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîÆ Predictive Analytics</h2>
                    <p class="screen-subtitle">AI-powered predictions and preventive actions</p>
                </div>

                <h3 class="section-title">‚ö†Ô∏è Equipment Failure Predictions</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="showPredictionDetail('machine', 'machine-m205')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div>
                                <div class="correlation-title">Machine M-205</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">HIGH RISK</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            85% failure probability in 7 days<br>
                            Indicators: Vibration 2.3x, Temperature +15¬∞C<br>
                            Impact: $45K production loss
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">85%</div>
                                <div class="correlation-stat-label">Failure Prob</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">7d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$45K</div>
                                <div class="correlation-stat-label">Cost Impact</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showPredictionDetail('machine', 'machine-m118')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Machine M-118</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">MEDIUM RISK</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            45% failure probability in 14 days<br>
                            Indicators: Bearing temperature rising<br>
                            Impact: $28K production loss
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45%</div>
                                <div class="correlation-stat-label">Failure Prob</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">14d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$28K</div>
                                <div class="correlation-stat-label">Cost Impact</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Machine M-342 prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Machine M-342</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">MEDIUM RISK</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            38% failure probability in 21 days<br>
                            Indicators: Hydraulic pressure declining<br>
                            Impact: $18K production loss
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">38%</div>
                                <div class="correlation-stat-label">Failure Prob</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">21d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$18K</div>
                                <div class="correlation-stat-label">Cost Impact</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Machine M-567 prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü¢</div>
                            <div>
                                <div class="correlation-title">Machine M-567</div>
                                <div style="font-size: 0.875rem; color: #00ff88;">LOW RISK</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            15% failure probability in 45 days<br>
                            Indicators: All parameters normal<br>
                            Impact: $12K production loss if occurs
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">15%</div>
                                <div class="correlation-stat-label">Failure Prob</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$12K</div>
                                <div class="correlation-stat-label">Cost Impact</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">üì¶ Material Shortage Predictions</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="alert('Part M-456 shortage prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div>
                                <div class="correlation-title">Part M-456</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">CRITICAL</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Stockout predicted in 23 days<br>
                            Current: 850 units (15 days supply)<br>
                            Demand surge: +45% (Product X promotion)
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">23d</div>
                                <div class="correlation-stat-label">Stockout</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">850</div>
                                <div class="correlation-stat-label">Current Stock</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$450K</div>
                                <div class="correlation-stat-label">Revenue Risk</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Part M-789 shortage prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Part M-789</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Stockout predicted in 38 days<br>
                            Current: 2,100 units (30 days supply)<br>
                            Supplier lead time: 45 days
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">38d</div>
                                <div class="correlation-stat-label">Stockout</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">2,100</div>
                                <div class="correlation-stat-label">Current Stock</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$280K</div>
                                <div class="correlation-stat-label">Revenue Risk</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Part C-234 shortage prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Consumable C-234</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Low stock alert in 15 days<br>
                            Current: 150 liters (20 days supply)<br>
                            Usage rate increasing 12% monthly
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">15d</div>
                                <div class="correlation-stat-label">Alert</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">150L</div>
                                <div class="correlation-stat-label">Current Stock</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$45K</div>
                                <div class="correlation-stat-label">Impact</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">üë• Workforce & Capacity Predictions</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="alert('Certification expiry prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div>
                                <div class="correlation-title">Certification Expiry Crisis</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">CRITICAL</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            12 operators losing certification in 30 days<br>
                            Critical Lines 3, 5, 7 affected<br>
                            Production capacity risk: 40%
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">12</div>
                                <div class="correlation-stat-label">Operators</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">30d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$850K</div>
                                <div class="correlation-stat-label">Weekly Risk</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Capacity constraint prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Capacity Constraint</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Order spike predicted week of Dec 25<br>
                            Demand: 15,000 units vs Capacity: 12,500<br>
                            Customer OTIF at risk
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">20%</div>
                                <div class="correlation-stat-label">Overcapacity</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">Dec 25</div>
                                <div class="correlation-stat-label">Week</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$125K</div>
                                <div class="correlation-stat-label">Late Penalties</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">üìà Quality & Customer Risk Predictions</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" onclick="alert('Quality decline prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Supplier Quality Decline</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Supplier S-123 PPM trending up 15%/month<br>
                            Current: 1,500 PPM (was 500 PPM)<br>
                            Predicted: 2,200 PPM in 60 days
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">2,200</div>
                                <div class="correlation-stat-label">Pred. PPM</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">60d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$185K</div>
                                <div class="correlation-stat-label">Quality Cost</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Customer complaint prediction details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Customer Complaint Risk</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            Batch BT-2024-089 marginal quality<br>
                            245 units shipped to 8 customers<br>
                            Predicted: 3-5 complaints in 30 days
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3-5</div>
                                <div class="correlation-stat-label">Complaints</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">245</div>
                                <div class="correlation-stat-label">Units</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8</div>
                                <div class="correlation-stat-label">Customers</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quality Intelligence Screen -->
            <div id="quality-intelligence" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">‚úì Quality Intelligence</h2>
                    <p class="screen-subtitle">Real-time quality monitoring and root cause analysis</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">First Pass Yield</div>
                        <div class="metric-value good">96.8%</div>
                        <span class="metric-change positive">‚Üë +1.2%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Defect Rate (PPM)</div>
                        <div class="metric-value warning">850</div>
                        <span class="metric-change negative">‚Üë +15%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Customer Complaints</div>
                        <div class="metric-value info">12</div>
                        <span class="metric-change positive">‚Üì -3</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Scrap Cost (This Month)</div>
                        <div class="metric-value critical">$125K</div>
                        <span class="metric-change negative">‚Üë +18%</span>
                    </div>
                </div>

                <h3 class="section-title">üîç Active Quality Issues</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Line 3 Scrap: 15%</div>
                        </div>
                        <div class="correlation-description">
                            Root Causes:<br>
                            ‚Ä¢ Supplier S-123 material quality (70%)<br>
                            ‚Ä¢ Operator certification expired (30%)<br>
                            Loss: $28K this week
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View Root Cause Analysis</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Supplier S-123 Declining</div>
                        </div>
                        <div class="correlation-description">
                            PPM increased 3x in 60 days (500 ‚Üí 1,500)<br>
                            Impact: 8 work orders affected<br>
                            Audit scheduled: Dec 23
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Find Alternative Suppliers</button>
                    </div>
                </div>
            </div>

            <!-- Asset Performance Screen -->
            <div id="asset-performance" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">‚öôÔ∏è Asset Performance</h2>
                    <p class="screen-subtitle">Real-time asset monitoring and maintenance intelligence</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Total Assets</div>
                        <div class="metric-value info">245</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">Machines & Equipment</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Asset Utilization</div>
                        <div class="metric-value good">87.3%</div>
                        <span class="metric-change positive">‚Üë +2.1%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">MTBF (Mean Time Between Failures)</div>
                        <div class="metric-value info">45.2d</div>
                        <span class="metric-change positive">‚Üë +3.2d</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Maintenance Cost (This Month)</div>
                        <div class="metric-value warning">$285K</div>
                        <span class="metric-change negative">‚Üë +12%</span>
                    </div>
                </div>

                <h3 class="section-title">üéØ Critical Assets</h3>
                <p style="margin-bottom: 1.5rem; color: #8b92b0;">High-value assets requiring immediate attention</p>
                <!-- Asset cards would go here -->
            </div>

            <!-- Correlation Engine Screen (GenIMS) -->
            <div id="correlation-engine" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîó Correlation Engine</h2>
                    <p class="screen-subtitle">Cross-functional insights invisible in siloed systems</p>
                </div>

                <div class="correlation-grid">
                    <div class="correlation-card" onclick="showCorrelationDetail('quality-supply')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Quality ‚Üî Supply Chain</div>
                        </div>
                        <div class="correlation-description">
                            78% of dimensional variance issues correlate with late deliveries from Supplier S-123. 
                            Rushed production at supplier leads to quality compromises.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">78%</div>
                                <div class="correlation-stat-label">Correlation</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$125K</div>
                                <div class="correlation-stat-label">Cost Impact</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="showCorrelationDetail('production-hr')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Production ‚Üî HR</div>
                        </div>
                        <div class="correlation-description">
                            Operator certification expiry correlates with 65% increase in setup errors and quality 
                            issues on Lines 3, 5, and 7. 12 certifications expiring in 30 days.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">65%</div>
                                <div class="correlation-stat-label">Error Increase</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">12</div>
                                <div class="correlation-stat-label">Expiring Soon</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Assets ‚Üî Customer correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Assets ‚Üî Customer</div>
                        </div>
                        <div class="correlation-description">
                            Equipment downtime on Machine M-205 directly affects $450K in customer orders 
                            to 3 strategic accounts (XYZ Corp, ABC Industries, DEF Manufacturing).
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$450K</div>
                                <div class="correlation-stat-label">Revenue Risk</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3</div>
                                <div class="correlation-stat-label">Customers</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Material ‚Üî Finance correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Material ‚Üî Finance</div>
                        </div>
                        <div class="correlation-description">
                            Inventory carrying cost analysis: $280K/month vs $450K stockout risk. 
                            Optimal safety stock is 30 days (not current 15 days). Net savings: $170K/month.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$170K</div>
                                <div class="correlation-stat-label">Monthly Savings</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">30d</div>
                                <div class="correlation-stat-label">Optimal Stock</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Compliance ‚Üî Operations correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Compliance ‚Üî Operations</div>
                        </div>
                        <div class="correlation-description">
                            ISO audit findings: 82% of non-conformances originate from just 3 specific work centers. 
                            Process control gaps identified in welding and assembly operations.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">82%</div>
                                <div class="correlation-stat-label">Concentration</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3</div>
                                <div class="correlation-stat-label">Work Centers</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Projects ‚Üî Resources correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Projects ‚Üî Resources</div>
                        </div>
                        <div class="correlation-description">
                            95% of project delays correlate with resource conflicts - same skilled operators 
                            needed for both capital projects and BAU operations. 8 active conflicts identified.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">95%</div>
                                <div class="correlation-stat-label">Correlation</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8</div>
                                <div class="correlation-stat-label">Conflicts</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Energy ‚Üî Production correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Energy ‚Üî Production</div>
                        </div>
                        <div class="correlation-description">
                            Energy consumption spikes 35% during changeovers. AI optimization suggests batching similar orders 
                            to reduce changeover frequency. Potential savings: $45K/month in energy costs.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">35%</div>
                                <div class="correlation-stat-label">Spike</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$45K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Maintenance ‚Üî Quality correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Maintenance ‚Üî Quality</div>
                        </div>
                        <div class="correlation-description">
                            Quality defects increase 3.2x in the 7 days before scheduled PM. Machines operating near 
                            PM date show degraded precision. Recommendation: Perform PM 3 days earlier.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3.2x</div>
                                <div class="correlation-stat-label">Defect Increase</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">7d</div>
                                <div class="correlation-stat-label">Window</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Weather ‚Üî Logistics correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Weather ‚Üî Logistics</div>
                        </div>
                        <div class="correlation-description">
                            Monsoon season correlates with 45% increase in supplier delivery delays and 28% increase 
                            in transportation costs. Proactive inventory buildup recommended 2 weeks before monsoon.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45%</div>
                                <div class="correlation-stat-label">Delay Increase</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">28%</div>
                                <div class="correlation-stat-label">Cost Increase</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Shift ‚Üî Performance correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Shift Timing ‚Üî Performance</div>
                        </div>
                        <div class="correlation-description">
                            Night shift (10PM-6AM) shows 18% lower OEE compared to day shifts. Root cause: Fatigue + 
                            reduced supervision. Solution: Rotate operators weekly + increase supervision.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">18%</div>
                                <div class="correlation-stat-label">OEE Gap</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$85K</div>
                                <div class="correlation-stat-label">Monthly Loss</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Customer Orders ‚Üî Machine Failure correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Customer Orders ‚Üî Machine Failure</div>
                        </div>
                        <div class="correlation-description">
                            Machine failures increase 2.5x during high-volume order periods. Operators skip PM checks 
                            to meet deadlines. Implement mandatory PM enforcement regardless of production pressure.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">2.5x</div>
                                <div class="correlation-stat-label">Failure Rate</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$195K</div>
                                <div class="correlation-stat-label">Annual Cost</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Training ‚Üî Innovation correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Training ‚Üî Innovation</div>
                        </div>
                        <div class="correlation-description">
                            Operators with >40 hours annual training submit 4.2x more process improvement suggestions. 
                            Implemented suggestions save average $15K each. ROI on training: 8.5x.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">4.2x</div>
                                <div class="correlation-stat-label">More Ideas</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8.5x</div>
                                <div class="correlation-stat-label">Training ROI</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Vendor Diversity ‚Üî Supply Risk correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Vendor Diversity ‚Üî Supply Risk</div>
                        </div>
                        <div class="correlation-description">
                            Single-source parts have 3.8x higher stockout risk. Dual-sourcing critical Part M-456 
                            would reduce risk 75% with only 3% cost increase. Net benefit: $340K/year.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">75%</div>
                                <div class="correlation-stat-label">Risk Reduction</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$340K</div>
                                <div class="correlation-stat-label">Annual Benefit</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Safety ‚Üî Productivity correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Safety ‚Üî Productivity</div>
                        </div>
                        <div class="correlation-description">
                            Lines with zero safety incidents show 12% higher OEE. Safe operations = disciplined operations. 
                            Monthly safety training inversely correlates with both accidents and quality defects.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">12%</div>
                                <div class="correlation-stat-label">OEE Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">-8%</div>
                                <div class="correlation-stat-label">Defect Reduction</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Product Mix ‚Üî Profitability correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Product Mix ‚Üî Profitability</div>
                        </div>
                        <div class="correlation-description">
                            Product A generates 65% margin but only 30% of volume. Product B: 25% margin, 60% volume. 
                            Shifting 10% volume from B to A increases profit $280K/month with same capacity.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$280K</div>
                                <div class="correlation-stat-label">Monthly Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">10%</div>
                                <div class="correlation-stat-label">Mix Shift</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card" onclick="alert('Customer Satisfaction ‚Üî Repeat Orders correlation details')" style="cursor: pointer;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Customer Satisfaction ‚Üî Repeat Orders</div>
                        </div>
                        <div class="correlation-description">
                            Customers with >98% OTIF rate place 2.8x larger repeat orders. Every 1% improvement in 
                            OTIF increases customer lifetime value by $125K. Current OTIF: 93.2%, Target: 98%.
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">2.8x</div>
                                <div class="correlation-stat-label">Order Increase</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$600K</div>
                                <div class="correlation-stat-label">Potential Value</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Asset Management Screen (GenIMS) -->
            <div id="asset-management" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üìç Asset Management - Geographic View</h2>
                    <p class="screen-subtitle">All assets across locations with real-time status</p>
                </div>

                <!-- Asset Map -->
                <div class="factory-map-container">
                    <div class="map-canvas">
                        <div style="text-align: center; padding: 2rem; color: #8b92b0;">
                            <h3 style="color: #8a2be2; margin-bottom: 1rem;">üó∫Ô∏è Asset Location Map</h3>
                            <p>Showing 245 assets across 5 factories</p>
                            <p style="margin-top: 1rem;">Click on any location to see detailed asset inventory</p>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">‚öôÔ∏è Asset Inventory by Location</h3>
                <div class="asset-grid">
                    <div class="asset-card" onclick="showFactoryAssets('pune', 'Factory A - Pune')">
                        <div class="asset-icon">üè≠</div>
                        <div class="asset-name">Factory A - Pune</div>
                        <div class="asset-location">Maharashtra, India</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value">58</div>
                                <div class="asset-metric-label">Assets</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">89%</div>
                                <div class="asset-metric-label">Utilization</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showFactoryAssets('mumbai', 'Factory B - Mumbai')">
                        <div class="asset-icon">üè≠</div>
                        <div class="asset-name">Factory B - Mumbai</div>
                        <div class="asset-location">Maharashtra, India</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value">42</div>
                                <div class="asset-metric-label">Assets</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">76%</div>
                                <div class="asset-metric-label">Utilization</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showFactoryAssets('delhi', 'Factory C - Delhi')">
                        <div class="asset-icon">üè≠</div>
                        <div class="asset-name">Factory C - Delhi</div>
                        <div class="asset-location">NCR, India</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value">67</div>
                                <div class="asset-metric-label">Assets</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">91%</div>
                                <div class="asset-metric-label">Utilization</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showFactoryAssets('chennai', 'Factory D - Chennai')">
                        <div class="asset-icon">üè≠</div>
                        <div class="asset-name">Factory D - Chennai</div>
                        <div class="asset-location">Tamil Nadu, India</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value">38</div>
                                <div class="asset-metric-label">Assets</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">88%</div>
                                <div class="asset-metric-label">Utilization</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showFactoryAssets('bangalore', 'Factory E - Bangalore')">
                        <div class="asset-icon">üè≠</div>
                        <div class="asset-name">Factory E - Bangalore</div>
                        <div class="asset-location">Karnataka, India</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value">40</div>
                                <div class="asset-metric-label">Assets</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">92%</div>
                                <div class="asset-metric-label">Utilization</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resource Optimization Screen (GenIMS) -->
            <div id="resource-optimization" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">‚öôÔ∏è Resource Optimization - The 4Ms</h2>
                    <p class="screen-subtitle">Man ‚Ä¢ Material ‚Ä¢ Machine ‚Ä¢ Method optimization across all functions</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Labor Utilization</div>
                        <div class="metric-value good">87.3%</div>
                        <span class="metric-change positive">‚Üë +2.1%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Material Efficiency</div>
                        <div class="metric-value warning">94.2%</div>
                        <span class="metric-change negative">‚Üì -1.5%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Asset Utilization</div>
                        <div class="metric-value good">89.1%</div>
                        <span class="metric-change positive">‚Üë +3.2%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Process Efficiency</div>
                        <div class="metric-value warning">82.6%</div>
                        <span class="metric-change negative">‚Üì -2.8%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Resource Cost (Monthly)</div>
                        <div class="metric-value info">$8.4M</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">All resources</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Optimization Opportunities</div>
                        <div class="metric-value warning">$450K</div>
                        <span style="font-size: 0.875rem; color: #ffaa00;">Identified savings</span>
                    </div>
                </div>

                <h3 class="section-title">üë§ MAN (Labor Resources)</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Certification Expiry Crisis</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Issue:</strong> 12 operator certifications expiring in next 30 days<br>
                            <strong>AI Correlation:</strong> These operators work on critical Lines 3, 5, 7<br>
                            <strong>Impact Analysis:</strong><br>
                            ‚Ä¢ Line 3: 4 operators (50% of team)<br>
                            ‚Ä¢ Line 5: 5 operators (62% of team)<br>
                            ‚Ä¢ Line 7: 3 operators (37% of team)<br>
                            <strong>Production Risk:</strong> $850K/week if lines can't operate<br>
                            <strong>Correlation Found:</strong> Current quality issues on Line 3 correlate with expired certs
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">12</div>
                                <div class="correlation-stat-label">Expiring</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$850K</div>
                                <div class="correlation-stat-label">Risk/Week</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">30d</div>
                                <div class="correlation-stat-label">Timeframe</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Schedule Training Program</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Skill Gap Analysis</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Setup time on Line 3 is 2x standard<br>
                            <strong>Root Cause:</strong> Operators lack advanced training on new equipment<br>
                            <strong>Impact:</strong><br>
                            ‚Ä¢ Lost production: 85 units/week<br>
                            ‚Ä¢ Quality issues: 15% scrap rate (vs 2% normal)<br>
                            ‚Ä¢ Cost: $28K/week in inefficiency<br>
                            <strong>Solution:</strong> 5-day advanced training program<br>
                            <strong>ROI:</strong> Training cost $15K, saves $112K/month
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">2x</div>
                                <div class="correlation-stat-label">Setup Time</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$112K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">7.5x</div>
                                <div class="correlation-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Launch Training Initiative</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Cross-Site Resource Sharing</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Opportunity:</strong> Factory C has 3 certified welding experts idle 40% of time<br>
                            <strong>Need:</strong> Factory A struggling with welding quality issues<br>
                            <strong>Solution:</strong> Temporary assignment (2 weeks) + knowledge transfer<br>
                            <strong>Benefits:</strong><br>
                            ‚Ä¢ Fix Factory A quality issues<br>
                            ‚Ä¢ Reduce Factory A scrap from 8% to 2%<br>
                            ‚Ä¢ Train Factory A operators<br>
                            <strong>Cost:</strong> $8K travel/accommodation<br>
                            <strong>Savings:</strong> $45K/month scrap reduction
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$45K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">2wk</div>
                                <div class="correlation-stat-label">Duration</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">5.6x</div>
                                <div class="correlation-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Approve Resource Sharing</button>
                    </div>
                </div>

                <h3 class="section-title">üì¶ MATERIAL (Inventory & Supply)</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Cross-Site Inventory Imbalance</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> AI inventory analysis across all 5 factories<br>
                            <strong>Part M-456:</strong><br>
                            ‚Ä¢ Factory A: Shortage (850 units, 15 days supply)<br>
                            ‚Ä¢ Factory B: Excess (1,200 units, 45 days supply)<br>
                            <strong>Traditional Approach:</strong> Factory A expedites from supplier ($15K air freight)<br>
                            <strong>AI Recommendation:</strong> Transfer between factories<br>
                            ‚Ä¢ Transfer cost: $1,200 (8-hour truck)<br>
                            ‚Ä¢ Savings: $13,800<br>
                            ‚Ä¢ Solves both shortage and excess
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$13.8K</div>
                                <div class="correlation-stat-label">Savings</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8hr</div>
                                <div class="correlation-stat-label">Transit</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">1,200</div>
                                <div class="correlation-stat-label">Units</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Execute Transfer</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Safety Stock Optimization</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Current Policy:</strong> 15 days safety stock for all critical parts<br>
                            <strong>AI Analysis:</strong> Correlation of carrying cost vs stockout risk<br>
                            <strong>Part M-456:</strong><br>
                            ‚Ä¢ Carrying cost: $280K/month for 15 days<br>
                            ‚Ä¢ Stockout risk: $450K (3 incidents in 12 months)<br>
                            <strong>Optimal Safety Stock:</strong> 30 days<br>
                            ‚Ä¢ New carrying cost: $420K/month (+$140K)<br>
                            ‚Ä¢ Stockout risk: <$50K (reduced 90%)<br>
                            <strong>Net Savings:</strong> $170K/month
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$170K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">30d</div>
                                <div class="correlation-stat-label">Optimal Stock</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">90%</div>
                                <div class="correlation-stat-label">Risk Reduction</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Update Inventory Policy</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Material Usage Efficiency</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Material waste correlation with production schedules<br>
                            <strong>Finding:</strong> Short production runs (< 50 units) have 3x higher waste<br>
                            <strong>Root Cause:</strong> Setup waste, changeover scrap, learning curve<br>
                            <strong>Current State:</strong><br>
                            ‚Ä¢ 45 short runs per month<br>
                            ‚Ä¢ Material waste: $85K/month<br>
                            <strong>Optimization:</strong> Batch similar orders together<br>
                            ‚Ä¢ Reduce to 28 runs per month<br>
                            ‚Ä¢ Waste reduction: $52K/month (61%)
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$52K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">61%</div>
                                <div class="correlation-stat-label">Waste Reduction</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">17</div>
                                <div class="correlation-stat-label">Fewer Runs</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Optimize Scheduling</button>
                    </div>
                </div>

                <h3 class="section-title">‚öôÔ∏è MACHINE (Asset Utilization)</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Predictive Maintenance ROI</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Machine M-118:</strong> Sensor data + historical patterns predict failure<br>
                            <strong>Failure Probability:</strong> 85% in next 7 days<br>
                            <strong>Option 1:</strong> Wait for failure (reactive)<br>
                            ‚Ä¢ Unplanned downtime: 12 hours<br>
                            ‚Ä¢ Lost production: $45K<br>
                            ‚Ä¢ Emergency repair: $8K<br>
                            ‚Ä¢ Total cost: $53K<br>
                            <strong>Option 2:</strong> Preventive maintenance now (proactive)<br>
                            ‚Ä¢ Planned downtime: 4 hours (weekend)<br>
                            ‚Ä¢ Zero production impact<br>
                            ‚Ä¢ Scheduled repair: $2.5K<br>
                            <strong>Cost Avoidance:</strong> $50.5K (20x ROI)
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">85%</div>
                                <div class="correlation-stat-label">Failure Prob</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$50.5K</div>
                                <div class="correlation-stat-label">Cost Avoid</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">20x</div>
                                <div class="correlation-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Schedule Preventive PM</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Cross-Factory Load Balancing</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Capacity imbalance across network<br>
                            <strong>Factory A:</strong> 98% capacity (overloaded)<br>
                            ‚Ä¢ Overtime cost: $35K/week<br>
                            ‚Ä¢ Delivery delays starting<br>
                            <strong>Factory C:</strong> 72% capacity (underutilized)<br>
                            ‚Ä¢ Idle capacity: 28%<br>
                            ‚Ä¢ Fixed costs being wasted<br>
                            <strong>Solution:</strong> Transfer 5 work orders to Factory C<br>
                            ‚Ä¢ Eliminate Factory A overtime<br>
                            ‚Ä¢ Utilize Factory C capacity<br>
                            ‚Ä¢ Savings: $25K/week
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$25K</div>
                                <div class="correlation-stat-label">Weekly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">26%</div>
                                <div class="correlation-stat-label">Capacity Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">5</div>
                                <div class="correlation-stat-label">WOs</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Approve Load Transfer</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Maintenance Schedule Optimization</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Similar equipment PM scheduled at 3 sites this week<br>
                            <strong>Inefficiency:</strong> Each site orders parts separately, uses different technicians<br>
                            <strong>Opportunity:</strong><br>
                            ‚Ä¢ Coordinate PM schedule across sites<br>
                            ‚Ä¢ Bulk order parts (discount: $4K)<br>
                            ‚Ä¢ Share expert technician (best practices)<br>
                            ‚Ä¢ Coordinate timing (minimize disruption)<br>
                            <strong>Benefits:</strong><br>
                            ‚Ä¢ Cost savings: $6K/month<br>
                            ‚Ä¢ Quality improvement: Expert rotation<br>
                            ‚Ä¢ Knowledge sharing: Best practices spread
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$6K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3</div>
                                <div class="correlation-stat-label">Sites</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">15%</div>
                                <div class="correlation-stat-label">Cost Reduction</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Coordinate Schedule</button>
                    </div>
                </div>

                <h3 class="section-title">üìã METHOD (Process Efficiency)</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Setup Time Reduction</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Line 3 setup time is 2x standard (4 hours vs 2 hours)<br>
                            <strong>Root Cause Analysis:</strong><br>
                            ‚Ä¢ Operator training gap (primary: 60%)<br>
                            ‚Ä¢ Tool organization poor (secondary: 25%)<br>
                            ‚Ä¢ Documentation unclear (tertiary: 15%)<br>
                            <strong>Impact:</strong><br>
                            ‚Ä¢ Lost production: 85 units/week<br>
                            ‚Ä¢ Correlates with quality issues (15% scrap)<br>
                            <strong>Solutions:</strong><br>
                            ‚Ä¢ Operator training: 5 days ($15K)<br>
                            ‚Ä¢ 5S implementation: Tool shadow boards ($5K)<br>
                            ‚Ä¢ Visual work instructions: Laminated cards ($2K)<br>
                            <strong>Expected Result:</strong> Setup time reduced to 2.2 hours (45% improvement)
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45%</div>
                                <div class="correlation-stat-label">Time Reduction</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$112K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">5.1x</div>
                                <div class="correlation-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Launch Improvement Project</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Process Standardization</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Same product made differently at 3 factories<br>
                            <strong>Performance Variation:</strong><br>
                            ‚Ä¢ Factory C: Best performer (98% FPY, 92% OEE)<br>
                            ‚Ä¢ Factory A: Average (95% FPY, 87% OEE)<br>
                            ‚Ä¢ Factory B: Below average (92% FPY, 82% OEE)<br>
                            <strong>Root Cause:</strong> No standard process across network<br>
                            <strong>Opportunity:</strong> Adopt Factory C best practices everywhere<br>
                            <strong>Expected Improvement:</strong><br>
                            ‚Ä¢ FPY improvement: +3% average<br>
                            ‚Ä¢ OEE improvement: +5% average<br>
                            ‚Ä¢ Savings: $185K/month network-wide
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$185K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3%</div>
                                <div class="correlation-stat-label">FPY Gain</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">5%</div>
                                <div class="correlation-stat-label">OEE Gain</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Standardize Process</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Batch Size Optimization</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Correlation between batch size and efficiency<br>
                            <strong>Finding:</strong> Small batches (< 50 units) have:<br>
                            ‚Ä¢ 3x higher setup time per unit<br>
                            ‚Ä¢ 2.5x higher material waste<br>
                            ‚Ä¢ 1.8x higher defect rate<br>
                            <strong>Current State:</strong> 45 small batches per month<br>
                            <strong>Optimization:</strong> Minimum batch size 75 units<br>
                            ‚Ä¢ Combine similar orders<br>
                            ‚Ä¢ Reduce to 28 batches per month<br>
                            ‚Ä¢ Maintain delivery commitments<br>
                            <strong>Total Savings:</strong> $95K/month (efficiency + waste + quality)
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$95K</div>
                                <div class="correlation-stat-label">Monthly Save</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">17</div>
                                <div class="correlation-stat-label">Fewer Batches</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">42%</div>
                                <div class="correlation-stat-label">Efficiency Gain</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Optimize Batch Sizes</button>
                    </div>
                </div>

                <h3 class="section-title">üí∞ Total Optimization Opportunity Summary</h3>
                <div class="correlation-grid">
                    <div class="correlation-card" style="border: 2px solid #00ff88;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üíé</div>
                            <div class="correlation-title">Network-Wide Resource Optimization</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Total Monthly Savings Identified:</strong> $823K<br><br>
                            <strong>Breakdown by M:</strong><br>
                            ‚Ä¢ MAN (Labor): $162K/month (20%)<br>
                            ‚Ä¢ MATERIAL: $235K/month (29%)<br>
                            ‚Ä¢ MACHINE: $181K/month (22%)<br>
                            ‚Ä¢ METHOD: $245K/month (30%)<br><br>
                            <strong>Annual Impact:</strong> $9.9M savings<br>
                            <strong>Implementation Cost:</strong> $285K (one-time)<br>
                            <strong>Payback Period:</strong> 1.2 months<br>
                            <strong>3-Year NPV:</strong> $28.5M
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #00ff88;">$823K</div>
                                <div class="correlation-stat-label">Monthly</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #00ff88;">$9.9M</div>
                                <div class="correlation-stat-label">Annual</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value" style="color: #00ff88;">35x</div>
                                <div class="correlation-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Generate Executive Report</button>
                    </div>
                </div>
            </div>

            <!-- Supply Chain Intelligence Screen (GenIMS) -->
            <div id="supply-chain" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üöö Supply Chain Intelligence</h2>
                    <p class="screen-subtitle">End-to-end visibility from supplier to customer</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Supplier On-Time Delivery</div>
                        <div class="metric-value warning">87.5%</div>
                        <span class="metric-change negative">‚Üì -3.2%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Inventory Turnover</div>
                        <div class="metric-value good">8.4x</div>
                        <span class="metric-change positive">‚Üë +0.6x</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Customer OTIF</div>
                        <div class="metric-value warning">93.2%</div>
                        <span class="metric-change negative">‚Üì -1.8%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Material Stockouts (30 days)</div>
                        <div class="metric-value critical">8</div>
                        <span style="font-size: 0.875rem; color: #ff3366;">3 critical items</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Inventory Carrying Cost</div>
                        <div class="metric-value warning">$3.2M</div>
                        <span class="metric-change negative">‚Üë +8%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Supply Chain Cost Ratio</div>
                        <div class="metric-value info">12.4%</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">of revenue</span>
                    </div>
                </div>

                <h3 class="section-title">‚ö†Ô∏è Critical Supply Chain Issues</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Supplier S-123 Delays</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Issue:</strong> 10-day delivery delay on Part M-456<br>
                            <strong>Root Cause:</strong> Supplier capacity constraint + raw material shortage<br>
                            <strong>Impact:</strong> 5 work orders blocked, $450K revenue at risk<br>
                            <strong>Cascade Effect:</strong> 8 customer orders delayed
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">10d</div>
                                <div class="correlation-stat-label">Delay</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$450K</div>
                                <div class="correlation-stat-label">Revenue Risk</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8</div>
                                <div class="correlation-stat-label">Customers</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Find Alternative Suppliers</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Material Stockout Risk</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Part M-456:</strong> 15 days supply left, stockout in 23 days<br>
                            <strong>Demand Forecast:</strong> +45% surge due to Product X promotion<br>
                            <strong>Supplier Lead Time:</strong> 35 days<br>
                            <strong>Action Required:</strong> Order NOW or expedite
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">23d</div>
                                <div class="correlation-stat-label">Stockout</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">850</div>
                                <div class="correlation-stat-label">Units Left</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">35d</div>
                                <div class="correlation-stat-label">Lead Time</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Expedite Order</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Cross-Site Inventory Opportunity</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> Factory B has 1,200 units excess Part M-456<br>
                            <strong>Factory A:</strong> Facing shortage (850 units, 15 days)<br>
                            <strong>Transfer Cost:</strong> $1,200 (8-hour transit)<br>
                            <strong>vs Expedite:</strong> $15,000 air freight
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$13.8K</div>
                                <div class="correlation-stat-label">Savings</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8hr</div>
                                <div class="correlation-stat-label">Transit</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">1,200</div>
                                <div class="correlation-stat-label">Units</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Approve Transfer</button>
                    </div>
                </div>

                <h3 class="section-title">üìä Supplier Performance</h3>
                <div class="asset-grid">
                    <div class="asset-card" onclick="showSupplierDetail('S-123', 'Supplier S-123')">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">Supplier S-123</div>
                        <div class="asset-location">Critical Materials ‚Ä¢ $2.4M Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #ff3366;">82%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #ff3366;">1,500</div>
                                <div class="asset-metric-label">PPM</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showSupplierDetail('S-456', 'Supplier S-456')">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">Supplier S-456</div>
                        <div class="asset-location">Secondary Materials ‚Ä¢ $1.8M Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">96%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">350</div>
                                <div class="asset-metric-label">PPM</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showSupplierDetail('S-789', 'Supplier S-789')">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">Supplier S-789</div>
                        <div class="asset-location">Packaging ‚Ä¢ $980K Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">94%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">420</div>
                                <div class="asset-metric-label">PPM</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card" onclick="showSupplierDetail('S-234', 'Supplier S-234')">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">Supplier S-234</div>
                        <div class="asset-location">Raw Materials ‚Ä¢ $3.2M Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">98%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">280</div>
                                <div class="asset-metric-label">PPM</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">üéØ Customer Delivery Performance</h3>
                <div class="asset-grid">
                    <div class="asset-card">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">XYZ Corp</div>
                        <div class="asset-location">Strategic Account ‚Ä¢ $2.4M Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">96%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">8</div>
                                <div class="asset-metric-label">Orders</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">ABC Industries</div>
                        <div class="asset-location">Key Account ‚Ä¢ $1.8M Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #ffaa00;">92%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">5</div>
                                <div class="asset-metric-label">Orders</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card">
                        <div class="asset-icon">üè¢</div>
                        <div class="asset-name">DEF Manufacturing</div>
                        <div class="asset-location">Growing Account ‚Ä¢ $980K Annual</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #ff3366;">88%</div>
                                <div class="asset-metric-label">OTIF</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value">3</div>
                                <div class="asset-metric-label">Orders</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quality Management Screen (GenIMS) -->
            <div id="quality-management" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">‚úì Quality Management System</h2>
                    <p class="screen-subtitle">Total Quality Management across all operations</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Overall First Pass Yield</div>
                        <div class="metric-value good">96.8%</div>
                        <span class="metric-change positive">‚Üë +1.2%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Defect Rate (Network PPM)</div>
                        <div class="metric-value warning">850</div>
                        <span class="metric-change negative">‚Üë +15%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Customer Complaints (30d)</div>
                        <div class="metric-value info">12</div>
                        <span class="metric-change positive">‚Üì -3</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Scrap Cost (This Month)</div>
                        <div class="metric-value critical">$125K</div>
                        <span class="metric-change negative">‚Üë +18%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Rework Cost (This Month)</div>
                        <div class="metric-value warning">$68K</div>
                        <span class="metric-change negative">‚Üë +12%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Cost of Quality (COQ)</div>
                        <div class="metric-value warning">2.8%</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">of revenue</span>
                    </div>
                </div>

                <h3 class="section-title">üî¥ Critical Quality Issues</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div class="correlation-title">Line 3 Scrap Rate: 15%</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Normal Rate:</strong> 2% | <strong>Current:</strong> 15% (7.5x increase)<br>
                            <strong>Root Cause 1 (70%):</strong> Supplier S-123 material quality<br>
                            ‚Ä¢ Batch B-2024-156 dimensional variance<br>
                            ‚Ä¢ 8 work orders affected<br>
                            <strong>Root Cause 2 (30%):</strong> Operator certification expired<br>
                            ‚Ä¢ Operator E-456 expired 15 days ago<br>
                            ‚Ä¢ Setup errors on 3 recent jobs
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">15%</div>
                                <div class="correlation-stat-label">Scrap Rate</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$28K</div>
                                <div class="correlation-stat-label">Loss</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">125</div>
                                <div class="correlation-stat-label">Units</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                            <button class="btn btn-primary" style="flex: 1;">Quarantine Material</button>
                            <button class="btn btn-primary" style="flex: 1;">Recertify Operator</button>
                        </div>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Supplier S-123 Quality Declining</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Trend:</strong> PPM increased 3x in 60 days<br>
                            ‚Ä¢ Was: 500 PPM (acceptable)<br>
                            ‚Ä¢ Now: 1,500 PPM (unacceptable)<br>
                            <strong>Impact:</strong><br>
                            ‚Ä¢ $125K scrap and rework costs<br>
                            ‚Ä¢ 3 customer complaints traced to S-123 parts<br>
                            <strong>Root Cause at Supplier:</strong><br>
                            ‚Ä¢ New manufacturing facility (lower quality)<br>
                            ‚Ä¢ Process changes not communicated
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3x</div>
                                <div class="correlation-stat-label">PPM Increase</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$125K</div>
                                <div class="correlation-stat-label">Cost Impact</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8</div>
                                <div class="correlation-stat-label">WOs Affected</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                            <button class="btn btn-primary" style="flex: 1;">100% Inspection</button>
                            <button class="btn btn-primary" style="flex: 1;">Audit Supplier</button>
                        </div>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div class="correlation-title">Product XYZ-123 Customer Risk</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Issue:</strong> Batch BT-2024-089 marginal quality<br>
                            ‚Ä¢ Surface finish issues detected<br>
                            ‚Ä¢ 245 units shipped to 8 customers<br>
                            <strong>Prediction:</strong> 3-5 complaints expected in 30 days<br>
                            <strong>Proactive Action Required:</strong><br>
                            ‚Ä¢ Contact customers before they complain<br>
                            ‚Ä¢ Offer inspection or replacement<br>
                            ‚Ä¢ Prevent escalation to returns
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">245</div>
                                <div class="correlation-stat-label">Units</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">8</div>
                                <div class="correlation-stat-label">Customers</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3-5</div>
                                <div class="correlation-stat-label">Pred. Compl.</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                            <button class="btn btn-primary" style="flex: 1;">Contact Customers</button>
                            <button class="btn btn-primary" style="flex: 1;">Prep Replacements</button>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">üìã Open Non-Conformance Reports</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div>
                                <div class="correlation-title">NCR-2024-156</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Opened: Dec 17, 2024 ‚Ä¢ Age: 6 days</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Issue:</strong> Dimensional variance beyond tolerance<br>
                            <strong>Part:</strong> M-456 from Supplier S-123<br>
                            <strong>Quantity:</strong> 2,400 units quarantined<br>
                            <strong>Status:</strong> Root cause identified, CAPA in progress<br>
                            <strong>CAPA Actions:</strong><br>
                            ‚Ä¢ 100% incoming inspection implemented<br>
                            ‚Ä¢ Supplier audit scheduled Dec 23<br>
                            ‚Ä¢ Alternative supplier qualification started
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View CAPA Plan</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div>
                                <div class="correlation-title">NCR-2024-157</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Opened: Dec 20, 2024 ‚Ä¢ Age: 3 days</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Issue:</strong> Surface finish defects<br>
                            <strong>Product:</strong> XYZ-123 Batch BT-2024-089<br>
                            <strong>Quantity:</strong> 245 units affected<br>
                            <strong>Status:</strong> Investigating root cause<br>
                            <strong>Investigation Team:</strong><br>
                            ‚Ä¢ Quality Engineer: Sarah Chen<br>
                            ‚Ä¢ Process Engineer: Mike Kumar<br>
                            ‚Ä¢ 8D problem solving in progress
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View Investigation</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div>
                                <div class="correlation-title">NCR-2024-158</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">Opened: Dec 22, 2024 ‚Ä¢ Age: 1 day</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Issue:</strong> Weld porosity detected<br>
                            <strong>Line:</strong> Line 4 - Welding<br>
                            <strong>Quantity:</strong> 85 units suspect quality<br>
                            <strong>Status:</strong> Initial investigation started<br>
                            <strong>Immediate Actions:</strong><br>
                            ‚Ä¢ Production stopped on Line 4<br>
                            ‚Ä¢ 100% inspection of recent production<br>
                            ‚Ä¢ Welding parameters under review
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Assign Investigation</button>
                    </div>
                </div>
            </div>

            <!-- Project Management Screen (GenIMS) -->
            <div id="project-management" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üìä Project Management</h2>
                    <p class="screen-subtitle">Capital projects, process improvements, and resource allocation</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Active Projects</div>
                        <div class="metric-value info">18</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">12 on-track, 6 at-risk</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Project Budget</div>
                        <div class="metric-value info">$8.4M</div>
                        <span class="metric-change positive">82% utilized</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Projects On-Schedule</div>
                        <div class="metric-value warning">66.7%</div>
                        <span class="metric-change negative">‚Üì -8%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Resource Conflicts</div>
                        <div class="metric-value critical">8</div>
                        <span style="font-size: 0.875rem; color: #ff3366;">Immediate resolution</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Expected ROI</div>
                        <div class="metric-value good">3.2x</div>
                        <span style="font-size: 0.875rem; color: #00ff88;">Over 3 years</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Completion Rate</div>
                        <div class="metric-value good">89%</div>
                        <span class="metric-change positive">‚Üë +4%</span>
                    </div>
                </div>

                <h3 class="section-title">üö® Projects at Risk</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üî¥</div>
                            <div>
                                <div class="correlation-title">New Production Line Installation</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">CRITICAL - 3 weeks behind</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Budget:</strong> $2.4M | <strong>Spent:</strong> $1.8M (75%)<br>
                            <strong>Timeline:</strong> 6 months | <strong>Elapsed:</strong> 5 months<br>
                            <strong>Completion:</strong> 65% (should be 83%)<br>
                            <strong>Root Cause:</strong><br>
                            ‚Ä¢ Resource conflict: Electrical engineers needed for both project and BAU<br>
                            ‚Ä¢ Equipment delivery delayed 2 weeks<br>
                            ‚Ä¢ Vendor coordination issues
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">65%</div>
                                <div class="correlation-stat-label">Complete</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">-3wk</div>
                                <div class="correlation-stat-label">Behind</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$2.4M</div>
                                <div class="correlation-stat-label">Budget</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View Recovery Plan</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">ERP System Upgrade</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING - Resource constraints</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Budget:</strong> $1.2M | <strong>Spent:</strong> $680K (57%)<br>
                            <strong>Timeline:</strong> 8 months | <strong>Elapsed:</strong> 4 months<br>
                            <strong>Completion:</strong> 45% (should be 50%)<br>
                            <strong>Issues:</strong><br>
                            ‚Ä¢ IT resources shared with cyber security project<br>
                            ‚Ä¢ User acceptance testing delayed<br>
                            ‚Ä¢ Data migration complexity higher than expected
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45%</div>
                                <div class="correlation-stat-label">Complete</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">-1wk</div>
                                <div class="correlation-stat-label">Behind</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">$1.2M</div>
                                <div class="correlation-stat-label">Budget</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Resolve Resource Conflict</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üü°</div>
                            <div>
                                <div class="correlation-title">Quality System ISO Certification</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">WARNING - Documentation gaps</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Budget:</strong> $380K | <strong>Spent:</strong> $245K (64%)<br>
                            <strong>Timeline:</strong> 4 months | <strong>Elapsed:</strong> 3 months<br>
                            <strong>Audit Date:</strong> Jan 15, 2025 (3 weeks)<br>
                            <strong>Readiness:</strong> 78% (need 95%)<br>
                            <strong>Gaps:</strong><br>
                            ‚Ä¢ 12 procedures need final approval<br>
                            ‚Ä¢ Training records incomplete for 18 operators<br>
                            ‚Ä¢ Internal audit findings not closed
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">78%</div>
                                <div class="correlation-stat-label">Ready</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3wk</div>
                                <div class="correlation-stat-label">Until Audit</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">17%</div>
                                <div class="correlation-stat-label">Gap</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Accelerate Closure</button>
                    </div>
                </div>

                <h3 class="section-title">‚úÖ On-Track Projects</h3>
                <div class="asset-grid">
                    <div class="asset-card">
                        <div class="asset-icon">üìä</div>
                        <div class="asset-name">Lean Manufacturing Initiative</div>
                        <div class="asset-location">All Factories ‚Ä¢ $850K Budget</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">92%</div>
                                <div class="asset-metric-label">Complete</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">On-Time</div>
                                <div class="asset-metric-label">Status</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card">
                        <div class="asset-icon">üìä</div>
                        <div class="asset-name">Energy Efficiency Program</div>
                        <div class="asset-location">Factory A & C ‚Ä¢ $420K Budget</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">85%</div>
                                <div class="asset-metric-label">Complete</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">On-Time</div>
                                <div class="asset-metric-label">Status</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card">
                        <div class="asset-icon">üìä</div>
                        <div class="asset-name">Warehouse Automation</div>
                        <div class="asset-location">Factory D ‚Ä¢ $1.8M Budget</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">58%</div>
                                <div class="asset-metric-label">Complete</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">On-Time</div>
                                <div class="asset-metric-label">Status</div>
                            </div>
                        </div>
                    </div>

                    <div class="asset-card">
                        <div class="asset-icon">üìä</div>
                        <div class="asset-name">Operator Training Program</div>
                        <div class="asset-location">Network-Wide ‚Ä¢ $280K Budget</div>
                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">74%</div>
                                <div class="asset-metric-label">Complete</div>
                            </div>
                            <div class="asset-metric">
                                <div class="asset-metric-value" style="color: #00ff88;">On-Time</div>
                                <div class="asset-metric-label">Status</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compliance & Audit Screen (GenIMS) -->
            <div id="compliance-audit" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üìã Compliance & Audit Management</h2>
                    <p class="screen-subtitle">Regulatory compliance, certifications, and audit readiness</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Active Certifications</div>
                        <div class="metric-value good">12</div>
                        <span style="font-size: 0.875rem; color: #00ff88;">All current</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Audit Compliance Score</div>
                        <div class="metric-value warning">87%</div>
                        <span style="font-size: 0.875rem; color: #ffaa00;">Target: 95%</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Open Findings</div>
                        <div class="metric-value critical">23</div>
                        <span style="font-size: 0.875rem; color: #ff3366;">8 overdue</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Regulatory Compliance</div>
                        <div class="metric-value good">98%</div>
                        <span class="metric-change positive">No violations</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Internal Audits (YTD)</div>
                        <div class="metric-value info">45</div>
                        <span style="font-size: 0.875rem; color: #8b92b0;">Completed</span>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Upcoming Audits</div>
                        <div class="metric-value warning">5</div>
                        <span style="font-size: 0.875rem; color: #ffaa00;">Next 60 days</span>
                    </div>
                </div>

                <h3 class="section-title">üìú Certification Status</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚úì</div>
                            <div>
                                <div class="correlation-title">ISO 9001:2015</div>
                                <div style="font-size: 0.875rem; color: #00ff88;">CERTIFIED - Valid</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Status:</strong> Active and compliant<br>
                            <strong>Certificate Date:</strong> Mar 15, 2023<br>
                            <strong>Expiry Date:</strong> Mar 15, 2026<br>
                            <strong>Next Surveillance Audit:</strong> Jan 15, 2025 (3 weeks)<br>
                            <strong>Readiness:</strong> 78% (documentation gaps)<br>
                            <strong>Scope:</strong> All 5 factories
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">78%</div>
                                <div class="correlation-stat-label">Readiness</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3wk</div>
                                <div class="correlation-stat-label">Until Audit</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">12</div>
                                <div class="correlation-stat-label">Open Items</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View Readiness Checklist</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚úì</div>
                            <div>
                                <div class="correlation-title">IATF 16949:2016</div>
                                <div style="font-size: 0.875rem; color: #00ff88;">CERTIFIED - Valid</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Status:</strong> Active and compliant<br>
                            <strong>Certificate Date:</strong> Aug 10, 2023<br>
                            <strong>Expiry Date:</strong> Aug 10, 2026<br>
                            <strong>Next Audit:</strong> Apr 20, 2025 (4 months)<br>
                            <strong>Readiness:</strong> 92% (on-track)<br>
                            <strong>Scope:</strong> Factory A, C, D (Automotive)
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">92%</div>
                                <div class="correlation-stat-label">Readiness</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">4mo</div>
                                <div class="correlation-stat-label">Until Audit</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3</div>
                                <div class="correlation-stat-label">Open Items</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">View Certificate</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚ö†Ô∏è</div>
                            <div>
                                <div class="correlation-title">ISO 14001:2015</div>
                                <div style="font-size: 0.875rem; color: #ffaa00;">EXPIRING - Action needed</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Status:</strong> Expiring in 45 days<br>
                            <strong>Certificate Date:</strong> Feb 8, 2022<br>
                            <strong>Expiry Date:</strong> Feb 8, 2025 (45 days)<br>
                            <strong>Recertification Audit:</strong> Jan 18, 2025 (4 weeks)<br>
                            <strong>Readiness:</strong> 65% (significant gaps)<br>
                            <strong>Scope:</strong> All factories
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">65%</div>
                                <div class="correlation-stat-label">Readiness</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">45d</div>
                                <div class="correlation-stat-label">Expiring</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">18</div>
                                <div class="correlation-stat-label">Open Items</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Accelerate Preparation</button>
                    </div>
                </div>

                <h3 class="section-title">üî¥ Overdue Audit Findings</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div>
                                <div class="correlation-title">Finding #2024-QA-012</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">OVERDUE - 18 days late</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Audit:</strong> ISO 9001 Internal Audit (Q3 2024)<br>
                            <strong>Category:</strong> Corrective Action<br>
                            <strong>Issue:</strong> Calibration records incomplete for 12 measuring instruments<br>
                            <strong>Due Date:</strong> Dec 5, 2024<br>
                            <strong>Status:</strong> 18 days overdue<br>
                            <strong>Assigned:</strong> Quality Manager - Factory B<br>
                            <strong>Impact:</strong> Certificate at risk if not closed before surveillance audit
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Escalate & Close</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div>
                                <div class="correlation-title">Finding #2024-ENV-008</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">OVERDUE - 12 days late</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Audit:</strong> ISO 14001 Internal Audit (Q4 2024)<br>
                            <strong>Category:</strong> Preventive Action<br>
                            <strong>Issue:</strong> Waste segregation procedures not followed in Factory C<br>
                            <strong>Due Date:</strong> Dec 11, 2024<br>
                            <strong>Status:</strong> 12 days overdue<br>
                            <strong>Assigned:</strong> EHS Manager - Factory C<br>
                            <strong>Impact:</strong> Regulatory compliance risk
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Escalate & Close</button>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div>
                                <div class="correlation-title">Finding #2024-IATF-015</div>
                                <div style="font-size: 0.875rem; color: #ff3366;">OVERDUE - 8 days late</div>
                            </div>
                        </div>
                        <div class="correlation-description">
                            <strong>Audit:</strong> IATF 16949 Customer Audit (Nov 2024)<br>
                            <strong>Category:</strong> Major Non-Conformance<br>
                            <strong>Issue:</strong> PPAP documentation incomplete for 3 new parts<br>
                            <strong>Due Date:</strong> Dec 15, 2024<br>
                            <strong>Status:</strong> 8 days overdue<br>
                            <strong>Assigned:</strong> Quality Engineer - Factory A<br>
                            <strong>Impact:</strong> Customer may stop orders
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Escalate & Close</button>
                    </div>
                </div>

                <h3 class="section-title">üìä Compliance Correlation Analysis</h3>
                <div class="correlation-grid">
                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Audit Findings ‚Üî Production Issues</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> 82% of ISO audit non-conformances originate from 3 specific work centers<br>
                            ‚Ä¢ Work Center 1 (Line 3): 45% of findings<br>
                            ‚Ä¢ Work Center 2 (Line 5): 28% of findings<br>
                            ‚Ä¢ Work Center 3 (Line 7): 9% of findings<br>
                            <strong>Root Cause:</strong> These same work centers also have highest quality issues<br>
                            <strong>Correlation:</strong> Process control gaps = quality issues = audit findings
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">82%</div>
                                <div class="correlation-stat-label">Concentration</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">3</div>
                                <div class="correlation-stat-label">Work Centers</div>
                            </div>
                        </div>
                    </div>

                    <div class="correlation-card">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîó</div>
                            <div class="correlation-title">Training ‚Üî Compliance</div>
                        </div>
                        <div class="correlation-description">
                            <strong>Discovery:</strong> 75% of audit findings relate to expired training or certifications<br>
                            ‚Ä¢ 12 operators with expired certifications<br>
                            ‚Ä¢ Same operators linked to quality issues<br>
                            ‚Ä¢ Same operators mentioned in audit findings<br>
                            <strong>Impact:</strong> Training gaps create compliance, quality, and production issues simultaneously
                        </div>
                        <div class="correlation-stats">
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">75%</div>
                                <div class="correlation-stat-label">Training Related</div>
                            </div>
                            <div class="correlation-stat">
                                <div class="correlation-stat-value">12</div>
                                <div class="correlation-stat-label">Expired Certs</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Database Inventory Screen -->
            <div id="database-inventory" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üíæ Database Inventory</h2>
                    <p class="screen-subtitle">Complete GenIMS database architecture: 14 modules, 298 tables supporting end-to-end manufacturing operations</p>
                </div>

                <!-- Summary Metrics -->
                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 217, 255, 0.05));">
                        <div class="metric-label">Total Databases</div>
                        <div class="metric-value">14</div>
                        <div class="metric-trend" style="color: #00d9ff;">Modules</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05));">
                        <div class="metric-label">Total Tables</div>
                        <div class="metric-value">298</div>
                        <div class="metric-trend" style="color: #00ff88;">Tables</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.2), rgba(255, 170, 0, 0.05));">
                        <div class="metric-label">Data Sources</div>
                        <div class="metric-value">14</div>
                        <div class="metric-trend" style="color: #ffaa00;">Integrated</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(138, 43, 226, 0.05));">
                        <div class="metric-label">Business Functions</div>
                        <div class="metric-value">50+</div>
                        <div class="metric-trend" style="color: #8a2be2;">Supported</div>
                    </div>
                </div>

                <!-- Database Inventory Table -->
                <div class="detail-section">
                    <h3>üìä Complete Database Inventory</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">#</th>
                                <th style="width: 20%;">Database Module</th>
                                <th style="width: 10%;">Tables</th>
                                <th style="width: 35%;">Business Functions</th>
                                <th style="width: 30%;">Key Processes Supported</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>1</strong></td>
                                <td><strong>Master Data</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">15</span></td>
                                <td>Reference Data Management, Organizational Hierarchy</td>
                                <td>Companies, Factories, Warehouses, Suppliers, Customers, Materials, Products, BOMs, Employees, Departments</td>
                            </tr>
                            <tr>
                                <td><strong>2</strong></td>
                                <td><strong>HCM</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">23</span></td>
                                <td>Human Capital Management, Workforce Planning</td>
                                <td>Attendance, Leave, Payroll, Performance, Recruitment, Training, Skills, Certifications, Succession Planning</td>
                            </tr>
                            <tr>
                                <td><strong>3</strong></td>
                                <td><strong>Procurement</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">21</span></td>
                                <td>Strategic Sourcing, Supplier Management</td>
                                <td>RFQs, Purchase Orders, Supplier Contracts, Performance Evaluation, Incoterms, Payment Terms, Receiving</td>
                            </tr>
                            <tr>
                                <td><strong>4</strong></td>
                                <td><strong>MRP</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">15</span></td>
                                <td>Material Requirements Planning, Demand Management</td>
                                <td>Demand Forecasting, MRP Runs, Planned Orders, Safety Stock, Lead Times, Supply-Demand Matching</td>
                            </tr>
                            <tr>
                                <td><strong>5</strong></td>
                                <td><strong>Production Scheduling</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">12</span></td>
                                <td>Advanced Planning & Scheduling, Capacity Planning</td>
                                <td>Production Schedules, Capacity Analysis, Resource Allocation, Sequence Optimization, Constraint Management</td>
                            </tr>
                            <tr>
                                <td><strong>6</strong></td>
                                <td><strong>MES</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">30</span></td>
                                <td>Manufacturing Execution, Shop Floor Control</td>
                                <td>Work Orders, Production Tracking, Downtime, Scrap, Labor Tracking, Machine Status, OEE, Real-time Visibility</td>
                            </tr>
                            <tr>
                                <td><strong>7</strong></td>
                                <td><strong>Maintenance Management</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">18</span></td>
                                <td>Asset Reliability, Preventive/Predictive Maintenance</td>
                                <td>Work Orders, PM Schedules, Breakdown Tracking, Spare Parts, MTBF/MTTR, Condition Monitoring, CBM</td>
                            </tr>
                            <tr>
                                <td><strong>8</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">30</span></td>
                                <td>Warehouse Management, Inventory Control</td>
                                <td>Stock Levels, Transactions, Cycle Counts, Putaway, Picking, Packing, Shipping, Receiving, ABC Analysis</td>
                            </tr>
                            <tr>
                                <td><strong>9</strong></td>
                                <td><strong>TMS</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">21</span></td>
                                <td>Transportation Management, Logistics Optimization</td>
                                <td>Shipment Planning, Carrier Selection, Route Optimization, Freight Audit, Track & Trace, Delivery Performance</td>
                            </tr>
                            <tr>
                                <td><strong>10</strong></td>
                                <td><strong>Sales & CRM</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">24</span></td>
                                <td>Customer Relationship, Order Management</td>
                                <td>Leads, Opportunities, Quotes, Sales Orders, Order Fulfillment, Customer Service, Contracts, Pricing</td>
                            </tr>
                            <tr>
                                <td><strong>11</strong></td>
                                <td><strong>Finance & Accounting</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">28</span></td>
                                <td>Financial Management, Cost Accounting</td>
                                <td>GL, AP, AR, Bank Reconciliation, Cost Centers, Standard Costing, Variance Analysis, Financial Reporting</td>
                            </tr>
                            <tr>
                                <td><strong>12</strong></td>
                                <td><strong>Supply Chain Analytics</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">10</span></td>
                                <td>Supply Chain Intelligence, Predictive Analytics</td>
                                <td>Supplier Risk, Demand Sensing, Inventory Optimization, Lead Time Variability, Fill Rate, OTIF Analytics</td>
                            </tr>
                            <tr>
                                <td><strong>13</strong></td>
                                <td><strong>Business Intelligence</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">8</span></td>
                                <td>Executive Dashboards, KPI Management</td>
                                <td>OEE, OTIF, Inventory Turns, Cost Variance, Quality Metrics, Supplier Performance, Financial KPIs</td>
                            </tr>
                            <tr style="background: rgba(0, 217, 255, 0.1);">
                                <td><strong>14</strong></td>
                                <td><strong>QMS</strong></td>
                                <td style="text-align: center;"><span style="color: #00d9ff; font-weight: bold;">30</span></td>
                                <td>Quality Management, Compliance & Audit</td>
                                <td>NCR, CAPA, Audits, Control Plans, SPC, Calibration, Document Control, Customer Complaints, PPAP, FMEA</td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.1); font-weight: bold;">
                                <td colspan="2" style="text-align: right;"><strong>TOTAL:</strong></td>
                                <td style="text-align: center;"><strong style="color: #00ff88; font-size: 1.2rem;">298</strong></td>
                                <td colspan="2" style="color: #00ff88;">Complete end-to-end manufacturing & business operations</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Database Categories -->
                <div class="correlation-grid" style="margin-top: 2rem;">
                    <div class="correlation-card" style="border-left-color: #00d9ff;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üèóÔ∏è</div>
                            <div class="correlation-title">Core Operations (6 DBs)</div>
                        </div>
                        <div class="correlation-description">
                            Master Data, MRP, Production Scheduling, MES, Maintenance, Inventory/WMS
                            <br><strong style="color: #00d9ff;">141 tables</strong> supporting manufacturing execution
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #00ff88;">
                        <div class="correlation-header">
                            <div class="correlation-icon">ü§ù</div>
                            <div class="correlation-title">External Integration (3 DBs)</div>
                        </div>
                        <div class="correlation-description">
                            Procurement, Sales/CRM, TMS
                            <br><strong style="color: #00ff88;">66 tables</strong> managing supplier & customer interactions
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #ffaa00;">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚úÖ</div>
                            <div class="correlation-title">Quality & Compliance (1 DB)</div>
                        </div>
                        <div class="correlation-description">
                            QMS
                            <br><strong style="color: #ffaa00;">30 tables</strong> ensuring quality & regulatory compliance
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #8a2be2;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üíº</div>
                            <div class="correlation-title">Business Functions (4 DBs)</div>
                        </div>
                        <div class="correlation-description">
                            HCM, Finance/Accounting, Supply Chain Analytics, BI
                            <br><strong style="color: #8a2be2;">69 tables</strong> for workforce, finance & analytics
                        </div>
                    </div>
                </div>
            </div>

            <!-- Value Stream Mapping Screen -->
            <div id="value-stream-mapping" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîÑ Value Stream Mapping</h2>
                    <p class="screen-subtitle">How GenIMS databases power each component of your value stream - complete mapping of all 17 components</p>
                </div>

                <!-- Summary Cards -->
                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 217, 255, 0.05));">
                        <div class="metric-label">Value Stream Components</div>
                        <div class="metric-value">17</div>
                        <div class="metric-trend" style="color: #00d9ff;">Fully Mapped</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05));">
                        <div class="metric-label">Database Integrations</div>
                        <div class="metric-value">42</div>
                        <div class="metric-trend" style="color: #00ff88;">Active Links</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.2), rgba(255, 170, 0, 0.05));">
                        <div class="metric-label">Real-Time Sync</div>
                        <div class="metric-value">100%</div>
                        <div class="metric-trend" style="color: #ffaa00;">Coverage</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(138, 43, 226, 0.05));">
                        <div class="metric-label">Data Flow Points</div>
                        <div class="metric-value">298</div>
                        <div class="metric-trend" style="color: #8a2be2;">Tables Active</div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üìä Complete Database-to-Value Stream Component Mapping</h3>
                    <p style="color: #8b92b0; margin-bottom: 1.5rem;">Each value stream component is powered by specific databases. This table shows primary databases (main data source), supporting databases (supplementary data), and the number of tables involved.</p>

                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">#</th>
                                <th style="width: 20%;">Value Stream Component</th>
                                <th style="width: 25%;">Primary Databases</th>
                                <th style="width: 30%;">Supporting Databases</th>
                                <th style="width: 10%;">Total Tables</th>
                                <th style="width: 10%;">Integration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- UPSTREAM: Customer to Procurement -->
                            <tr style="background: rgba(0, 217, 255, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #00d9ff; padding: 0.75rem;">‚ñ∂ UPSTREAM FLOW: Customer ‚Üí Procurement</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td><strong>üë• Customer / CRM</strong></td>
                                <td><strong style="color: #00d9ff;">Sales & CRM</strong> (24 tables)</td>
                                <td>Master Data (Customers), Finance (AR/Invoicing), TMS (Delivery), QMS (Complaints)</td>
                                <td style="text-align: center;"><strong>32</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><strong>üìä Sales & Planning</strong></td>
                                <td><strong style="color: #00d9ff;">MRP</strong> (15 tables), <strong style="color: #00d9ff;">Production Scheduling</strong> (12 tables)</td>
                                <td>Sales & CRM (Orders), Master Data (Products/BOMs), Supply Chain Analytics (Forecasting)</td>
                                <td style="text-align: center;"><strong>37</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><strong>üè¢ Suppliers / Procurement</strong></td>
                                <td><strong style="color: #00d9ff;">Procurement</strong> (21 tables)</td>
                                <td>Master Data (Suppliers/Materials), Finance (AP/Payments), QMS (Supplier Quality), MRP (Requirements)</td>
                                <td style="text-align: center;"><strong>36</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td><strong>üöö Inbound Logistics</strong></td>
                                <td><strong style="color: #00d9ff;">TMS</strong> (21 tables)</td>
                                <td>Procurement (POs), Inventory & WMS (Receiving), Master Data (Suppliers/Locations)</td>
                                <td style="text-align: center;"><strong>36</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td><strong>üì¶ WMS Raw Materials</strong></td>
                                <td><strong style="color: #00d9ff;">Inventory & WMS</strong> (30 tables - Raw Materials Zone)</td>
                                <td>Master Data (Materials/Locations), MRP (Requirements), Finance (Valuation), QMS (Incoming Inspection)</td>
                                <td style="text-align: center;"><strong>43</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>

                            <!-- CORE: Production Operations -->
                            <tr style="background: rgba(255, 51, 102, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #ff3366; padding: 0.75rem;">‚ñ∂ CORE OPERATIONS: Planning ‚Üí Production ‚Üí Quality</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td><strong>üìÖ Production Planning</strong></td>
                                <td><strong style="color: #00d9ff;">Production Scheduling</strong> (12 tables), <strong style="color: #00d9ff;">MRP</strong> (15 tables)</td>
                                <td>Master Data (Products/BOMs), MES (Capacity), Inventory (Availability), Maintenance (Equipment Status)</td>
                                <td style="text-align: center;"><strong>45</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr style="background: rgba(255, 51, 102, 0.1);">
                                <td>7</td>
                                <td><strong>üè≠ Production Lines</strong></td>
                                <td><strong style="color: #ff3366;">MES</strong> (30 tables - complete shop floor control)</td>
                                <td>Production Scheduling (Work Orders), Master Data (Products/BOMs), QMS (Inspections), Inventory (Material Issues), HCM (Labor), Maintenance (Equipment)</td>
                                <td style="text-align: center;"><strong>88</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td><strong>‚öôÔ∏è Assets & Machines</strong></td>
                                <td><strong style="color: #00d9ff;">Maintenance Management</strong> (18 tables)</td>
                                <td>MES (Machine Status/Utilization), Master Data (Equipment Registry), Finance (Asset Accounting)</td>
                                <td style="text-align: center;"><strong>33</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td><strong>üîß Maintenance / CMMS</strong></td>
                                <td><strong style="color: #00d9ff;">Maintenance Management</strong> (18 tables)</td>
                                <td>MES (Downtime Events), Master Data (Equipment/Parts), Finance (Maintenance Costs), Inventory (Spare Parts)</td>
                                <td style="text-align: center;"><strong>48</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>10</td>
                                <td><strong>‚úì Quality Control</strong></td>
                                <td><strong style="color: #ffaa00;">QMS</strong> (30 tables - complete quality system)</td>
                                <td>MES (Production/Inspection Data), Procurement (Supplier Quality), Sales & CRM (Complaints), Master Data (Specs/Standards)</td>
                                <td style="text-align: center;"><strong>58</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>

                            <!-- DOWNSTREAM: Warehouse to Customer -->
                            <tr style="background: rgba(0, 255, 136, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #00ff88; padding: 0.75rem;">‚ñ∂ DOWNSTREAM FLOW: Warehouse ‚Üí Delivery ‚Üí Customer</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td><strong>üì¶ WMS Finished Goods</strong></td>
                                <td><strong style="color: #00d9ff;">Inventory & WMS</strong> (30 tables - Finished Goods Zone)</td>
                                <td>MES (Production Output), Sales & CRM (Order Fulfillment), Master Data (Products/Locations), Finance (Inventory Valuation)</td>
                                <td style="text-align: center;"><strong>45</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td><strong>üöõ Outbound Logistics</strong></td>
                                <td><strong style="color: #00d9ff;">TMS</strong> (21 tables)</td>
                                <td>Sales & CRM (Customer Orders), Inventory & WMS (Pick/Pack/Ship), Finance (Freight Costs)</td>
                                <td style="text-align: center;"><strong>36</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td><strong>‚úì Customer Delivery</strong></td>
                                <td><strong style="color: #00d9ff;">TMS</strong> (21 tables), <strong style="color: #00d9ff;">Sales & CRM</strong> (24 tables)</td>
                                <td>Inventory & WMS (Shipment Details), Finance (POD/Invoicing), QMS (Delivery Quality)</td>
                                <td style="text-align: center;"><strong>60</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td><strong>üí¨ Customer Service</strong></td>
                                <td><strong style="color: #00d9ff;">Sales & CRM</strong> (24 tables - Service/Support Module)</td>
                                <td>QMS (Complaint Management), Master Data (Customer Info), TMS (Delivery Tracking), Finance (Credits/Refunds)</td>
                                <td style="text-align: center;"><strong>43</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>

                            <!-- SUPPORT FUNCTIONS -->
                            <tr style="background: rgba(138, 43, 226, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #8a2be2; padding: 0.75rem;">‚ñ∂ SUPPORT FUNCTIONS: Cross-Cutting Systems</td>
                            </tr>
                            <tr style="background: rgba(0, 217, 255, 0.1);">
                                <td>15</td>
                                <td><strong>üíæ ERP System</strong></td>
                                <td><strong style="color: #00d9ff;">Finance & Accounting</strong> (28 tables)</td>
                                <td><strong>ALL 13 DATABASES</strong> integrate for: GL, AP, AR, Cost Accounting, Financial Reporting, Asset Accounting</td>
                                <td style="text-align: center;"><strong>298</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td><strong>üë• HR / HCM</strong></td>
                                <td><strong style="color: #00d9ff;">HCM</strong> (23 tables)</td>
                                <td>Master Data (Employees/Departments), MES (Labor Tracking), Finance (Payroll), QMS (Training/Certifications)</td>
                                <td style="text-align: center;"><strong>38</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>
                            <tr>
                                <td>17</td>
                                <td><strong>üí∞ Finance</strong></td>
                                <td><strong style="color: #00d9ff;">Finance & Accounting</strong> (28 tables)</td>
                                <td><strong>ALL TRANSACTIONAL DATABASES</strong> feed financial data: Revenue, Costs, Assets, Liabilities, Cash Flow</td>
                                <td style="text-align: center;"><strong>298</strong></td>
                                <td><span style="color: #00ff88; font-size: 1.2rem;">‚úì</span></td>
                            </tr>

                            <tr style="background: rgba(0, 255, 136, 0.15); font-weight: bold;">
                                <td colspan="4" style="text-align: right; color: #00ff88;">TOTAL INTEGRATION POINTS:</td>
                                <td style="text-align: center; color: #00ff88; font-size: 1.2rem;">298</td>
                                <td style="text-align: center;"><span style="color: #00ff88; font-size: 1.5rem;">‚úì</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Visual Data Flow -->
                <div class="detail-section" style="margin-top: 2rem;">
                    <h3>üîÑ Visual Data Flow Architecture</h3>
                    <div style="background: rgba(0, 217, 255, 0.05); padding: 2rem; border-radius: 12px; border: 2px solid rgba(0, 217, 255, 0.2);">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-bottom: 2rem;">
                            <!-- Upstream -->
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                                <h4 style="color: #00d9ff; margin-bottom: 1rem;">üì• UPSTREAM</h4>
                                <div style="color: #8b92b0; line-height: 1.8;">
                                    <strong>1. Customer/CRM</strong> (Sales & CRM)<br>
                                    ‚Üì<br>
                                    <strong>2. Sales Planning</strong> (MRP + Scheduling)<br>
                                    ‚Üì<br>
                                    <strong>3. Suppliers</strong> (Procurement)<br>
                                    ‚Üì<br>
                                    <strong>4. Inbound</strong> (TMS)<br>
                                    ‚Üì<br>
                                    <strong>5. WMS Raw</strong> (Inventory)<br>
                                </div>
                                <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.3); border-radius: 6px;">
                                    <strong style="color: #00ff88;">5 Components</strong><br>
                                    <span style="color: #8b92b0;">184 tables integrated</span>
                                </div>
                            </div>

                            <!-- Core -->
                            <div style="background: rgba(255, 51, 102, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ff3366;">
                                <h4 style="color: #ff3366; margin-bottom: 1rem;">‚öôÔ∏è CORE OPERATIONS</h4>
                                <div style="color: #8b92b0; line-height: 1.8;">
                                    <strong>6. Production Planning</strong> (Scheduling)<br>
                                    ‚Üì<br>
                                    <strong>7. Production Lines</strong> (MES) ‚≠ê<br>
                                    ‚Üï<br>
                                    <strong>8. Assets/Machines</strong> (Maintenance)<br>
                                    ‚Üï<br>
                                    <strong>9. Maintenance</strong> (CMMS)<br>
                                    ‚Üï<br>
                                    <strong>10. Quality Control</strong> (QMS)<br>
                                </div>
                                <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.3); border-radius: 6px;">
                                    <strong style="color: #00ff88;">5 Components</strong><br>
                                    <span style="color: #8b92b0;">272 tables integrated</span>
                                </div>
                            </div>

                            <!-- Downstream -->
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00ff88;">
                                <h4 style="color: #00ff88; margin-bottom: 1rem;">üì§ DOWNSTREAM</h4>
                                <div style="color: #8b92b0; line-height: 1.8;">
                                    <strong>11. WMS Finished</strong> (Inventory)<br>
                                    ‚Üì<br>
                                    <strong>12. Outbound</strong> (TMS)<br>
                                    ‚Üì<br>
                                    <strong>13. Customer Delivery</strong> (TMS + CRM)<br>
                                    ‚Üì<br>
                                    <strong>14. Customer Service</strong> (Sales & CRM)<br>
                                </div>
                                <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.3); border-radius: 6px;">
                                    <strong style="color: #00ff88;">4 Components</strong><br>
                                    <span style="color: #8b92b0;">184 tables integrated</span>
                                </div>
                            </div>
                        </div>

                        <!-- Support Layer -->
                        <div style="background: rgba(138, 43, 226, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #8a2be2;">
                            <h4 style="color: #8a2be2; margin-bottom: 1rem;">üîß SUPPORT LAYER (Cross-Cutting)</h4>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                                <div style="text-align: center;">
                                    <strong style="color: #00d9ff;">15. ERP System</strong><br>
                                    <span style="color: #8b92b0;">Finance (28 tables)</span><br>
                                    <span style="color: #00ff88;">‚Üí ALL 298 tables</span>
                                </div>
                                <div style="text-align: center;">
                                    <strong style="color: #00d9ff;">16. HR/HCM</strong><br>
                                    <span style="color: #8b92b0;">HCM (23 tables)</span><br>
                                    <span style="color: #00ff88;">‚Üí 38 tables</span>
                                </div>
                                <div style="text-align: center;">
                                    <strong style="color: #00d9ff;">17. Finance</strong><br>
                                    <span style="color: #8b92b0;">Finance (28 tables)</span><br>
                                    <span style="color: #00ff88;">‚Üí ALL 298 tables</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Integration Summary Cards -->
                <div class="correlation-grid" style="margin-top: 2rem;">
                    <div class="correlation-card" style="border-left-color: #00d9ff;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üìä</div>
                            <div class="correlation-title">Upstream Integration</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #00d9ff;">Customer ‚Üí Raw Materials</strong>
                            <br><br>
                            5 components powered by:<br>
                            ‚Ä¢ Sales & CRM (24 tables)<br>
                            ‚Ä¢ MRP (15 tables)<br>
                            ‚Ä¢ Production Scheduling (12 tables)<br>
                            ‚Ä¢ Procurement (21 tables)<br>
                            ‚Ä¢ TMS (21 tables)<br>
                            ‚Ä¢ Inventory & WMS (30 tables)
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #ff3366;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üè≠</div>
                            <div class="correlation-title">Core Operations</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #ff3366;">Manufacturing Execution</strong>
                            <br><br>
                            5 components powered by:<br>
                            ‚Ä¢ <strong>MES (30 tables)</strong> - Central hub<br>
                            ‚Ä¢ Maintenance (18 tables)<br>
                            ‚Ä¢ QMS (30 tables)<br>
                            ‚Ä¢ Production Scheduling (12 tables)<br>
                            ‚Ä¢ Inventory & WMS integration
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #00ff88;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üì¶</div>
                            <div class="correlation-title">Downstream Fulfillment</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #00ff88;">Finished Goods ‚Üí Customer</strong>
                            <br><br>
                            4 components powered by:<br>
                            ‚Ä¢ Inventory & WMS (30 tables)<br>
                            ‚Ä¢ TMS (21 tables)<br>
                            ‚Ä¢ Sales & CRM (24 tables)<br>
                            ‚Ä¢ QMS (complaint management)
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #8a2be2;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîß</div>
                            <div class="correlation-title">Support Functions</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #8a2be2;">Enterprise-Wide Systems</strong>
                            <br><br>
                            3 components integrating across ALL:<br>
                            ‚Ä¢ Finance & Accounting (28 tables)<br>
                            ‚Ä¢ HCM (23 tables)<br>
                            ‚Ä¢ Business Intelligence (8 tables)<br>
                            ‚Ä¢ Supply Chain Analytics (10 tables)
                        </div>
                    </div>
                </div>
            </div>

            <!-- Database Relationships Screen -->
            <div id="database-relationships" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîó Database Relationships</h2>
                    <p class="screen-subtitle">Complete database relationship diagram showing how GenIMS databases connect and share data in real-time</p>
                </div>

                <!-- Summary Metrics -->
                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 217, 255, 0.05));">
                        <div class="metric-label">Total Relationships</div>
                        <div class="metric-value">32</div>
                        <div class="metric-trend" style="color: #00d9ff;">Integration Points</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05));">
                        <div class="metric-label">Real-Time Links</div>
                        <div class="metric-value">100%</div>
                        <div class="metric-trend" style="color: #00ff88;">Active</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.2), rgba(255, 170, 0, 0.05));">
                        <div class="metric-label">Master Data Hub</div>
                        <div class="metric-value">13</div>
                        <div class="metric-trend" style="color: #ffaa00;">Connections</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(138, 43, 226, 0.05));">
                        <div class="metric-label">Bidirectional Sync</div>
                        <div class="metric-value">6</div>
                        <div class="metric-trend" style="color: #8a2be2;">Active</div>
                    </div>
                </div>

                <!-- Visual Relationship Diagram -->
                <div class="detail-section">
                    <h3>üéØ Visual Database Relationship Diagram</h3>
                    
                    <div style="background: rgba(0, 217, 255, 0.05); padding: 2rem; border-radius: 12px; border: 2px solid rgba(0, 217, 255, 0.2); margin-bottom: 2rem;">
                        <!-- Master Data Hub (Center) -->
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="display: inline-block; background: linear-gradient(135deg, rgba(255, 170, 0, 0.3), rgba(255, 170, 0, 0.1)); padding: 1.5rem 3rem; border-radius: 12px; border: 3px solid #ffaa00;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #ffaa00;">üèóÔ∏è MASTER DATA</div>
                                <div style="color: #8b92b0; margin-top: 0.5rem;">15 tables ¬∑ Central Hub</div>
                                <div style="color: #00ff88; font-weight: bold; margin-top: 0.5rem;">‚Üí 13 Database Connections ‚Üí</div>
                            </div>
                        </div>

                        <!-- Layer 1: Operational Databases -->
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üìä MRP</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">15 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Materials, BOMs</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üè¢ Procurement</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">21 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Suppliers</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üíº Sales/CRM</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">24 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Customers</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üë• HCM</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">23 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Employees</div>
                            </div>
                        </div>

                        <!-- Layer 2: Core Manufacturing -->
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 2rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üìÖ Scheduling</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">12 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Products</div>
                            </div>
                            <div style="background: rgba(255, 51, 102, 0.2); padding: 1rem; border-radius: 8px; border: 3px solid #ff3366; text-align: center;">
                                <div style="font-weight: bold; color: #ff3366; margin-bottom: 0.5rem; font-size: 1.2rem;">üè≠ MES</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">30 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚≠ê Central Hub</div>
                            </div>
                            <div style="background: rgba(255, 170, 0, 0.2); padding: 1rem; border-radius: 8px; border: 2px solid #ffaa00; text-align: center;">
                                <div style="font-weight: bold; color: #ffaa00; margin-bottom: 0.5rem;">‚úì QMS</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">30 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Bidirectional</div>
                            </div>
                        </div>

                        <!-- Layer 3: Support Systems -->
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üì¶ Inventory</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">30 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Locations</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üöö TMS</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">21 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Locations</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid #00d9ff; text-align: center;">
                                <div style="font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">üîß Maintenance</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">18 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üï Receives: Equipment</div>
                            </div>
                            <div style="background: rgba(138, 43, 226, 0.2); padding: 1rem; border-radius: 8px; border: 2px solid #8a2be2; text-align: center;">
                                <div style="font-weight: bold; color: #8a2be2; margin-bottom: 0.5rem;">üí∞ Finance</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">28 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üê Aggregator</div>
                            </div>
                        </div>

                        <!-- Bottom: Analytics Layer -->
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div style="background: rgba(138, 43, 226, 0.15); padding: 1rem; border-radius: 8px; border: 2px solid #8a2be2; text-align: center;">
                                <div style="font-weight: bold; color: #8a2be2; margin-bottom: 0.5rem;">üìä Supply Chain Analytics</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">10 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üê Consumes ALL Data</div>
                            </div>
                            <div style="background: rgba(138, 43, 226, 0.15); padding: 1rem; border-radius: 8px; border: 2px solid #8a2be2; text-align: center;">
                                <div style="font-weight: bold; color: #8a2be2; margin-bottom: 0.5rem;">üìà Business Intelligence</div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">8 tables</div>
                                <div style="font-size: 0.75rem; color: #00ff88; margin-top: 0.5rem;">‚Üê Consumes ALL Data</div>
                            </div>
                        </div>

                        <!-- Legend -->
                        <div style="margin-top: 2rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                            <strong style="color: #00d9ff;">Legend:</strong>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-top: 0.5rem; color: #8b92b0; font-size: 0.875rem;">
                                <div>‚Üï <span style="color: #00ff88;">Bidirectional</span></div>
                                <div>‚Üí <span style="color: #00d9ff;">One Direction</span></div>
                                <div>‚Üê <span style="color: #8a2be2;">Aggregation</span></div>
                                <div>‚≠ê <span style="color: #ff3366;">Critical Hub</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Complete Relationships Table -->
                <div class="detail-section">
                    <h3>üìã Complete Database Relationship Catalog</h3>
                    
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">#</th>
                                <th style="width: 20%;">Source Database</th>
                                <th style="width: 20%;">Target Database</th>
                                <th style="width: 35%;">Data Shared / Relationship</th>
                                <th style="width: 12%;">Type</th>
                                <th style="width: 8%;">Frequency</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Master Data Hub Relationships -->
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td colspan="6" style="font-weight: bold; color: #ffaa00; padding: 0.75rem;">üèóÔ∏è MASTER DATA HUB (1:Many Relationships)</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td><strong>Master Data</strong></td>
                                <td><strong>ALL 13 Databases</strong></td>
                                <td>Reference Data: Companies, Factories, Warehouses, Suppliers, Customers, Materials, Products, BOMs, Employees, Departments</td>
                                <td><span style="color: #00d9ff; font-weight: bold;">1:Many Hub</span></td>
                                <td><span style="color: #8b92b0;">On-Demand</span></td>
                            </tr>

                            <!-- Planning & Procurement Flow -->
                            <tr style="background: rgba(0, 217, 255, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #00d9ff; padding: 0.75rem;">üìä PLANNING & PROCUREMENT FLOW</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><strong>Sales & CRM</strong></td>
                                <td><strong>MRP</strong></td>
                                <td>Sales Orders ‚Üí Demand Forecast ‚Üí Material Requirements</td>
                                <td><span style="color: #00ff88;">Trigger</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><strong>MRP</strong></td>
                                <td><strong>Procurement</strong></td>
                                <td>Planned Orders ‚Üí Purchase Requisitions ‚Üí RFQs</td>
                                <td><span style="color: #00ff88;">Trigger</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td><strong>MRP</strong></td>
                                <td><strong>Production Scheduling</strong></td>
                                <td>Production Requirements ‚Üí Capacity Planning ‚Üí Schedule Generation</td>
                                <td><span style="color: #00ff88;">Cascade</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td><strong>Production Scheduling</strong></td>
                                <td><strong>MES</strong></td>
                                <td>Work Orders, Production Plans, Routing, Material Requirements</td>
                                <td><span style="color: #00ff88;">Trigger</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td><strong>Procurement</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td>Purchase Orders ‚Üí Goods Receipt ‚Üí Put-away ‚Üí Stock Update</td>
                                <td><span style="color: #00ff88;">Trigger</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>

                            <!-- Production Core (Bidirectional) -->
                            <tr style="background: rgba(255, 51, 102, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #ff3366; padding: 0.75rem;">üè≠ PRODUCTION CORE (Bidirectional Integration)</td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>7</td>
                                <td><strong>MES</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td>Material Consumption (WO issues) ‚Üî Production Output (finished goods receipt) ‚Üî WIP Tracking</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>8</td>
                                <td><strong>MES</strong></td>
                                <td><strong>QMS</strong></td>
                                <td>Production Data (lots, batches) ‚Üî Quality Inspections ‚Üî NCRs ‚Üî Control Plan Results</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>9</td>
                                <td><strong>MES</strong></td>
                                <td><strong>Maintenance</strong></td>
                                <td>Machine Status & Utilization ‚Üî Downtime Events ‚Üî Breakdown Reports ‚Üî PM Schedules</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>10</td>
                                <td><strong>MES</strong></td>
                                <td><strong>HCM</strong></td>
                                <td>Labor Hours & Attendance ‚Üî Operator Performance ‚Üî Skill Validation ‚Üî Training Records</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>11</td>
                                <td><strong>MES</strong></td>
                                <td><strong>Production Scheduling</strong></td>
                                <td>Actual Production Progress ‚Üî Schedule Adjustments ‚Üî Capacity Feedback ‚Üî Delays</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>12</td>
                                <td><strong>Maintenance</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td>Spare Parts Consumption ‚Üî Stock Availability ‚Üî Reorder Triggers ‚Üî Emergency Procurement</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>

                            <!-- Quality & Compliance -->
                            <tr style="background: rgba(255, 170, 0, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #ffaa00; padding: 0.75rem;">‚úì QUALITY & COMPLIANCE INTEGRATION</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td><strong>Procurement</strong></td>
                                <td><strong>QMS</strong></td>
                                <td>Supplier Quality Metrics, Incoming Inspection Results, Supplier Audits, CAPA tracking</td>
                                <td><span style="color: #ffaa00;">Bidirectional</span></td>
                                <td><span style="color: #8b92b0;">Daily</span></td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td><strong>QMS</strong></td>
                                <td><strong>Sales & CRM</strong></td>
                                <td>Customer Complaints ‚Üí 8D Reports ‚Üí CAPA ‚Üí Return Material Authorization (RMA)</td>
                                <td><span style="color: #ffaa00;">Bidirectional</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>15</td>
                                <td><strong>QMS</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td>Quality Hold Status, Quarantine Locations, Rejected Material Disposition, Rework Orders</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>

                            <!-- Fulfillment Flow -->
                            <tr style="background: rgba(0, 255, 136, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #00ff88; padding: 0.75rem;">üì¶ FULFILLMENT & LOGISTICS FLOW</td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td><strong>Sales & CRM</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td>Sales Orders ‚Üí Picking Tasks ‚Üí Packing ‚Üí Shipping Documents ‚Üí Stock Deduction</td>
                                <td><span style="color: #00ff88;">Trigger</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>17</td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td><strong>TMS</strong></td>
                                <td>Shipment Details, Packing Lists, Delivery Address, Special Instructions ‚Üí Carrier Assignment</td>
                                <td><span style="color: #00ff88;">Trigger</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>18</td>
                                <td><strong>TMS</strong></td>
                                <td><strong>Sales & CRM</strong></td>
                                <td>Delivery Confirmation, POD (Proof of Delivery), Tracking Updates, Delivery Exceptions</td>
                                <td><span style="color: #00ff88;">Callback</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>19</td>
                                <td><strong>TMS</strong></td>
                                <td><strong>Procurement</strong></td>
                                <td>Inbound Shipments, ASN (Advanced Shipping Notice), Carrier Performance, Freight Costs</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>

                            <!-- Financial Integration -->
                            <tr style="background: rgba(138, 43, 226, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #8a2be2; padding: 0.75rem;">üí∞ FINANCIAL INTEGRATION (Many:1 Aggregation)</td>
                            </tr>
                            <tr>
                                <td>20</td>
                                <td><strong>Sales & CRM</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Sales Orders ‚Üí Invoicing ‚Üí Accounts Receivable ‚Üí Revenue Recognition ‚Üí Cash Application</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>21</td>
                                <td><strong>Procurement</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Purchase Orders ‚Üí Vendor Invoices ‚Üí Accounts Payable ‚Üí Payment Processing ‚Üí Cash Management</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>22</td>
                                <td><strong>MES</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Work Order Costs (Material + Labor + Overhead) ‚Üí Cost of Goods Manufactured ‚Üí WIP Valuation</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #8b92b0;">Daily</span></td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Inventory Valuation, Stock Movements ‚Üí COGS, Inventory Asset Account, Write-offs</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>24</td>
                                <td><strong>Maintenance</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Maintenance Costs (Labor + Parts + Contractor) ‚Üí Operating Expenses ‚Üí Asset Depreciation</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #8b92b0;">Weekly</span></td>
                            </tr>
                            <tr>
                                <td>25</td>
                                <td><strong>HCM</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Payroll Processing ‚Üí Labor Costs ‚Üí Benefits Administration ‚Üí Tax Withholding</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #8b92b0;">Bi-weekly</span></td>
                            </tr>
                            <tr>
                                <td>26</td>
                                <td><strong>TMS</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Freight Costs, Carrier Invoices ‚Üí Transportation Expenses ‚Üí Cost Allocation</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #8b92b0;">Weekly</span></td>
                            </tr>
                            <tr>
                                <td>27</td>
                                <td><strong>QMS</strong></td>
                                <td><strong>Finance</strong></td>
                                <td>Cost of Quality: Scrap, Rework, Returns, Warranty Claims ‚Üí Quality Cost Tracking</td>
                                <td><span style="color: #00d9ff;">1:Many</span></td>
                                <td><span style="color: #8b92b0;">Weekly</span></td>
                            </tr>

                            <!-- Analytics & Intelligence -->
                            <tr style="background: rgba(138, 43, 226, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #8a2be2; padding: 0.75rem;">üìä ANALYTICS & INTELLIGENCE (Data Consumers)</td>
                            </tr>
                            <tr>
                                <td>28</td>
                                <td><strong>ALL 13 Databases</strong></td>
                                <td><strong>Supply Chain Analytics</strong></td>
                                <td>Supplier Risk, Demand Forecasting Models, Inventory Optimization, Lead Time Variability, ML Training Data</td>
                                <td><span style="color: #8a2be2;">Many:1 Consumer</span></td>
                                <td><span style="color: #8b92b0;">Batch/Hourly</span></td>
                            </tr>
                            <tr>
                                <td>29</td>
                                <td><strong>ALL 13 Databases</strong></td>
                                <td><strong>Business Intelligence</strong></td>
                                <td>KPIs, Dashboards, Reports: OEE, OTIF, Inventory Turns, Quality Metrics, Financial Performance</td>
                                <td><span style="color: #8a2be2;">Many:1 Consumer</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>

                            <!-- Cross-Database Workflows -->
                            <tr style="background: rgba(0, 217, 255, 0.05);">
                                <td colspan="6" style="font-weight: bold; color: #00d9ff; padding: 0.75rem;">üîÑ CROSS-DATABASE WORKFLOWS</td>
                            </tr>
                            <tr>
                                <td>30</td>
                                <td><strong>MRP</strong></td>
                                <td><strong>Inventory & WMS</strong></td>
                                <td>Stock Availability Check ‚Üí Material Reservations ‚Üí Allocation ‚Üí Shortage Alerts</td>
                                <td><span style="color: #00d9ff;">Query/Check</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr>
                                <td>31</td>
                                <td><strong>Production Scheduling</strong></td>
                                <td><strong>Maintenance</strong></td>
                                <td>Machine Availability Check ‚Üí PM Schedule Coordination ‚Üí Downtime Planning</td>
                                <td><span style="color: #00d9ff;">Query/Check</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.15);">
                                <td>32</td>
                                <td><strong>Sales & CRM</strong></td>
                                <td><strong>Production Scheduling</strong></td>
                                <td>Available-to-Promise (ATP) Check ‚Üí Order Confirmation ‚Üí Delivery Date Commitment</td>
                                <td><span style="color: #00d9ff;">Query/Check</span></td>
                                <td><span style="color: #00ff88;">Real-time</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Integration Pattern Summary -->
                <div class="correlation-grid" style="margin-top: 2rem;">
                    <div class="correlation-card" style="border-left-color: #00d9ff;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîÑ</div>
                            <div class="correlation-title">Integration Patterns</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #ffaa00;">1:Many Hub:</strong> Master Data ‚Üí 13 databases (1 relationship)<br>
                            <strong style="color: #00ff88;">Event Triggers:</strong> Sales, MRP, Scheduling ‚Üí Downstream (9 relationships)<br>
                            <strong style="color: #ffaa00;">Bidirectional Sync:</strong> MES ‚Üî Core Systems (7 relationships)<br>
                            <strong style="color: #00d9ff;">Financial Feed:</strong> All ‚Üí Finance (7 relationships)<br>
                            <strong style="color: #8a2be2;">Analytics Consumer:</strong> All ‚Üí BI/Analytics (2 relationships)<br>
                            <strong style="color: #00d9ff;">Query/Check:</strong> Real-time availability (6 relationships)
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #ff3366;">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚≠ê</div>
                            <div class="correlation-title">Critical Integration Hubs</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #ffaa00;">Master Data:</strong> 13 downstream connections (100% coverage)<br>
                            <strong style="color: #ff3366;">MES:</strong> 7 bidirectional + 3 downstream (10 total connections)<br>
                            <strong style="color: #8a2be2;">Finance:</strong> 7 upstream aggregation feeds<br>
                            <strong style="color: #00d9ff;">Inventory & WMS:</strong> 8 bidirectional connections<br>
                            <strong style="color: #00ff88;">Sales & CRM:</strong> 5 upstream + 2 downstream (7 connections)
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #00ff88;">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚ö°</div>
                            <div class="correlation-title">Real-Time Integration</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #00ff88;">Real-time Sync:</strong> 25 of 32 relationships (78%)<br>
                            <strong style="color: #00d9ff;">Daily/Weekly Batch:</strong> 5 relationships (16%)<br>
                            <strong style="color: #8b92b0;">On-Demand Query:</strong> 2 relationships (6%)<br>
                            <br>
                            <strong>Average Latency:</strong> Sub-second for transactional data<br>
                            <strong>Data Freshness:</strong> < 1 minute for operational decisions
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #8a2be2;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üéØ</div>
                            <div class="correlation-title">Data Integrity & Consistency</div>
                        </div>
                        <div class="correlation-description">
                            <strong>ACID Compliance:</strong> All transactional operations<br>
                            <strong>Foreign Keys:</strong> 298 tables fully normalized<br>
                            <strong>Real-time Triggers:</strong> Event-driven propagation<br>
                            <strong>Audit Trails:</strong> Complete change history<br>
                            <strong>Referential Integrity:</strong> Enforced at DB level<br>
                            <strong>Rollback Support:</strong> Transaction safety guaranteed
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data & Integration Health Screen -->
            <div id="integration-health" class="screen">
                <div class="screen-header">
                    <h2 class="screen-title">üîó Data & Integration Health</h2>
                    <p class="screen-subtitle">Real-time monitoring of all database integrations, connector health, sync status, and data quality across GenIMS platform</p>
                </div>

                <!-- Overall Health Metrics -->
                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05));">
                        <div class="metric-label">Overall Health Score</div>
                        <div class="metric-value">94%</div>
                        <div class="metric-trend" style="color: #00ff88;">‚¨Ü Excellent</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 217, 255, 0.05));">
                        <div class="metric-label">Active Integrations</div>
                        <div class="metric-value">30/32</div>
                        <div class="metric-trend" style="color: #00d9ff;">Online</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.2), rgba(255, 170, 0, 0.05));">
                        <div class="metric-label">Sync Status</div>
                        <div class="metric-value">2</div>
                        <div class="metric-trend" style="color: #ffaa00;">‚ö† Warnings</div>
                    </div>
                    <div class="metric-card" style="background: linear-gradient(135deg, rgba(255, 51, 102, 0.2), rgba(255, 51, 102, 0.05));">
                        <div class="metric-label">Critical Issues</div>
                        <div class="metric-value">0</div>
                        <div class="metric-trend" style="color: #00ff88;">‚úì None</div>
                    </div>
                </div>

                <!-- Quick Status Overview -->
                <div class="detail-section" style="margin-bottom: 2rem;">
                    <h3>üìä Integration Status Overview</h3>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00ff88; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #00ff88; margin-bottom: 0.5rem;">28</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">Healthy Connections</div>
                            <div style="color: #00ff88; font-size: 0.75rem; margin-top: 0.5rem;">< 100ms latency</div>
                        </div>
                        <div style="background: rgba(255, 170, 0, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffaa00; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #ffaa00; margin-bottom: 0.5rem;">2</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">Warning State</div>
                            <div style="color: #ffaa00; font-size: 0.75rem; margin-top: 0.5rem;">Elevated latency</div>
                        </div>
                        <div style="background: rgba(255, 51, 102, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ff3366; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #ff3366; margin-bottom: 0.5rem;">0</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">Critical/Failed</div>
                            <div style="color: #00ff88; font-size: 0.75rem; margin-top: 0.5rem;">All operational</div>
                        </div>
                        <div style="background: rgba(138, 43, 226, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #8a2be2; text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #8a2be2; margin-bottom: 0.5rem;">6</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">Recommended</div>
                            <div style="color: #8a2be2; font-size: 0.75rem; margin-top: 0.5rem;">Optional enhancements</div>
                        </div>
                    </div>
                </div>

                <!-- Integration Health Summary Table (Top 10 by importance) -->
                <div class="detail-section">
                    <h3>üîó Critical Integration Health Status</h3>
                    <p style="color: #8b92b0; margin-bottom: 1.5rem;">Real-time monitoring of top 10 most critical integration points (showing representative sample - full list of all 32 integrations available on demand)</p>
                    
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">#</th>
                                <th style="width: 20%;">Integration</th>
                                <th style="width: 25%;">Data Flow</th>
                                <th style="width: 10%;">Status</th>
                                <th style="width: 10%;">Latency</th>
                                <th style="width: 10%;">Quality</th>
                                <th style="width: 20%;">Issues/Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td><strong>Master Data Hub</strong></td>
                                <td>Master ‚Üí ALL 13 DBs</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">12ms</span></td>
                                <td><span style="color: #00ff88;">100%</span></td>
                                <td style="color: #8b92b0;">Optimal performance</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><strong>MES ‚Üî Inventory</strong></td>
                                <td>Material Consumption & Output</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">78ms</span></td>
                                <td><span style="color: #00ff88;">99.5%</span></td>
                                <td style="color: #8b92b0;">Bidirectional sync OK</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><strong>MES ‚Üî QMS</strong></td>
                                <td>Production Data & Inspections</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">92ms</span></td>
                                <td><span style="color: #00ff88;">99.9%</span></td>
                                <td style="color: #8b92b0;">Quality data flowing</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td><strong>CRM ‚Üí MRP</strong></td>
                                <td>Sales Orders ‚Üí Demand</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">45ms</span></td>
                                <td><span style="color: #00ff88;">99.8%</span></td>
                                <td style="color: #8b92b0;">Real-time sync active</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td><strong>MRP ‚Üí Procurement</strong></td>
                                <td>Planned Orders ‚Üí PRs</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">38ms</span></td>
                                <td><span style="color: #00ff88;">100%</span></td>
                                <td style="color: #8b92b0;">Auto-triggering works</td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>6</td>
                                <td><strong>Procurement ‚Üí Inventory</strong></td>
                                <td>POs ‚Üí Goods Receipt</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">‚ö† WARNING</span></td>
                                <td><span style="color: #ffaa00;">285ms</span></td>
                                <td><span style="color: #ffaa00;">97.2%</span></td>
                                <td style="color: #ffaa00;">Elevated latency detected</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td><strong>CRM ‚Üí Inventory</strong></td>
                                <td>Sales Orders ‚Üí Picking</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">65ms</span></td>
                                <td><span style="color: #00ff88;">99.7%</span></td>
                                <td style="color: #8b92b0;">Order flow optimal</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td><strong>CRM ‚Üí Finance</strong></td>
                                <td>Sales & Accounts Receivable</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">85ms</span></td>
                                <td><span style="color: #00ff88;">100%</span></td>
                                <td style="color: #8b92b0;">Revenue recognition OK</td>
                            </tr>
                            <tr style="background: rgba(255, 170, 0, 0.1);">
                                <td>9</td>
                                <td><strong>Maintenance ‚Üî Inventory</strong></td>
                                <td>Spare Parts Consumption</td>
                                <td><span style="color: #ffaa00; font-weight: bold;">‚ö† WARNING</span></td>
                                <td><span style="color: #ffaa00;">312ms</span></td>
                                <td><span style="color: #ffaa00;">96.8%</span></td>
                                <td style="color: #ffaa00;">Network latency spike</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td><strong>ALL ‚Üí BI</strong></td>
                                <td>KPIs & Real-time Dashboards</td>
                                <td><span style="color: #00ff88; font-weight: bold;">‚óè HEALTHY</span></td>
                                <td><span style="color: #00ff88;">95ms</span></td>
                                <td><span style="color: #00ff88;">100%</span></td>
                                <td style="color: #8b92b0;">Dashboards updating live</td>
                            </tr>
                            <tr style="background: rgba(0, 217, 255, 0.1); font-weight: bold;">
                                <td colspan="7" style="text-align: center; color: #00d9ff; padding: 0.75rem;">
                                    ‚úì Showing top 10 critical integrations - All 32 integration points monitored | Full details available on demand
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Missing/Recommended Integrations -->
                <div class="detail-section" style="margin-top: 2rem;">
                    <h3>üí° Recommended Additional Integrations</h3>
                    <p style="color: #8b92b0; margin-bottom: 1.5rem;">Optional data sources that can enhance system capabilities and provide additional insights for better decision-making</p>
                    
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">#</th>
                                <th style="width: 25%;">Recommended Integration</th>
                                <th style="width: 40%;">Benefits & Business Value</th>
                                <th style="width: 15%;">Priority</th>
                                <th style="width: 15%;">Estimated Effort</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: rgba(138, 43, 226, 0.1);">
                                <td>1</td>
                                <td><strong>üìä Market Intelligence Feed</strong></td>
                                <td>External market data, commodity prices, demand trends ‚Üí Improve forecasting accuracy by 15-20%</td>
                                <td><span style="color: #8a2be2; font-weight: bold;">HIGH</span></td>
                                <td><span style="color: #8b92b0;">2-3 weeks</span></td>
                            </tr>
                            <tr style="background: rgba(138, 43, 226, 0.1);">
                                <td>2</td>
                                <td><strong>üåê Supplier Portal Integration</strong></td>
                                <td>Real-time supplier inventory visibility, collaborative planning, ASN automation ‚Üí Reduce lead times by 30%</td>
                                <td><span style="color: #8a2be2; font-weight: bold;">HIGH</span></td>
                                <td><span style="color: #8b92b0;">3-4 weeks</span></td>
                            </tr>
                            <tr style="background: rgba(0, 217, 255, 0.1);">
                                <td>3</td>
                                <td><strong>üì± IoT Sensor Data Stream</strong></td>
                                <td>Direct machine sensor feeds for real-time condition monitoring ‚Üí Increase predictive maintenance accuracy to 95%</td>
                                <td><span style="color: #00d9ff; font-weight: bold;">MEDIUM</span></td>
                                <td><span style="color: #8b92b0;">4-6 weeks</span></td>
                            </tr>
                            <tr style="background: rgba(0, 217, 255, 0.1);">
                                <td>4</td>
                                <td><strong>üè¶ Bank Transaction Feed</strong></td>
                                <td>Automated bank reconciliation, real-time cash position, payment status ‚Üí Save 20 hours/month in reconciliation</td>
                                <td><span style="color: #00d9ff; font-weight: bold;">MEDIUM</span></td>
                                <td><span style="color: #8b92b0;">2 weeks</span></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td><strong>üìß Email System Integration</strong></td>
                                <td>Automated notifications, document distribution, alert management ‚Üí Improve response time by 50%</td>
                                <td><span style="color: #8b92b0; font-weight: bold;">LOW</span></td>
                                <td><span style="color: #8b92b0;">1 week</span></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td><strong>‚òÅÔ∏è Weather Data API</strong></td>
                                <td>Supply chain risk assessment, logistics planning, demand pattern analysis ‚Üí Better risk mitigation</td>
                                <td><span style="color: #8b92b0; font-weight: bold;">LOW</span></td>
                                <td><span style="color: #8b92b0;">1 week</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Action Items & Summary Cards -->
                <div class="correlation-grid" style="margin-top: 2rem;">
                    <div class="correlation-card" style="border-left-color: #ffaa00;">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚ö†Ô∏è</div>
                            <div class="correlation-title">Current Warnings (2)</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #ffaa00;">1. Procurement ‚Üí Inventory</strong><br>
                            Latency: 285ms (threshold: 150ms)<br>
                            <strong>Action:</strong> Check network connection quality<br>
                            <strong>ETA:</strong> Fix within 2 hours<br>
                            <br>
                            <strong style="color: #ffaa00;">2. Maintenance ‚Üî Inventory</strong><br>
                            Latency: 312ms, Quality: 96.8%<br>
                            <strong>Action:</strong> Review spare parts sync process<br>
                            <strong>ETA:</strong> Optimize today
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #00ff88;">
                        <div class="correlation-header">
                            <div class="correlation-icon">‚úÖ</div>
                            <div class="correlation-title">System Health Summary</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #00ff88;">Overall: 94% - Excellent</strong><br>
                            <br>
                            ‚Ä¢ 28/32 integrations optimal (87.5%)<br>
                            ‚Ä¢ Avg latency: 98ms (target: <150ms) ‚úì<br>
                            ‚Ä¢ Avg data quality: 99.3% ‚úì<br>
                            ‚Ä¢ Zero critical failures (30 days)<br>
                            ‚Ä¢ All core workflows operational<br>
                            ‚Ä¢ 99.7% uptime (monthly SLA: 99.5%)
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #00d9ff;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üîÑ</div>
                            <div class="correlation-title">Sync Performance</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #00d9ff;">Real-Time Integration Status</strong><br>
                            <br>
                            ‚Ä¢ 25 real-time connections active<br>
                            ‚Ä¢ 5 batch jobs on schedule<br>
                            ‚Ä¢ 2 query/check endpoints healthy<br>
                            ‚Ä¢ 0 failed sync attempts (24h)<br>
                            ‚Ä¢ 99.7% uptime (30 days)<br>
                            ‚Ä¢ Last incident: 18 days ago
                        </div>
                    </div>

                    <div class="correlation-card" style="border-left-color: #8a2be2;">
                        <div class="correlation-header">
                            <div class="correlation-icon">üìà</div>
                            <div class="correlation-title">Recommended Actions</div>
                        </div>
                        <div class="correlation-description">
                            <strong style="color: #8a2be2;">Optimization Opportunities</strong><br>
                            <br>
                            1. Add 2 HIGH priority integrations<br>
                            2. Implement query result caching<br>
                            3. Enable connection pooling<br>
                            4. Set up redundant data paths<br>
                            5. Deploy proactive monitoring alerts<br>
                            6. Schedule quarterly health audits
                        </div>
                    </div>
                </div>

                <!-- Data Quality Metrics -->
                <div class="detail-section" style="margin-top: 2rem;">
                    <h3>üìä Data Quality & Completeness Analysis</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                        <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00ff88;">
                            <div style="font-weight: bold; color: #00ff88; margin-bottom: 1rem; font-size: 1.1rem;">Master Data Completeness</div>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 0.5rem; color: #8b92b0; font-size: 0.875rem;">
                                <div>Companies:</div><div style="color: #00ff88; font-weight: bold;">100%</div>
                                <div>Factories:</div><div style="color: #00ff88; font-weight: bold;">100%</div>
                                <div>Suppliers:</div><div style="color: #00ff88; font-weight: bold;">98.5%</div>
                                <div>Customers:</div><div style="color: #00ff88; font-weight: bold;">99.2%</div>
                                <div>Materials:</div><div style="color: #00ff88; font-weight: bold;">100%</div>
                                <div>Products:</div><div style="color: #00ff88; font-weight: bold;">100%</div>
                                <div>BOMs:</div><div style="color: #00ff88; font-weight: bold;">99.8%</div>
                            </div>
                        </div>

                        <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                            <div style="font-weight: bold; color: #00d9ff; margin-bottom: 1rem; font-size: 1.1rem;">Transactional Data Quality</div>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 0.5rem; color: #8b92b0; font-size: 0.875rem;">
                                <div>Sales Orders:</div><div style="color: #00ff88; font-weight: bold;">99.9%</div>
                                <div>Purchase Orders:</div><div style="color: #00ff88; font-weight: bold;">99.7%</div>
                                <div>Work Orders:</div><div style="color: #00ff88; font-weight: bold;">100%</div>
                                <div>Invoices:</div><div style="color: #00ff88; font-weight: bold;">99.8%</div>
                                <div>Inventory Trans:</div><div style="color: #00ff88; font-weight: bold;">99.5%</div>
                                <div>Quality Records:</div><div style="color: #00ff88; font-weight: bold;">100%</div>
                                <div>Shipments:</div><div style="color: #00ff88; font-weight: bold;">99.3%</div>
                            </div>
                        </div>

                        <div style="background: rgba(255, 170, 0, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffaa00;">
                            <div style="font-weight: bold; color: #ffaa00; margin-bottom: 1rem; font-size: 1.1rem;">Data Validation Status</div>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 0.5rem; color: #8b92b0; font-size: 0.875rem;">
                                <div>Foreign Keys:</div><div style="color: #00ff88; font-weight: bold;">Valid</div>
                                <div>Null Checks:</div><div style="color: #00ff88; font-weight: bold;">Pass</div>
                                <div>Data Types:</div><div style="color: #00ff88; font-weight: bold;">Pass</div>
                                <div>Constraints:</div><div style="color: #00ff88; font-weight: bold;">Pass</div>
                                <div>Duplicates:</div><div style="color: #00ff88; font-weight: bold;">None</div>
                                <div>Orphan Records:</div><div style="color: #ffaa00; font-weight: bold;">3 found</div>
                                <div>Last Audit:</div><div style="color: #8b92b0;">2 hours ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Drill-Down Modal for Second/Third Level Pages -->
    <div id="drill-down-modal" class="drill-down-modal">
        <div class="drill-down-content" id="drill-down-content">
            <!-- Dynamic content will be inserted here -->
        </div>
    </div>

    <script>
        // Navigation Functions
        function toggleSubmenu(section) {
            const submenu = document.getElementById(`submenu-${section}`);
            const navMain = document.querySelector(`#submenu-${section}`).previousElementSibling;
            const arrow = navMain ? navMain.querySelector('.nav-arrow') : null;
            
            if (submenu) {
                submenu.classList.toggle('show');
            }
            if (arrow) {
                arrow.classList.toggle('expanded');
            }
        }

        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Show selected screen
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }
            
            // Update active menu item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Update breadcrumb
            const screenTitles = {
                'factory-overview': 'GenOEE ‚Ä¢ Factory Overview',
                'live-operations': 'GenOEE ‚Ä¢ Live Operations Monitor',
                'predictive-analytics': 'GenOEE ‚Ä¢ Predictive Analytics',
                'quality-intelligence': 'GenOEE ‚Ä¢ Quality Intelligence',
                'asset-performance': 'GenOEE ‚Ä¢ Asset Performance',
                'correlation-engine': 'GenIMS ‚Ä¢ Correlation Engine',
                'asset-management': 'GenIMS ‚Ä¢ Asset Management',
                'resource-optimization': 'GenIMS ‚Ä¢ Resource Optimization',
                'supply-chain': 'GenIMS ‚Ä¢ Supply Chain Intelligence',
                'quality-management': 'GenIMS ‚Ä¢ Quality Management',
                'project-management': 'GenIMS ‚Ä¢ Project Management',
                'compliance-audit': 'GenIMS ‚Ä¢ Compliance & Audit',
                'database-inventory': 'Data Center ‚Ä¢ Database Inventory',
                'value-stream-mapping': 'Data Center ‚Ä¢ Value Stream Mapping',
                'database-relationships': 'Data Center ‚Ä¢ Database Relationships',
                'integration-health': 'Data Center ‚Ä¢ Data & Integration Health',
                'dashboard': 'Command Center ‚Ä¢ Alerts & Warnings',
                'value-stream': 'Command Center ‚Ä¢ Value Stream Dashboard',
                'what-if': 'Command Center ‚Ä¢ What-If Analysis',
                'multidimensional-search': 'Command Center ‚Ä¢ Multidimensional Analysis'
            };
            
            document.getElementById('breadcrumb-text').innerHTML = screenTitles[screenId] || screenId;
        }

        // Factory Selector
        function switchFactory() {
            const factory = document.getElementById('factory-selector').value;
            alert(`Switching to: ${factory}\n\nView will update to show data for selected factory.`);
        }

        // Factory Popup
        function showFactoryPopup(factoryId, marker) {
            const popup = document.getElementById('factory-popup');
            const rect = marker.getBoundingClientRect();
            const container = document.getElementById('factory-map').getBoundingClientRect();
            
            const factories = {
                'pune': {
                    name: 'Factory A - Pune',
                    location: 'Pune, Maharashtra',
                    status: 'Healthy',
                    statusClass: 'healthy',
                    oee: '89%',
                    lines: '8 / 8',
                    output: '2,450 units/day',
                    issues: 'Minor material delay on Line 5'
                },
                'mumbai': {
                    name: 'Factory B - Mumbai',
                    location: 'Mumbai, Maharashtra',
                    status: 'Warning',
                    statusClass: 'warning',
                    oee: '76%',
                    lines: '5 / 6',
                    output: '1,890 units/day',
                    issues: 'Warehouse at 85% capacity'
                },
                'delhi': {
                    name: 'Factory C - Delhi',
                    location: 'Delhi, NCR',
                    status: 'Critical',
                    statusClass: 'critical',
                    oee: '65%',
                    lines: '6 / 8',
                    output: '1,650 units/day',
                    issues: 'Line 3 down, quality issues'
                },
                'chennai': {
                    name: 'Factory D - Chennai',
                    location: 'Chennai, Tamil Nadu',
                    status: 'Healthy',
                    statusClass: 'healthy',
                    oee: '88%',
                    lines: '6 / 6',
                    output: '1,980 units/day',
                    issues: 'All systems normal'
                },
                'bangalore': {
                    name: 'Factory E - Bangalore',
                    location: 'Bangalore, Karnataka',
                    status: 'Healthy',
                    statusClass: 'healthy',
                    oee: '92%',
                    lines: '4 / 4',
                    output: '1,450 units/day',
                    issues: 'Exceeding targets'
                }
            };
            
            const factory = factories[factoryId];
            
            popup.innerHTML = `
                <div class="popup-header">
                    <div class="popup-title">${factory.name}</div>
                    <button class="close-popup" onclick="closeFactoryPopup()">‚úï</button>
                </div>
                <div style="color: #8b92b0; margin-bottom: 1rem;">${factory.location}</div>
                <div class="popup-status ${factory.statusClass}">${factory.status}</div>
                <div class="popup-metrics">
                    <div class="popup-metric">
                        <div class="popup-metric-value">${factory.oee}</div>
                        <div class="popup-metric-label">OEE</div>
                    </div>
                    <div class="popup-metric">
                        <div class="popup-metric-value">${factory.lines}</div>
                        <div class="popup-metric-label">Lines Active</div>
                    </div>
                    <div class="popup-metric">
                        <div class="popup-metric-value">${factory.output}</div>
                        <div class="popup-metric-label">Output</div>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.3); border-radius: 6px; font-size: 0.875rem;">
                    <strong>Status:</strong> ${factory.issues}
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="alert('Switching to ${factory.name}...')">
                    View Factory Details
                </button>
            `;
            
            popup.style.left = (rect.left - container.left + 70) + 'px';
            popup.style.top = (rect.top - container.top - 20) + 'px';
            popup.classList.add('show');
        }

        function closeFactoryPopup() {
            document.getElementById('factory-popup').classList.remove('show');
        }

        // Click outside popup to close
        document.addEventListener('click', function(e) {
            const popup = document.getElementById('factory-popup');
            if (popup && popup.classList.contains('show') && 
                !popup.contains(e.target) && 
                !e.target.closest('.factory-marker')) {
                closeFactoryPopup();
            }
        });

        // ============================================
        // DRILL-DOWN NAVIGATION SYSTEM
        // ============================================

        // Show drill-down modal
        function showDrillDown(content) {
            document.getElementById('drill-down-content').innerHTML = content;
            document.getElementById('drill-down-modal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close drill-down modal
        function closeDrillDown() {
            document.getElementById('drill-down-modal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Click outside modal to close
        document.getElementById('drill-down-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDrillDown();
            }
        });

        // ============================================
        // LEVEL 2: FACTORY ASSET LIST
        // ============================================
        function showFactoryAssets(factoryId, factoryName) {
            // Sample asset data for the factory
            const assets = generateFactoryAssets(factoryId);
            
            let content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">${factoryName} - Asset Inventory</h2>
                        <div class="drill-down-breadcrumb">
                            Asset Management > <span>${factoryName}</span> > All Assets
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card">
                        <div class="metric-label">Total Assets</div>
                        <div class="metric-value info">${assets.length}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Operational</div>
                        <div class="metric-value good">${assets.filter(a => a.status === 'Operational').length}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">In Maintenance</div>
                        <div class="metric-value warning">${assets.filter(a => a.status === 'Maintenance').length}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Down</div>
                        <div class="metric-value critical">${assets.filter(a => a.status === 'Down').length}</div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <input type="text" id="asset-search" placeholder="üîç Search assets by ID, name, or location..." 
                           onkeyup="filterAssets()" 
                           style="width: 100%; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 1px solid #00d9ff; color: white; border-radius: 6px; font-size: 1rem;">
                </div>

                <table class="asset-table" id="asset-table">
                    <thead>
                        <tr>
                            <th>Asset ID</th>
                            <th>Asset Name</th>
                            <th>Type</th>
                            <th>Location</th>
                            <th>Status</th>
                            <th>Utilization</th>
                            <th>Last Maintenance</th>
                            <th>Next PM</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            assets.forEach(asset => {
                content += `
                    <tr onclick="showAssetDetail('${asset.id}', '${factoryName}')">
                        <td><strong>${asset.id}</strong></td>
                        <td>${asset.name}</td>
                        <td>${asset.type}</td>
                        <td>${asset.location}</td>
                        <td><span class="status-badge ${asset.status.toLowerCase()}">${asset.status}</span></td>
                        <td>${asset.utilization}%</td>
                        <td>${asset.lastMaintenance}</td>
                        <td>${asset.nextPM}</td>
                    </tr>
                `;
            });

            content += `
                    </tbody>
                </table>
            `;

            showDrillDown(content);
        }

        // Filter assets by search
        function filterAssets() {
            const searchValue = document.getElementById('asset-search').value.toLowerCase();
            const table = document.getElementById('asset-table');
            const rows = table.getElementsByTagName('tr');

            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchValue) ? '' : 'none';
            }
        }

        // Generate sample assets for a factory
        function generateFactoryAssets(factoryId) {
            const types = ['CNC Machine', 'Assembly Robot', 'Welding Station', 'Testing Equipment', 'Packaging Line', 'Conveyor System'];
            const statuses = ['Operational', 'Operational', 'Operational', 'Operational', 'Maintenance', 'Down'];
            const counts = { pune: 58, mumbai: 42, delhi: 67, chennai: 38, bangalore: 40 };
            const count = counts[factoryId] || 50;
            
            const assets = [];
            for (let i = 1; i <= count; i++) {
                const type = types[Math.floor(Math.random() * types.length)];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const utilization = status === 'Operational' ? 75 + Math.floor(Math.random() * 20) : 
                                   status === 'Maintenance' ? Math.floor(Math.random() * 30) : 0;
                
                assets.push({
                    id: `${factoryId.toUpperCase()}-${String(i).padStart(3, '0')}`,
                    name: `${type} ${i}`,
                    type: type,
                    location: `Line ${Math.floor((i-1) / 8) + 1}`,
                    status: status,
                    utilization: utilization,
                    lastMaintenance: `Dec ${Math.floor(Math.random() * 20) + 1}, 2024`,
                    nextPM: `Jan ${Math.floor(Math.random() * 30) + 1}, 2025`
                });
            }
            return assets;
        }

        // ============================================
        // LEVEL 3: INDIVIDUAL ASSET DETAIL
        // ============================================
        function showAssetDetail(assetId, factoryName) {
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Asset Details: ${assetId}</h2>
                        <div class="drill-down-breadcrumb">
                            Asset Management > ${factoryName} > <span>${assetId}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div style="margin-bottom: 1rem;">
                    <button class="btn btn-back" onclick="showFactoryAssets('${factoryName.split(' ')[2].toLowerCase()}', '${factoryName}')">
                        ‚Üê Back to Asset List
                    </button>
                </div>

                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-button active" onclick="switchTab('overview')">Overview</button>
                    <button class="tab-button" onclick="switchTab('maintenance')">Maintenance History</button>
                    <button class="tab-button" onclick="switchTab('performance')">Performance Metrics</button>
                    <button class="tab-button" onclick="switchTab('documents')">Documents</button>
                    <button class="tab-button" onclick="switchTab('costs')">Cost Analysis</button>
                </div>

                <!-- Overview Tab -->
                <div id="tab-overview" class="tab-content active">
                    <div class="detail-section">
                        <h3>Asset Information</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Asset ID</div>
                                <div class="detail-value">${assetId}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Asset Name</div>
                                <div class="detail-value">CNC Machining Center</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Type / Category</div>
                                <div class="detail-value">CNC Machine</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Manufacturer</div>
                                <div class="detail-value">Siemens AG</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Model Number</div>
                                <div class="detail-value">SINUMERIK 840D sl</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Serial Number</div>
                                <div class="detail-value">SN-2024-8456</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Installation Date</div>
                                <div class="detail-value">Mar 15, 2023</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Age</div>
                                <div class="detail-value">21 months</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Location</div>
                                <div class="detail-value">${factoryName}, Line 3, Bay A</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Current Status</div>
                                <div class="detail-value"><span class="status-badge operational">Operational</span></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Utilization (7 days)</div>
                                <div class="detail-value" style="color: #00ff88;">87%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">OEE (Current)</div>
                                <div class="detail-value" style="color: #00ff88;">89%</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Ownership & Responsibility</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Asset Owner</div>
                                <div class="detail-value">Production Manager - ${factoryName}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Owner Contact</div>
                                <div class="detail-value">rajesh.kumar@turinton.com</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Maintenance Responsible</div>
                                <div class="detail-value">Maintenance Team Lead - John Smith</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Maintenance Contact</div>
                                <div class="detail-value">john.smith@turinton.com</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Department</div>
                                <div class="detail-value">Production - Machining</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Cost Center</div>
                                <div class="detail-value">CC-2401-MACH</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Technical Specifications</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Power Rating</div>
                                <div class="detail-value">75 kW</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Max Speed</div>
                                <div class="detail-value">12,000 RPM</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Work Envelope</div>
                                <div class="detail-value">800 x 600 x 500 mm</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Tolerance</div>
                                <div class="detail-value">¬±0.005 mm</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Control System</div>
                                <div class="detail-value">SINUMERIK 840D sl</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Tooling Capacity</div>
                                <div class="detail-value">24 tools</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Financial Information</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Purchase Cost</div>
                                <div class="detail-value">$450,000</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Current Book Value</div>
                                <div class="detail-value">$382,500</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Depreciation Method</div>
                                <div class="detail-value">Straight Line (10 years)</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Warranty Expiry</div>
                                <div class="detail-value">Mar 15, 2026</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Insurance Coverage</div>
                                <div class="detail-value">$500,000</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Insurance Expiry</div>
                                <div class="detail-value">Dec 31, 2025</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Maintenance History Tab -->
                <div id="tab-maintenance" class="tab-content">
                    <div class="detail-section">
                        <h3>Maintenance Summary</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Last PM Date</div>
                                <div class="detail-value">Dec 8, 2024</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Next PM Due</div>
                                <div class="detail-value">Jan 8, 2025</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">PM Frequency</div>
                                <div class="detail-value">Monthly</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Total PM Count</div>
                                <div class="detail-value">21 completed</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Unplanned Repairs (YTD)</div>
                                <div class="detail-value" style="color: #ffaa00;">3</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Total Downtime (YTD)</div>
                                <div class="detail-value" style="color: #ffaa00;">18.5 hours</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">MTBF</div>
                                <div class="detail-value" style="color: #00ff88;">45.2 days</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">MTTR</div>
                                <div class="detail-value" style="color: #00ff88;">4.2 hours</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Maintenance Timeline</h3>
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Dec 8, 2024</div>
                                    <div class="timeline-title">Preventive Maintenance - Monthly PM</div>
                                    <div class="timeline-description">
                                        <strong>Work Order:</strong> MWO-2024-845<br>
                                        <strong>Technician:</strong> Mike Chen<br>
                                        <strong>Duration:</strong> 4 hours<br>
                                        <strong>Tasks:</strong> Lubrication, belt inspection, coolant change, electrical checks<br>
                                        <strong>Parts Used:</strong> Filter (P-456), Coolant (C-789)<br>
                                        <strong>Cost:</strong> $850
                                    </div>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Nov 12, 2024</div>
                                    <div class="timeline-title">Corrective Maintenance - Bearing Replacement</div>
                                    <div class="timeline-description">
                                        <strong>Work Order:</strong> MWO-2024-792<br>
                                        <strong>Technician:</strong> John Smith<br>
                                        <strong>Duration:</strong> 6 hours<br>
                                        <strong>Issue:</strong> Excessive vibration detected, bearing wear<br>
                                        <strong>Parts Used:</strong> Bearing (B-8945), Seal (S-234)<br>
                                        <strong>Cost:</strong> $2,450<br>
                                        <strong>Downtime:</strong> 6 hours
                                    </div>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Nov 8, 2024</div>
                                    <div class="timeline-title">Preventive Maintenance - Monthly PM</div>
                                    <div class="timeline-description">
                                        <strong>Work Order:</strong> MWO-2024-745<br>
                                        <strong>Technician:</strong> Mike Chen<br>
                                        <strong>Duration:</strong> 4 hours<br>
                                        <strong>Tasks:</strong> Standard monthly maintenance<br>
                                        <strong>Cost:</strong> $850
                                    </div>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Oct 15, 2024</div>
                                    <div class="timeline-title">Corrective Maintenance - Spindle Motor Repair</div>
                                    <div class="timeline-description">
                                        <strong>Work Order:</strong> MWO-2024-658<br>
                                        <strong>Technician:</strong> Sarah Johnson (Siemens Service)<br>
                                        <strong>Duration:</strong> 8 hours<br>
                                        <strong>Issue:</strong> Spindle motor overheating<br>
                                        <strong>Parts Used:</strong> Motor bearings, thermal sensor<br>
                                        <strong>Cost:</strong> $4,200<br>
                                        <strong>Downtime:</strong> 8 hours
                                    </div>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Oct 8, 2024</div>
                                    <div class="timeline-title">Preventive Maintenance - Monthly PM</div>
                                    <div class="timeline-description">
                                        <strong>Work Order:</strong> MWO-2024-601<br>
                                        <strong>Technician:</strong> Mike Chen<br>
                                        <strong>Duration:</strong> 4 hours<br>
                                        <strong>Cost:</strong> $850
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Metrics Tab -->
                <div id="tab-performance" class="tab-content">
                    <div class="detail-section">
                        <h3>Performance Metrics (Last 30 Days)</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">OEE Average</div>
                                <div class="detail-value" style="color: #00ff88;">87.3%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Availability</div>
                                <div class="detail-value" style="color: #00ff88;">92.1%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Performance</div>
                                <div class="detail-value" style="color: #00ff88;">94.8%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Quality</div>
                                <div class="detail-value" style="color: #00ff88;">98.2%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Utilization Rate</div>
                                <div class="detail-value" style="color: #00ff88;">85.4%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Cycle Time</div>
                                <div class="detail-value">12.5 min/unit</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Production Output</div>
                                <div class="detail-value">2,450 units</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Scrap Rate</div>
                                <div class="detail-value" style="color: #00ff88;">1.8%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Setup Time (Avg)</div>
                                <div class="detail-value">2.2 hours</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Changeover Count</div>
                                <div class="detail-value">18</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Energy Consumption</div>
                                <div class="detail-value">1,850 kWh</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Cost per Unit</div>
                                <div class="detail-value">$18.50</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Quality Performance</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">First Pass Yield</div>
                                <div class="detail-value" style="color: #00ff88;">98.2%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Defect Rate</div>
                                <div class="detail-value" style="color: #00ff88;">1.8%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Rework Rate</div>
                                <div class="detail-value" style="color: #00ff88;">0.5%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Quality Holds</div>
                                <div class="detail-value">2</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Sensor Data (Real-Time)</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Spindle Temperature</div>
                                <div class="detail-value" style="color: #00ff88;">68¬∞C</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Vibration Level</div>
                                <div class="detail-value" style="color: #00ff88;">0.8 mm/s</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Power Consumption</div>
                                <div class="detail-value">62 kW</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Coolant Level</div>
                                <div class="detail-value" style="color: #00ff88;">85%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Tool Wear</div>
                                <div class="detail-value" style="color: #ffaa00;">65%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Operating Hours</div>
                                <div class="detail-value">12,450 hrs</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documents Tab -->
                <div id="tab-documents" class="tab-content">
                    <div class="detail-section">
                        <h3>Asset Documents</h3>
                        <div class="document-list">
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üìÑ</div>
                                <div class="document-info">
                                    <div class="document-name">Purchase Order & Invoice</div>
                                    <div class="document-meta">PO-2023-0458 ‚Ä¢ Uploaded: Mar 15, 2023 ‚Ä¢ PDF, 2.4 MB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üìò</div>
                                <div class="document-info">
                                    <div class="document-name">Operation Manual</div>
                                    <div class="document-meta">SINUMERIK 840D sl Manual ‚Ä¢ PDF, 15.8 MB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üîß</div>
                                <div class="document-info">
                                    <div class="document-name">Maintenance Manual</div>
                                    <div class="document-meta">Service Guide v2.3 ‚Ä¢ PDF, 8.2 MB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üìã</div>
                                <div class="document-info">
                                    <div class="document-name">Warranty Certificate</div>
                                    <div class="document-meta">Valid until Mar 15, 2026 ‚Ä¢ PDF, 245 KB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üîê</div>
                                <div class="document-info">
                                    <div class="document-name">Insurance Policy</div>
                                    <div class="document-meta">Policy #INS-2024-7845 ‚Ä¢ PDF, 1.2 MB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üéì</div>
                                <div class="document-info">
                                    <div class="document-name">Operator Training Records</div>
                                    <div class="document-meta">12 operators certified ‚Ä¢ Excel, 450 KB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üî¨</div>
                                <div class="document-info">
                                    <div class="document-name">Calibration Certificates</div>
                                    <div class="document-meta">Last calibrated: Nov 15, 2024 ‚Ä¢ PDF, 890 KB</div>
                                </div>
                            </div>
                            <div class="document-item" onclick="alert('Opening document...')">
                                <div class="document-icon">üìä</div>
                                <div class="document-info">
                                    <div class="document-name">Performance Reports (2024)</div>
                                    <div class="document-meta">Monthly OEE reports ‚Ä¢ ZIP, 5.4 MB</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cost Analysis Tab -->
                <div id="tab-costs" class="tab-content">
                    <div class="detail-section">
                        <h3>Cost Summary (Year to Date)</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Maintenance Cost</div>
                                <div class="detail-value">$18,450</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Energy Cost</div>
                                <div class="detail-value">$12,800</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Operating Cost</div>
                                <div class="detail-value">$8,200</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Total Cost</div>
                                <div class="detail-value">$39,450</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Cost per Hour</div>
                                <div class="detail-value">$62.50</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Revenue Generated</div>
                                <div class="detail-value" style="color: #00ff88;">$285,000</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Maintenance Cost Breakdown</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Preventive Maintenance</div>
                                <div class="detail-value">$10,200 (55%)</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Corrective Maintenance</div>
                                <div class="detail-value">$6,650 (36%)</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Parts & Materials</div>
                                <div class="detail-value">$1,600 (9%)</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Monthly Cost History</h3>
                        <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; text-align: center; color: #8b92b0;">
                            üìä Cost trend chart would be displayed here<br>
                            Showing monthly breakdown of maintenance, energy, and operating costs
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // Tab switching function
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(`tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
        }

        // ============================================
        // SUPPLIER DETAIL (Level 2)
        // ============================================
        function showSupplierDetail(supplierId, supplierName) {
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Supplier Profile: ${supplierName}</h2>
                        <div class="drill-down-breadcrumb">
                            Supply Chain Intelligence > <span>${supplierName}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="tab-navigation">
                    <button class="tab-button active" onclick="switchTab('supplier-overview')">Overview</button>
                    <button class="tab-button" onclick="switchTab('supplier-performance')">Performance</button>
                    <button class="tab-button" onclick="switchTab('supplier-quality')">Quality History</button>
                    <button class="tab-button" onclick="switchTab('supplier-orders')">Orders & Deliveries</button>
                    <button class="tab-button" onclick="switchTab('supplier-contacts')">Contacts</button>
                </div>

                <div id="tab-supplier-overview" class="tab-content active">
                    <div class="detail-section">
                        <h3>Supplier Information</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Supplier ID</div>
                                <div class="detail-value">${supplierId}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Company Name</div>
                                <div class="detail-value">${supplierName}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Type</div>
                                <div class="detail-value">Critical Materials Supplier</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Status</div>
                                <div class="detail-value"><span class="status-badge operational">Active</span></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Location</div>
                                <div class="detail-value">Bangalore, Karnataka, India</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Relationship Since</div>
                                <div class="detail-value">Jan 2020 (5 years)</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Annual Spend</div>
                                <div class="detail-value">$2.4M</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Payment Terms</div>
                                <div class="detail-value">Net 45 days</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Category</div>
                                <div class="detail-value">Strategic Supplier</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Risk Level</div>
                                <div class="detail-value" style="color: #ff3366;">High</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Certifications</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">ISO 9001:2015</div>
                                <div class="detail-value">‚úì Certified (Exp: Dec 2025)</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">IATF 16949</div>
                                <div class="detail-value">‚úì Certified (Exp: Mar 2026)</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ISO 14001</div>
                                <div class="detail-value">‚úì Certified (Exp: Aug 2025)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-supplier-performance" class="tab-content">
                    <div class="detail-section">
                        <h3>Performance Metrics (Last 12 Months)</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">On-Time Delivery</div>
                                <div class="detail-value" style="color: #ffaa00;">82%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Quality PPM</div>
                                <div class="detail-value" style="color: #ff3366;">1,500</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Total POs Issued</div>
                                <div class="detail-value">145</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Late Deliveries</div>
                                <div class="detail-value" style="color: #ff3366;">26</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Quality Holds</div>
                                <div class="detail-value" style="color: #ff3366;">8</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Supplier Score</div>
                                <div class="detail-value" style="color: #ffaa00;">72/100</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Recent Issues</h3>
                        <div class="action-history">
                            <div class="action-item">
                                <div class="action-header">
                                    <div class="action-user">Delivery Delay - PO-2024-8456</div>
                                    <div class="action-time">Dec 12, 2024</div>
                                </div>
                                <div class="action-description">
                                    10-day delay on Part M-456 shipment. Root cause: Capacity constraint at supplier facility.
                                    Impact: 5 work orders blocked, $450K revenue at risk.
                                </div>
                            </div>

                            <div class="action-item">
                                <div class="action-header">
                                    <div class="action-user">Quality Issue - Batch B-2024-156</div>
                                    <div class="action-time">Dec 5, 2024</div>
                                </div>
                                <div class="action-description">
                                    Dimensional variance beyond tolerance. 2,400 units quarantined. NCR-2024-156 opened.
                                    Supplier audit scheduled for Dec 23.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-supplier-quality" class="tab-content">
                    <div class="detail-section">
                        <h3>Quality History</h3>
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Dec 2024</div>
                                    <div class="timeline-title">Quality Declining - PPM 1,500</div>
                                    <div class="timeline-description">
                                        PPM increased 3x from 500 to 1,500 in 60 days. Root cause: New manufacturing facility
                                        with different processes. Audit scheduled.
                                    </div>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <div class="timeline-date">Oct 2024</div>
                                    <div class="timeline-title">Good Performance - PPM 500</div>
                                    <div class="timeline-description">
                                        Acceptable quality levels maintained. No major issues.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-supplier-orders" class="tab-content">
                    <div class="detail-section">
                        <h3>Recent Purchase Orders</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>PO Number</th>
                                    <th>Date</th>
                                    <th>Part Number</th>
                                    <th>Quantity</th>
                                    <th>Value</th>
                                    <th>Delivery Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>PO-2024-8456</strong></td>
                                    <td>Dec 1, 2024</td>
                                    <td>M-456</td>
                                    <td>5,000</td>
                                    <td>$62,500</td>
                                    <td>Dec 12, 2024</td>
                                    <td><span class="status-badge down">10 days late</span></td>
                                </tr>
                                <tr>
                                    <td><strong>PO-2024-8234</strong></td>
                                    <td>Nov 15, 2024</td>
                                    <td>M-789</td>
                                    <td>3,000</td>
                                    <td>$45,000</td>
                                    <td>Nov 30, 2024</td>
                                    <td><span class="status-badge operational">Delivered</span></td>
                                </tr>
                                <tr>
                                    <td><strong>PO-2024-8012</strong></td>
                                    <td>Nov 1, 2024</td>
                                    <td>M-456</td>
                                    <td>5,000</td>
                                    <td>$62,500</td>
                                    <td>Nov 15, 2024</td>
                                    <td><span class="status-badge operational">Delivered</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="tab-supplier-contacts" class="tab-content">
                    <div class="detail-section">
                        <h3>Key Contacts</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Primary Contact</div>
                                <div class="detail-value">Rajesh Kumar</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Title</div>
                                <div class="detail-value">Business Development Manager</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Email</div>
                                <div class="detail-value">rajesh.kumar@supplier.com</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Phone</div>
                                <div class="detail-value">+91 98765 43210</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Quality Contact</div>
                                <div class="detail-value">Priya Sharma - quality@supplier.com</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Logistics Contact</div>
                                <div class="detail-value">Amit Patel - logistics@supplier.com</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // Update asset card click handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers to asset cards when asset management screen is loaded
            const updateAssetCardHandlers = () => {
                const assetCards = document.querySelectorAll('#asset-management .asset-card');
                assetCards.forEach(card => {
                    card.addEventListener('click', function() {
                        const factoryName = this.querySelector('.asset-name').textContent;
                        const factoryId = factoryName.split(' - ')[1].toLowerCase();
                        showFactoryAssets(factoryId, factoryName);
                    });
                });
            };

            // Call when navigating to asset management
            const assetManagementNav = document.querySelector('[onclick="showScreen(\'asset-management\')"]');
            if (assetManagementNav) {
                assetManagementNav.addEventListener('click', () => {
                    setTimeout(updateAssetCardHandlers, 100);
                });
            }
        });

        // ============================================
        // LIVE OPERATIONS MONITOR DRILL-DOWNS
        // ============================================

        // OEE CALCULATION DRILL-DOWN
        function showOEECalculation() {
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">OEE Calculation Breakdown</h2>
                        <div class="drill-down-breadcrumb">
                            Live Operations Monitor > <span>OEE Analysis</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="detail-section" style="background: linear-gradient(135deg, rgba(255, 170, 0, 0.1), rgba(255, 170, 0, 0.05));">
                    <h3>Current OEE: <span style="color: #ffaa00;">82.4%</span></h3>
                    <p style="color: #8b92b0; margin-top: 0.5rem;">
                        OEE (Overall Equipment Effectiveness) = Availability √ó Performance √ó Quality
                    </p>
                </div>

                <div class="detail-section">
                    <h3>üìä OEE Component Breakdown</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem;">
                        <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">89.2%</div>
                            <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem;">Availability</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">Operating Time √∑ Planned Production Time</div>
                        </div>
                        <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">94.8%</div>
                            <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem;">Performance</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">(Ideal Cycle Time √ó Total Count) √∑ Operating Time</div>
                        </div>
                        <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">97.5%</div>
                            <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem;">Quality</div>
                            <div style="color: #8b92b0; font-size: 0.875rem;">Good Count √∑ Total Count</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; color: #8b92b0; margin-bottom: 1rem;">OEE Calculation</div>
                        <div style="font-size: 1.5rem; font-family: monospace;">
                            <span style="color: #00d9ff;">89.2%</span> √ó 
                            <span style="color: #00d9ff;">94.8%</span> √ó 
                            <span style="color: #00d9ff;">97.5%</span> = 
                            <span style="color: #ffaa00; font-size: 2rem; font-weight: bold;">82.4%</span>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üîç Detailed Component Analysis</h3>
                    
                    <h4 style="color: #00d9ff; margin-top: 1.5rem; margin-bottom: 1rem;">1. Availability = 89.2%</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">Planned Production Time</div>
                            <div class="detail-value">480 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Planned Downtime (PM, breaks)</div>
                            <div class="detail-value">32 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Available Time</div>
                            <div class="detail-value">448 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Unplanned Downtime</div>
                            <div class="detail-value" style="color: #ff3366;">48.5 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Actual Operating Time</div>
                            <div class="detail-value" style="color: #00ff88;">399.5 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Availability</div>
                            <div class="detail-value" style="color: #00d9ff;">399.5 √∑ 448 = 89.2%</div>
                        </div>
                    </div>

                    <div style="background: rgba(255, 51, 102, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem; border-left: 4px solid #ff3366;">
                        <strong style="color: #ff3366;">Top Availability Losses:</strong>
                        <ul style="margin-top: 0.5rem; color: #8b92b0; line-height: 1.8;">
                            <li>Line 3 Machine Breakdown: 18.5 hours (38% of downtime)</li>
                            <li>Material Shortages: 12.0 hours (25% of downtime)</li>
                            <li>Changeovers: 10.5 hours (22% of downtime)</li>
                            <li>Quality Holds: 7.5 hours (15% of downtime)</li>
                        </ul>
                    </div>

                    <h4 style="color: #00d9ff; margin-top: 2rem; margin-bottom: 1rem;">2. Performance = 94.8%</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">Ideal Cycle Time</div>
                            <div class="detail-value">0.5 min/unit</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Total Units Produced</div>
                            <div class="detail-value">45,420 units</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Ideal Production Time</div>
                            <div class="detail-value">378.5 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Actual Operating Time</div>
                            <div class="detail-value">399.5 hours</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Performance</div>
                            <div class="detail-value" style="color: #00d9ff;">378.5 √∑ 399.5 = 94.8%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Performance Loss</div>
                            <div class="detail-value" style="color: #ff3366;">21 hours (5.2%)</div>
                        </div>
                    </div>

                    <div style="background: rgba(255, 170, 0, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem; border-left: 4px solid #ffaa00;">
                        <strong style="color: #ffaa00;">Top Performance Losses:</strong>
                        <ul style="margin-top: 0.5rem; color: #8b92b0; line-height: 1.8;">
                            <li>Minor Stoppages: 12 hours (57% of loss)</li>
                            <li>Reduced Speed: 6 hours (29% of loss)</li>
                            <li>Startup Delays: 3 hours (14% of loss)</li>
                        </ul>
                    </div>

                    <h4 style="color: #00d9ff; margin-top: 2rem; margin-bottom: 1rem;">3. Quality = 97.5%</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">Total Units Produced</div>
                            <div class="detail-value">45,420 units</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Defective Units</div>
                            <div class="detail-value" style="color: #ff3366;">820 units</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Rework Units</div>
                            <div class="detail-value" style="color: #ffaa00;">315 units</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Good Units</div>
                            <div class="detail-value" style="color: #00ff88;">44,285 units</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Quality Rate</div>
                            <div class="detail-value" style="color: #00d9ff;">44,285 √∑ 45,420 = 97.5%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Scrap Cost</div>
                            <div class="detail-value" style="color: #ff3366;">$28,450</div>
                        </div>
                    </div>

                    <div style="background: rgba(255, 51, 102, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem; border-left: 4px solid #ff3366;">
                        <strong style="color: #ff3366;">Top Quality Issues:</strong>
                        <ul style="margin-top: 0.5rem; color: #8b92b0; line-height: 1.8;">
                            <li>Line 3 Dimensional Variance: 485 units (59% of defects)</li>
                            <li>Surface Finish Issues: 185 units (23% of defects)</li>
                            <li>Assembly Defects: 150 units (18% of defects)</li>
                        </ul>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üéØ OEE Improvement Opportunities</h3>
                    <div class="correlation-grid">
                        <div class="correlation-card">
                            <div class="correlation-header">
                                <div class="correlation-icon">üî¥</div>
                                <div class="correlation-title">Fix Line 3 Breakdown</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Issue:</strong> Machine M-205 down 18.5 hours<br>
                                <strong>Impact:</strong> Reduces Availability by 4.1%<br>
                                <strong>Action:</strong> Emergency bearing replacement + preventive PM schedule<br>
                                <strong>Expected Gain:</strong> OEE ‚Üí 86.2% (+3.8%)
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">+3.8%</div>
                                    <div class="correlation-stat-label">OEE Gain</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$125K</div>
                                    <div class="correlation-stat-label">Monthly Value</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card">
                            <div class="correlation-header">
                                <div class="correlation-icon">üü°</div>
                                <div class="correlation-title">Reduce Minor Stoppages</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Issue:</strong> 12 hours lost to minor stoppages<br>
                                <strong>Impact:</strong> Reduces Performance by 3%<br>
                                <strong>Action:</strong> 5S implementation + operator training<br>
                                <strong>Expected Gain:</strong> OEE ‚Üí 84.9% (+2.5%)
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">+2.5%</div>
                                    <div class="correlation-stat-label">OEE Gain</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$85K</div>
                                    <div class="correlation-stat-label">Monthly Value</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card">
                            <div class="correlation-header">
                                <div class="correlation-icon">üü°</div>
                                <div class="correlation-title">Improve Quality on Line 3</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Issue:</strong> 485 units scrapped from Line 3<br>
                                <strong>Impact:</strong> Reduces Quality by 1%<br>
                                <strong>Action:</strong> Quarantine supplier batch + operator recertification<br>
                                <strong>Expected Gain:</strong> OEE ‚Üí 83.2% (+0.8%)
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">+0.8%</div>
                                    <div class="correlation-stat-label">OEE Gain</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$28K</div>
                                    <div class="correlation-stat-label">Monthly Value</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; margin-top: 1.5rem; border: 2px solid #00ff88;">
                        <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem;">
                            üíé Combined Improvement Potential
                        </div>
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                            Current OEE: <span style="color: #ffaa00;">82.4%</span> ‚Üí 
                            Target OEE: <span style="color: #00ff88;">89.5%</span>
                        </div>
                        <div style="color: #8b92b0;">
                            <strong>Total Monthly Value:</strong> $238K additional revenue<br>
                            <strong>Annual Impact:</strong> $2.86M
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // LINES RUNNING VISUALIZATION
        function showLinesVisualization() {
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Production Lines - Live Status</h2>
                        <div class="drill-down-breadcrumb">
                            Live Operations Monitor > <span>Lines Visualization</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="detail-section">
                    <h3>üè≠ Factory Layout Overview</h3>
                    <div style="background: rgba(0,0,0,0.3); padding: 2rem; border-radius: 8px;">
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                            ${[1,2,3,4,5,6,7,8].map(lineNum => {
                                const statuses = {1: 'operational', 2: 'operational', 3: 'down', 4: 'operational', 
                                                5: 'warning', 6: 'operational', 7: 'operational', 8: 'maintenance'};
                                const colors = {operational: '#00ff88', warning: '#ffaa00', down: '#ff3366', maintenance: '#8b92b0'};
                                const status = statuses[lineNum];
                                return `
                                    <div style="background: rgba(${status === 'operational' ? '0,255,136' : status === 'warning' ? '255,170,0' : status === 'down' ? '255,51,102' : '139,146,176'},0.1); 
                                                padding: 1rem; border-radius: 8px; border: 2px solid ${colors[status]}; cursor: pointer;"
                                         onclick="showLineDetailView(${lineNum}, '${status}')">
                                        <div style="text-align: center;">
                                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üè≠</div>
                                            <div style="font-weight: 600; margin-bottom: 0.5rem;">Line ${lineNum}</div>
                                            <div style="font-size: 0.875rem; color: ${colors[status]}; text-transform: uppercase;">
                                                ${status}
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üìä Line Status Summary</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">Lines Operational</div>
                            <div class="detail-value" style="color: #00ff88;">5 / 8</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Lines with Warnings</div>
                            <div class="detail-value" style="color: #ffaa00;">1 / 8</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Lines Down</div>
                            <div class="detail-value" style="color: #ff3366;">1 / 8</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Planned Maintenance</div>
                            <div class="detail-value" style="color: #8b92b0;">1 / 8</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Total Capacity</div>
                            <div class="detail-value">12,500 units/day</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Current Output</div>
                            <div class="detail-value" style="color: #ffaa00;">9,850 units/day</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Utilization</div>
                            <div class="detail-value" style="color: #ffaa00;">78.8%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Efficiency Gap</div>
                            <div class="detail-value" style="color: #ff3366;">2,650 units/day</div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; padding: 2rem; background: rgba(0, 217, 255, 0.1); border-radius: 8px; margin-top: 1rem;">
                    <div style="font-size: 1.2rem; margin-bottom: 1rem;">üëÜ Click any line above to see detailed machine layout and sensor data</div>
                </div>
            `;

            showDrillDown(content);
        }

        // ACTIVE WORK ORDERS DRILL-DOWN
        function showActiveWorkOrders() {
            const workOrders = [
                {id: 'WO-12350', line: 'Line 1', product: 'Product A-Series', customer: 'XYZ Corp', quantity: 5000, produced: 4200, progress: 84, quality: 98.5, dueDate: 'Dec 24, 6PM', status: 'on-track', stockStatus: 'adequate'},
                {id: 'WO-12351', line: 'Line 2', product: 'Component B-456', customer: 'ABC Industries', quantity: 3000, produced: 2650, progress: 88, quality: 97.2, dueDate: 'Dec 24, 8PM', status: 'on-track', stockStatus: 'adequate'},
                {id: 'WO-12352', line: 'Line 3', product: 'Component B-456', customer: 'DEF Manufacturing', quantity: 2500, produced: 850, progress: 34, quality: 92.1, dueDate: 'Dec 24, 4PM', status: 'at-risk', stockStatus: 'low'},
                {id: 'WO-12353', line: 'Line 4', product: 'Frame Assembly', customer: 'GHI Auto Parts', quantity: 1800, produced: 1620, progress: 90, quality: 99.1, dueDate: 'Dec 24, 5PM', status: 'on-track', stockStatus: 'adequate'},
                {id: 'WO-12354', line: 'Line 5', product: 'Product A-Series', customer: 'XYZ Corp', quantity: 4000, produced: 2800, progress: 70, quality: 96.8, dueDate: 'Dec 25, 10AM', status: 'warning', stockStatus: 'critical'},
                {id: 'WO-12355', line: 'Line 6', product: 'Final Packaging', customer: 'JKL Electronics', quantity: 6000, produced: 5200, progress: 87, quality: 98.9, dueDate: 'Dec 24, 7PM', status: 'on-track', stockStatus: 'adequate'}
            ];

            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Active Work Orders</h2>
                        <div class="drill-down-breadcrumb">
                            Live Operations Monitor > <span>Work Orders</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card">
                        <div class="metric-label">Total Active WOs</div>
                        <div class="metric-value info">24</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">On Track</div>
                        <div class="metric-value good">18</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">At Risk</div>
                        <div class="metric-value critical">6</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Avg Progress</div>
                        <div class="metric-value info">72%</div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üìã Work Order Details</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>WO Number</th>
                                <th>Line</th>
                                <th>Product</th>
                                <th>Customer</th>
                                <th>Progress</th>
                                <th>Quality</th>
                                <th>Stock Status</th>
                                <th>Due Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${workOrders.map(wo => `
                                <tr onclick="showWorkOrderDetail('${wo.id}')" style="cursor: pointer;">
                                    <td><strong>${wo.id}</strong></td>
                                    <td>${wo.line}</td>
                                    <td>${wo.product}</td>
                                    <td>${wo.customer}</td>
                                    <td>
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <div style="flex: 1; background: rgba(139, 146, 176, 0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                                                <div style="width: ${wo.progress}%; height: 100%; background: ${wo.progress > 80 ? '#00ff88' : wo.progress > 60 ? '#ffaa00' : '#ff3366'};">
                                                </div>
                                            </div>
                                            <span style="font-weight: 600;">${wo.progress}%</span>
                                        </div>
                                        <div style="font-size: 0.75rem; color: #8b92b0; margin-top: 0.25rem;">
                                            ${wo.produced} / ${wo.quantity} units
                                        </div>
                                    </td>
                                    <td style="color: ${wo.quality > 95 ? '#00ff88' : '#ffaa00'};">${wo.quality}%</td>
                                    <td>
                                        <span class="status-badge ${wo.stockStatus === 'adequate' ? 'operational' : wo.stockStatus === 'low' ? 'maintenance' : 'down'}">
                                            ${wo.stockStatus}
                                        </span>
                                    </td>
                                    <td>${wo.dueDate}</td>
                                    <td>
                                        <span class="status-badge ${wo.status === 'on-track' ? 'operational' : wo.status === 'warning' ? 'maintenance' : 'down'}">
                                            ${wo.status}
                                        </span>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;

            showDrillDown(content);
        }

        // WORK ORDER DETAIL
        function showWorkOrderDetail(woId) {
            alert(`Detailed view for ${woId} with 5 tabs: Details, Progress, Quality, Materials, Customer would open here. This demonstrates the full work order tracking capability.`);
        }

        // UNPLANNED DOWNTIME ANALYSIS
        function showDowntimeAnalysis() {
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Unplanned Downtime Analysis</h2>
                        <div class="drill-down-breadcrumb">
                            Live Operations Monitor > <span>Downtime Analysis</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card">
                        <div class="metric-label">Total Downtime (This Month)</div>
                        <div class="metric-value critical">48.5 hrs</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Production Loss</div>
                        <div class="metric-value critical">3,850 units</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Revenue Impact</div>
                        <div class="metric-value critical">$285,000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Downtime Events</div>
                        <div class="metric-value info">18</div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üìä Downtime Pareto Analysis</h3>
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px;">
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Root Cause</th>
                                    <th>Events</th>
                                    <th>Duration</th>
                                    <th>% of Total</th>
                                    <th>Cumulative %</th>
                                    <th>Impact</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="cursor: pointer;">
                                    <td><strong>Machine Breakdown</strong></td>
                                    <td>3</td>
                                    <td style="color: #ff3366;">18.5 hrs</td>
                                    <td style="color: #ff3366;">38%</td>
                                    <td>38%</td>
                                    <td style="color: #ff3366;">$125K</td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td><strong>Material Shortage</strong></td>
                                    <td>5</td>
                                    <td style="color: #ff3366;">12.0 hrs</td>
                                    <td style="color: #ffaa00;">25%</td>
                                    <td>63%</td>
                                    <td style="color: #ffaa00;">$85K</td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td><strong>Changeover Delays</strong></td>
                                    <td>4</td>
                                    <td style="color: #ffaa00;">10.5 hrs</td>
                                    <td>22%</td>
                                    <td>85%</td>
                                    <td>$45K</td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td><strong>Quality Holds</strong></td>
                                    <td>3</td>
                                    <td>7.5 hrs</td>
                                    <td>15%</td>
                                    <td>100%</td>
                                    <td>$30K</td>
                                </tr>
                            </tbody>
                        </table>

                        <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0, 217, 255, 0.1); border-radius: 8px;">
                            <strong style="color: #00d9ff;">80/20 Analysis:</strong> 
                            <span style="color: #8b92b0;">
                                Top 2 root causes (Machine Breakdown + Material Shortage) account for 63% of all downtime. 
                                Focus improvement efforts here for maximum impact.
                            </span>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üí° Improvement Opportunities</h3>
                    <div class="correlation-grid">
                        <div class="correlation-card">
                            <div class="correlation-header">
                                <div class="correlation-icon">üî¥</div>
                                <div class="correlation-title">Prevent Machine Breakdowns</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current State:</strong> 3 breakdowns, 18.5 hours downtime<br>
                                <strong>Root Cause:</strong> Reactive maintenance approach<br>
                                <strong>Solution:</strong> Implement predictive maintenance<br>
                                ‚Ä¢ Install vibration sensors on all critical machines<br>
                                ‚Ä¢ Set up automated alerts at 2x normal vibration<br>
                                ‚Ä¢ Schedule preventive PM based on sensor data<br>
                                <strong>Expected Impact:</strong> 85% reduction in unplanned downtime
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">-85%</div>
                                    <div class="correlation-stat-label">Downtime</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$106K</div>
                                    <div class="correlation-stat-label">Annual Save</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card">
                            <div class="correlation-header">
                                <div class="correlation-icon">üü°</div>
                                <div class="correlation-title">Optimize Inventory Levels</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current State:</strong> 5 material shortages, 12 hours downtime<br>
                                <strong>Root Cause:</strong> Inadequate safety stock (15 days)<br>
                                <strong>Solution:</strong> Increase safety stock to 30 days + cross-site visibility<br>
                                ‚Ä¢ Net cost: $140K additional carrying cost<br>
                                ‚Ä¢ Savings: $450K stockout cost avoided<br>
                                <strong>Expected Impact:</strong> 90% reduction in material shortages
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">-90%</div>
                                    <div class="correlation-stat-label">Shortages</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$170K</div>
                                    <div class="correlation-stat-label">Net Annual Save</div>
                                </div>
                            </div>
                        </div>

                        <div class="correlation-card">
                            <div class="correlation-header">
                                <div class="correlation-icon">üü°</div>
                                <div class="correlation-title">Reduce Changeover Time</div>
                            </div>
                            <div class="correlation-description">
                                <strong>Current State:</strong> 4 events, 10.5 hours downtime<br>
                                <strong>Root Cause:</strong> Operator training gaps<br>
                                <strong>Solution:</strong> SMED (Single Minute Exchange of Dies)<br>
                                ‚Ä¢ Operator training: 5 days<br>
                                ‚Ä¢ Visual work instructions<br>
                                ‚Ä¢ Tool organization (5S)<br>
                                <strong>Expected Impact:</strong> Reduce changeover time from 4.5hr to 2hr (56%)
                            </div>
                            <div class="correlation-stats">
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">-56%</div>
                                    <div class="correlation-stat-label">Time</div>
                                </div>
                                <div class="correlation-stat">
                                    <div class="correlation-stat-value">$45K</div>
                                    <div class="correlation-stat-label">Annual Save</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; margin-top: 1.5rem; border: 2px solid #00ff88;">
                        <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem;">
                            üíé Total Improvement Potential
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00ff88; margin-bottom: 0.5rem;">-75%</div>
                                <div style="color: #8b92b0;">Downtime Reduction</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00ff88; margin-bottom: 0.5rem;">$321K</div>
                                <div style="color: #8b92b0;">Annual Savings</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00ff88; margin-bottom: 0.5rem;">+5%</div>
                                <div style="color: #8b92b0;">OEE Improvement</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // ============================================
        // PREDICTIVE ANALYTICS DRILL-DOWNS
        // ============================================
        function showPredictionDetail(predictionType, itemId) {
            const predictions = {
                'machine-m205': {
                    title: 'Machine M-205 Failure Prediction',
                    risk: 'HIGH',
                    probability: '85%',
                    timeframe: '7 days',
                    indicators: [
                        {name: 'Vibration', current: '6.9 mm/s', normal: '3.0 mm/s', severity: 'critical'},
                        {name: 'Temperature', current: '95¬∞C', normal: '80¬∞C', severity: 'warning'},
                        {name: 'Operating Hours', current: '12,450 hrs', normal: '< 15,000 hrs', severity: 'info'},
                        {name: 'Bearing Condition', current: 'Degraded', normal: 'Good', severity: 'critical'}
                    ],
                    impact: '$45,000 production loss + $8,000 emergency repair',
                    rootCause: 'Bearing wear accelerated by inadequate lubrication',
                    recommendation: 'Schedule preventive bearing replacement within 48 hours during planned downtime'
                },
                'machine-m118': {
                    title: 'Machine M-118 Failure Prediction',
                    risk: 'MEDIUM',
                    probability: '45%',
                    timeframe: '14 days',
                    indicators: [
                        {name: 'Bearing Temperature', current: '88¬∞C', normal: '75¬∞C', severity: 'warning'},
                        {name: 'Vibration', current: '4.2 mm/s', normal: '3.0 mm/s', severity: 'warning'},
                        {name: 'Oil Pressure', current: '3.2 bar', normal: '4.0 bar', severity: 'warning'}
                    ],
                    impact: '$28,000 production loss',
                    rootCause: 'Bearing lubrication degradation',
                    recommendation: 'Inspect and replace bearing lubricant, monitor closely'
                }
            };

            const pred = predictions[itemId] || predictions['machine-m205'];
            const riskColor = pred.risk === 'HIGH' ? '#ff3366' : pred.risk === 'MEDIUM' ? '#ffaa00' : '#00ff88';

            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">${pred.title}</h2>
                        <div class="drill-down-breadcrumb">
                            Predictive Analytics > <span>${pred.title}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="detail-section" style="background: linear-gradient(135deg, rgba(${pred.risk === 'HIGH' ? '255, 51, 102' : '255, 170, 0'}, 0.1), rgba(${pred.risk === 'HIGH' ? '255, 51, 102' : '255, 170, 0'}, 0.05));">
                    <h3>Risk Assessment: <span style="color: ${riskColor};">${pred.risk} RISK</span></h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-top: 1rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; font-weight: bold; color: ${riskColor};">${pred.probability}</div>
                            <div style="color: #8b92b0;">Failure Probability</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; font-weight: bold; color: ${riskColor};">${pred.timeframe}</div>
                            <div style="color: #8b92b0;">Predicted Timeframe</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: ${riskColor};">${pred.impact.split('+')[0]}</div>
                            <div style="color: #8b92b0;">Financial Impact</div>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üîç Sensor Indicators & Anomalies</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Indicator</th>
                                <th>Current Value</th>
                                <th>Normal Range</th>
                                <th>Deviation</th>
                                <th>Severity</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${pred.indicators.map(ind => `
                                <tr>
                                    <td><strong>${ind.name}</strong></td>
                                    <td style="color: ${ind.severity === 'critical' ? '#ff3366' : ind.severity === 'warning' ? '#ffaa00' : '#00d9ff'};">
                                        ${ind.current}
                                    </td>
                                    <td>${ind.normal}</td>
                                    <td>${ind.severity === 'critical' ? 'üî¥ High' : ind.severity === 'warning' ? 'üü° Moderate' : 'üü¢ Low'}</td>
                                    <td><span class="status-badge ${ind.severity === 'critical' ? 'down' : ind.severity === 'warning' ? 'maintenance' : 'operational'}">
                                        ${ind.severity.toUpperCase()}
                                    </span></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>

                <div class="detail-section">
                    <h3>üéØ Root Cause Analysis</h3>
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px;">
                        <p style="line-height: 1.8; color: #ffffff;">
                            <strong style="color: #00d9ff;">Primary Root Cause:</strong><br>
                            ${pred.rootCause}
                        </p>
                        <p style="line-height: 1.8; color: #8b92b0; margin-top: 1rem;">
                            <strong style="color: #00d9ff;">Contributing Factors:</strong><br>
                            ‚Ä¢ Preventive maintenance schedule not followed<br>
                            ‚Ä¢ Operator ignored early warning signs (vibration alerts)<br>
                            ‚Ä¢ Lubrication system requires upgrade<br>
                            ‚Ä¢ Operating hours approaching end of bearing life cycle
                        </p>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üí° Recommended Actions</h3>
                    <div class="correlation-grid">
                        <div class="correlation-card" style="border-left-color: #00ff88;">
                            <div class="correlation-header">
                                <div class="correlation-icon">‚úì</div>
                                <div class="correlation-title">Immediate Action (24-48 hours)</div>
                            </div>
                            <div class="correlation-description">
                                ${pred.recommendation}<br><br>
                                <strong>Cost:</strong> $2,500 (preventive)<br>
                                <strong>Downtime:</strong> 4 hours (planned)<br>
                                <strong>Cost Avoidance:</strong> $50,500
                            </div>
                        </div>

                        <div class="correlation-card" style="border-left-color: #ffaa00;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üîß</div>
                                <div class="correlation-title">Short-term (This Month)</div>
                            </div>
                            <div class="correlation-description">
                                ‚Ä¢ Upgrade lubrication system<br>
                                ‚Ä¢ Install additional vibration sensors<br>
                                ‚Ä¢ Implement automated alerts<br>
                                ‚Ä¢ Train operators on early warning signs
                            </div>
                        </div>

                        <div class="correlation-card" style="border-left-color: #00d9ff;">
                            <div class="correlation-header">
                                <div class="correlation-icon">üìã</div>
                                <div class="correlation-title">Long-term (Next Quarter)</div>
                            </div>
                            <div class="correlation-description">
                                ‚Ä¢ Implement predictive maintenance program<br>
                                ‚Ä¢ Review and optimize PM schedules<br>
                                ‚Ä¢ Consider equipment upgrade/replacement<br>
                                ‚Ä¢ Establish spare parts inventory
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border: 2px solid #00ff88; margin-top: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem;">üí∞ ROI Analysis</div>
                            <div style="color: #8b92b0;">
                                Preventive Action Cost: $2,500 | Failure Cost: $53,000<br>
                                <strong style="color: #00ff88;">Return on Investment: 21x</strong>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-primary" onclick="alert('Work order created for preventive maintenance')">
                                Create Work Order
                            </button>
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // ============================================
        // CORRELATION ENGINE DRILL-DOWNS
        // ============================================
        function showCorrelationDetail(correlationId) {
            const correlations = {
                'quality-supply': {
                    title: 'Quality ‚Üî Supply Chain Correlation',
                    discovery: '78% of dimensional variance issues correlate with late deliveries from Supplier S-123',
                    dataPoints: 245,
                    confidence: '94%',
                    timeline: '6 months',
                    details: `AI discovered that when Supplier S-123 delivers late (>5 days), the dimensional variance rate increases from 2% to 15%. Analysis of 245 data points over 6 months shows this correlation with 94% confidence.`,
                    evidence: [
                        {metric: 'On-time deliveries', correlation: 'Low variance (2%)', count: 145},
                        {metric: 'Late deliveries (>5 days)', correlation: 'High variance (15%)', count: 100}
                    ],
                    hypothesis: 'Rushed production at supplier when behind schedule leads to quality compromises',
                    recommendation: 'Implement 100% incoming inspection for late deliveries + work with supplier on capacity planning',
                    impact: '$125K annual quality cost reduction'
                },
                'production-hr': {
                    title: 'Production ‚Üî HR Correlation',
                    discovery: 'Operator certification expiry correlates with 65% increase in setup errors',
                    dataPoints: 180,
                    confidence: '91%',
                    timeline: '12 months',
                    details: `Analysis shows operators with expired certifications (>30 days) make 65% more setup errors compared to certified operators. 12 certifications expiring in next 30 days on critical lines.`,
                    evidence: [
                        {metric: 'Certified operators', correlation: 'Setup error rate: 2.3%', count: 45},
                        {metric: 'Expired certifications', correlation: 'Setup error rate: 8.1%', count: 8}
                    ],
                    hypothesis: 'Certification process ensures operators maintain critical skills and knowledge',
                    recommendation: 'Automate certification expiry tracking + schedule recertification 60 days before expiry',
                    impact: '$85K annual quality cost reduction'
                }
            };

            const corr = correlations[correlationId] || correlations['quality-supply'];

            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">${corr.title}</h2>
                        <div class="drill-down-breadcrumb">
                            Correlation Engine > <span>${corr.title}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="detail-section">
                    <h3>üîó Correlation Discovery</h3>
                    <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                        <p style="font-size: 1.2rem; line-height: 1.8;">
                            ${corr.discovery}
                        </p>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1.5rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00d9ff;">${corr.dataPoints}</div>
                                <div style="color: #8b92b0;">Data Points Analyzed</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00ff88;">${corr.confidence}</div>
                                <div style="color: #8b92b0;">Statistical Confidence</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00d9ff;">${corr.timeline}</div>
                                <div style="color: #8b92b0;">Analysis Period</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üìä Detailed Analysis</h3>
                    <p style="line-height: 1.8; color: #8b92b0; margin-bottom: 1.5rem;">
                        ${corr.details}
                    </p>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Condition</th>
                                <th>Observed Correlation</th>
                                <th>Sample Size</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${corr.evidence.map(ev => `
                                <tr>
                                    <td><strong>${ev.metric}</strong></td>
                                    <td>${ev.correlation}</td>
                                    <td>${ev.count} instances</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>

                <div class="detail-section">
                    <h3>üí° Hypothesis & Recommendation</h3>
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                        <p style="line-height: 1.8;">
                            <strong style="color: #00d9ff;">Working Hypothesis:</strong><br>
                            ${corr.hypothesis}
                        </p>
                    </div>
                    <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00ff88;">
                        <p style="line-height: 1.8;">
                            <strong style="color: #00ff88;">Recommended Action:</strong><br>
                            ${corr.recommendation}
                        </p>
                        <p style="margin-top: 1rem; font-size: 1.2rem; font-weight: 600; color: #00ff88;">
                            Expected Impact: ${corr.impact}
                        </p>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // ============================================
        // QUALITY MANAGEMENT DRILL-DOWNS
        // ============================================
        function showQualityIssueDetail(issueId) {
            alert(`Detailed quality issue analysis for ${issueId} would open here with full 8D problem solving, CAPA plan, and root cause analysis.`);
        }

        function showNCRDetail(ncrId) {
            alert(`Non-Conformance Report ${ncrId} details would open here with full investigation, corrective actions, and preventive actions.`);
        }

        // ============================================
        // PROJECT MANAGEMENT DRILL-DOWNS
        // ============================================
        function showProjectDetail(projectId) {
            alert(`Project details for ${projectId} would open here with Gantt chart, milestones, resource allocation, budget tracking, and risk management.`);
        }

        // ============================================
        // COMPLIANCE & AUDIT DRILL-DOWNS
        // ============================================
        function showCertificationDetail(certId) {
            alert(`Certification details for ${certId} would open here with audit history, findings, corrective actions, and readiness assessment.`);
        }

        function showFindingDetail(findingId) {
            alert(`Audit finding ${findingId} details would open here with root cause, corrective action plan, responsible parties, and closure evidence.`);
        }

        // ============================================
        // CUSTOMER SUPPORT DRILL-DOWNS
        // ============================================
        function showTicketDetail(ticketId) {
            alert(`Support ticket ${ticketId} details would open here with full conversation history, resolution steps, customer information, and SLA tracking.`);
        }

        // ============================================
        // DASHBOARD ALERT DRILL-DOWNS
        // ============================================
        function showDashboardAlert(alertId) {
            const alerts = {
                'machine-m205-down': {
                    title: 'Machine M-205 DOWN - 4.2 Hours',
                    severity: 'CRITICAL',
                    color: '#ff3366',
                    summary: 'Line 3 CNC machine down due to bearing failure. WO-12352 at risk. Customer DEF Manufacturing affected.',
                    realData: {
                        sensorReadings: [
                            {time: '09:00', vibration: '3.2 mm/s', temp: '78¬∞C', status: 'Normal'},
                            {time: '10:30', vibration: '4.8 mm/s', temp: '82¬∞C', status: 'Warning'},
                            {time: '12:15', vibration: '6.9 mm/s', temp: '91¬∞C', status: 'Critical'},
                            {time: '13:45', vibration: '8.5 mm/s', temp: '95¬∞C', status: 'Shutdown'},
                            {time: '13:46', vibration: '0 mm/s', temp: '---', status: 'Down'}
                        ],
                        productionData: [
                            {shift: 'Day 1', produced: 285, target: 300, efficiency: '95%'},
                            {shift: 'Day 2', produced: 290, target: 300, efficiency: '97%'},
                            {shift: 'Day 3 (before failure)', produced: 120, target: 300, efficiency: '40%'},
                            {shift: 'Current', produced: 0, target: 300, efficiency: '0%'}
                        ],
                        maintenanceHistory: [
                            {date: 'Dec 8', type: 'PM', hours: 4, cost: '$850', notes: 'Routine PM completed'},
                            {date: 'Nov 12', type: 'Corrective', hours: 6, cost: '$2,450', notes: 'Bearing replacement'},
                            {date: 'Oct 15', type: 'Emergency', hours: 8, cost: '$4,200', notes: 'Spindle motor repair'}
                        ]
                    },
                    rootCause: {
                        primary: 'Bearing failure due to inadequate lubrication',
                        fiveWhys: [
                            'Why did machine stop? ‚Üí Bearing seized',
                            'Why did bearing seize? ‚Üí Inadequate lubrication',
                            'Why inadequate lubrication? ‚Üí Lubrication schedule not followed',
                            'Why schedule not followed? ‚Üí Operators skipped PM to meet production targets',
                            'Why skip PM? ‚Üí No enforcement mechanism for mandatory PM during high-volume periods'
                        ],
                        contributingFactors: [
                            'Vibration warnings ignored for 48 hours',
                            'Operating hours: 12,450 (approaching bearing life limit of 15,000)',
                            'Preventive maintenance delayed by 3 days',
                            'High-volume order pressure led to PM shortcuts'
                        ]
                    },
                    impact: {
                        production: {
                            unitsLost: 850,
                            hoursDown: 4.2,
                            linesAffected: 1,
                            shiftImpact: 'Day shift partially lost, evening shift fully lost'
                        },
                        financial: {
                            directRevenueLoss: '$45,000',
                            emergencyRepairCost: '$8,000',
                            expediteFees: '$2,000',
                            latePenalty: '$5,000/day',
                            totalImpact: '$60,000+'
                        },
                        customer: {
                            account: 'DEF Manufacturing (Strategic)',
                            orderValue: '$185,000',
                            completionRisk: 'WO-12352: 34% complete (should be 70%)',
                            deliveryDate: 'Dec 24, 4:00 PM',
                            penaltyClause: '$5,000 per day late',
                            relationshipRisk: 'High - 3rd delay this year'
                        }
                    },
                    actionPlan: [
                        {
                            priority: 'IMMEDIATE',
                            action: 'Emergency bearing replacement',
                            owner: 'Maintenance Team - John Smith',
                            timeline: 'ETA 30 minutes, completion 4 hours',
                            cost: '$8,000',
                            status: 'In Progress'
                        },
                        {
                            priority: 'IMMEDIATE',
                            action: 'Customer notification and recovery plan',
                            owner: 'Sales - Sarah Johnson',
                            timeline: 'Within 1 hour',
                            cost: '$0',
                            status: 'Pending'
                        },
                        {
                            priority: 'SHORT-TERM',
                            action: 'Full lubrication system inspection',
                            owner: 'Maintenance Engineering',
                            timeline: 'Within 24 hours',
                            cost: '$1,500',
                            status: 'Scheduled'
                        },
                        {
                            priority: 'SHORT-TERM',
                            action: 'Install additional vibration sensors',
                            owner: 'Automation Team',
                            timeline: 'This week',
                            cost: '$4,500',
                            status: 'Approved'
                        },
                        {
                            priority: 'LONG-TERM',
                            action: 'Implement predictive maintenance program',
                            owner: 'Operations Director',
                            timeline: 'Q1 2025',
                            cost: '$120,000',
                            status: 'Business case approved'
                        }
                    ]
                },
                'material-shortage-m456': {
                    title: 'Material Stockout in 23 Days',
                    severity: 'CRITICAL',
                    color: '#ff3366',
                    summary: 'Part M-456 will run out in 23 days. Current stock insufficient for demand surge.',
                    realData: {
                        inventoryTrend: [
                            {week: 'Week 1', stock: 2850, consumption: 320, inbound: 0},
                            {week: 'Week 2', stock: 2530, consumption: 340, inbound: 0},
                            {week: 'Week 3', stock: 2190, consumption: 385, inbound: 0},
                            {week: 'Week 4', stock: 1805, consumption: 420, inbound: 0},
                            {week: 'Current', stock: 850, consumption: 465, inbound: 0}
                        ],
                        demandForecast: [
                            {week: 'Next 1', demand: 520, available: 850, gap: 0},
                            {week: 'Next 2', demand: 585, available: 330, gap: 0},
                            {week: 'Next 3', demand: 620, available: -255, gap: 255},
                            {week: 'Next 4', demand: 650, available: -905, gap: 905}
                        ],
                        supplierStatus: [
                            {supplier: 'S-123 (Current)', leadTime: '45 days', reliability: '78%', status: 'Already late'},
                            {supplier: 'Factory B (Internal)', available: '1,200 units', leadTime: '3 days', cost: '$2,800 shipping'},
                            {supplier: 'S-456 (Alternative)', available: '5,000 units', leadTime: '30 days', cost: '+8%'}
                        ]
                    },
                    rootCause: {
                        primary: 'Inadequate safety stock (15 days) combined with demand surge',
                        fiveWhys: [
                            'Why stockout risk? ‚Üí Current stock too low',
                            'Why is stock too low? ‚Üí Consumption rate increased 45%',
                            'Why did consumption increase? ‚Üí Product X promotion launched',
                            'Why wasn\'t inventory increased? ‚Üí Promotion not communicated to supply chain',
                            'Why no communication? ‚Üí Sales and Supply Chain planning disconnected'
                        ],
                        contributingFactors: [
                            'Safety stock policy: 15 days (industry standard: 30 days)',
                            'Supplier S-123 already 10 days late on current order',
                            'Single source dependency - no backup supplier',
                            'Demand forecast error: +45% vs predicted +15%'
                        ]
                    },
                    impact: {
                        production: {
                            affectedWOs: 6,
                            unitsAtRisk: 12500,
                            linesAffected: '3, 5, 7',
                            fullStopDate: 'January 16'
                        },
                        financial: {
                            revenueLoss: '$450,000',
                            expediteCost: '$15,000 (supplier) or $2,800 (Factory B)',
                            customerPenalties: '$85,000',
                            totalImpact: '$535,000 - $547,000'
                        },
                        customer: {
                            ordersAtRisk: 8,
                            customers: 'XYZ Corp, ABC Industries, DEF Manufacturing',
                            onTimeDeliveryImpact: '93.2% ‚Üí 78%',
                            relationshipImpact: 'Severe - Multiple strategic accounts'
                        }
                    },
                    actionPlan: [
                        {
                            priority: 'IMMEDIATE',
                            action: 'Emergency transfer from Factory B',
                            owner: 'Supply Chain - Mike Chen',
                            timeline: '3 days',
                            cost: '$2,800',
                            status: 'Approved - Execute now'
                        },
                        {
                            priority: 'IMMEDIATE',
                            action: 'Qualify alternative supplier S-456',
                            owner: 'Procurement - Lisa Wang',
                            timeline: '2 weeks',
                            cost: '+8% material cost',
                            status: 'In progress'
                        },
                        {
                            priority: 'SHORT-TERM',
                            action: 'Increase safety stock policy to 30 days',
                            owner: 'Supply Chain Director',
                            timeline: 'This month',
                            cost: '$140K carrying cost/year',
                            status: 'Business case approved'
                        },
                        {
                            priority: 'LONG-TERM',
                            action: 'Implement cross-site inventory visibility',
                            owner: 'IT / Supply Chain',
                            timeline: 'Q1 2025',
                            cost: '$45,000',
                            status: 'Planned'
                        }
                    ]
                },
                'oee-improvement': {
                    title: 'OEE Improvement Potential: +7.1%',
                    severity: 'OPPORTUNITY',
                    color: '#00ff88',
                    summary: 'Combined improvements could increase OEE from 82.4% to 89.5%, generating $2.86M annually.',
                    realData: {
                        currentState: [
                            {component: 'Availability', current: '89.2%', worldClass: '95%', gap: '5.8%'},
                            {component: 'Performance', current: '94.8%', worldClass: '98%', gap: '3.2%'},
                            {component: 'Quality', current: '97.5%', worldClass: '99%', gap: '1.5%'}
                        ],
                        improvementOpportunities: [
                            {initiative: 'Fix Line 3 breakdown', impact: '+3.8% OEE', cost: '$2,500', timeframe: '48 hours'},
                            {initiative: 'Reduce minor stoppages', impact: '+2.5% OEE', cost: '$25,000', timeframe: '1 month'},
                            {initiative: 'Improve quality on Line 3', impact: '+0.8% OEE', cost: '$12,000', timeframe: '2 weeks'}
                        ],
                        benchmarkData: [
                            {company: 'Your Company', oee: '82.4%', availability: '89.2%', performance: '94.8%', quality: '97.5%'},
                            {company: 'Industry Average', oee: '78%', availability: '86%', performance: '92%', quality: '96%'},
                            {company: 'World Class', oee: '92%', availability: '95%', performance: '98%', quality: '99%'}
                        ]
                    },
                    rootCause: {
                        primary: 'Three addressable gaps: equipment reliability, process optimization, quality control',
                        analysis: [
                            'Availability gap (5.8%): Primarily driven by unplanned downtime on Line 3',
                            'Performance gap (3.2%): Minor stoppages and reduced speed account for most loss',
                            'Quality gap (1.5%): Supplier quality issues and operator certification gaps'
                        ],
                        benchmark: 'Currently at 85th percentile of industry, but only 65th percentile vs world class'
                    },
                    impact: {
                        production: {
                            currentOutput: '45,420 units/month',
                            improvedOutput: '48,645 units/month',
                            additionalUnits: '3,225 units/month',
                            capacityGain: '+7.1%'
                        },
                        financial: {
                            additionalRevenue: '$238K/month',
                            totalInvestment: '$39,500',
                            netBenefit: '$2.82M/year',
                            roi: '71.4x',
                            payback: '2 weeks'
                        },
                        strategic: {
                            competitivePosition: 'Move from industry average to top quartile',
                            customerSatisfaction: 'OTIF improvement: 93.2% ‚Üí 97.5%',
                            employeeMorale: 'Less firefighting, more systematic improvement'
                        }
                    },
                    actionPlan: [
                        {
                            priority: 'IMMEDIATE',
                            action: 'Fix Line 3 Machine M-205',
                            owner: 'Maintenance - John Smith',
                            timeline: '48 hours',
                            cost: '$2,500',
                            status: 'In progress'
                        },
                        {
                            priority: 'SHORT-TERM',
                            action: 'Implement 5S on Lines 1-8',
                            owner: 'Operations - All Line Leads',
                            timeline: '4 weeks',
                            cost: '$8,000',
                            status: 'Kick-off next Monday'
                        },
                        {
                            priority: 'SHORT-TERM',
                            action: 'Operator training on minor stoppage reduction',
                            owner: 'Training - HR',
                            timeline: '2 weeks',
                            cost: '$17,000',
                            status: 'Scheduled'
                        },
                        {
                            priority: 'SHORT-TERM',
                            action: '100% incoming inspection for Supplier S-123',
                            owner: 'Quality - QC Team',
                            timeline: 'Start immediately',
                            cost: '$12,000/year',
                            status: 'Approved'
                        }
                    ]
                }
            };

            // Get the alert data or use a default
            const alert = alerts[alertId] || {
                title: 'Alert Details',
                severity: 'INFO',
                color: '#00d9ff',
                summary: 'Detailed analysis for this alert.',
                realData: {message: 'Data not yet implemented for this specific alert.'},
                rootCause: {primary: 'To be analyzed'},
                impact: {description: 'Impact analysis pending'},
                actionPlan: []
            };

            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">${alert.title}</h2>
                        <div class="drill-down-breadcrumb">
                            Dashboard > <span style="color: ${alert.color};">${alert.severity}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="detail-section" style="background: linear-gradient(135deg, rgba(${alert.color === '#ff3366' ? '255, 51, 102' : alert.color === '#ffaa00' ? '255, 170, 0' : '0, 255, 136'}, 0.15), rgba(${alert.color === '#ff3366' ? '255, 51, 102' : alert.color === '#ffaa00' ? '255, 170, 0' : '0, 255, 136'}, 0.05)); border-left: 4px solid ${alert.color};">
                    <h3>üìã Executive Summary</h3>
                    <p style="font-size: 1.1rem; line-height: 1.8;">${alert.summary}</p>
                </div>

                ${alert.realData.sensorReadings ? `
                <div class="detail-section">
                    <h3>üìä Real Sensor Data - Timeline</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Vibration (mm/s)</th>
                                <th>Temperature</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${alert.realData.sensorReadings.map(reading => `
                                <tr>
                                    <td><strong>${reading.time}</strong></td>
                                    <td style="color: ${reading.vibration === '0 mm/s' ? '#ff3366' : parseFloat(reading.vibration) > 6 ? '#ff3366' : parseFloat(reading.vibration) > 4 ? '#ffaa00' : '#00ff88'};">
                                        ${reading.vibration}
                                    </td>
                                    <td style="color: ${reading.temp === '---' ? '#ff3366' : parseFloat(reading.temp) > 90 ? '#ff3366' : parseFloat(reading.temp) > 80 ? '#ffaa00' : '#00ff88'};">
                                        ${reading.temp}
                                    </td>
                                    <td><span class="status-badge ${reading.status === 'Down' || reading.status === 'Shutdown' ? 'down' : reading.status === 'Critical' || reading.status === 'Warning' ? 'maintenance' : 'operational'}">
                                        ${reading.status}
                                    </span></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                ${alert.realData.productionData ? `
                <div class="detail-section">
                    <h3>üè≠ Production Data</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Period</th>
                                <th>Units Produced</th>
                                <th>Target</th>
                                <th>Efficiency</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${alert.realData.productionData.map(prod => `
                                <tr>
                                    <td><strong>${prod.shift}</strong></td>
                                    <td style="color: ${prod.produced === 0 ? '#ff3366' : prod.produced < prod.target * 0.5 ? '#ffaa00' : '#00ff88'};">
                                        ${prod.produced}
                                    </td>
                                    <td>${prod.target}</td>
                                    <td style="color: ${parseFloat(prod.efficiency) === 0 ? '#ff3366' : parseFloat(prod.efficiency) < 50 ? '#ffaa00' : '#00ff88'};">
                                        ${prod.efficiency}
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                ${alert.realData.inventoryTrend ? `
                <div class="detail-section">
                    <h3>üì¶ Inventory Trend Analysis</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Week</th>
                                <th>Stock Level</th>
                                <th>Consumption</th>
                                <th>Inbound</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${alert.realData.inventoryTrend.map(inv => `
                                <tr>
                                    <td><strong>${inv.week}</strong></td>
                                    <td style="color: ${inv.stock < 1000 ? '#ff3366' : inv.stock < 2000 ? '#ffaa00' : '#00ff88'};">
                                        ${inv.stock} units
                                    </td>
                                    <td>${inv.consumption} units</td>
                                    <td>${inv.inbound} units</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                ${alert.realData.demandForecast ? `
                <div class="detail-section">
                    <h3>üìà Demand Forecast</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Week</th>
                                <th>Demand</th>
                                <th>Available After</th>
                                <th>Gap</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${alert.realData.demandForecast.map(fct => `
                                <tr>
                                    <td><strong>${fct.week}</strong></td>
                                    <td>${fct.demand} units</td>
                                    <td style="color: ${fct.available < 0 ? '#ff3366' : fct.available < 500 ? '#ffaa00' : '#00ff88'};">
                                        ${fct.available} units
                                    </td>
                                    <td style="color: ${fct.gap > 0 ? '#ff3366' : '#00ff88'};">
                                        ${fct.gap > 0 ? `-${fct.gap}` : '0'} units
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                ${alert.realData.currentState ? `
                <div class="detail-section">
                    <h3>üìä Current State Analysis</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Current</th>
                                <th>World Class</th>
                                <th>Gap</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${alert.realData.currentState.map(state => `
                                <tr>
                                    <td><strong>${state.component}</strong></td>
                                    <td>${state.current}</td>
                                    <td style="color: #00ff88;">${state.worldClass}</td>
                                    <td style="color: #ffaa00;">${state.gap}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                <div class="detail-section">
                    <h3>üîç Root Cause Analysis</h3>
                    <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff; margin-bottom: 1.5rem;">
                        <h4 style="color: #00d9ff; margin-bottom: 1rem;">Primary Root Cause</h4>
                        <p style="font-size: 1.1rem; line-height: 1.8;">${alert.rootCause.primary}</p>
                    </div>

                    ${alert.rootCause.fiveWhys ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <h4 style="color: #00d9ff; margin-bottom: 1rem;">5 Whys Analysis</h4>
                        <ol style="color: #8b92b0; line-height: 2; font-size: 1.05rem;">
                            ${alert.rootCause.fiveWhys.map(why => `<li>${why}</li>`).join('')}
                        </ol>
                    </div>
                    ` : ''}

                    ${alert.rootCause.contributingFactors ? `
                    <div style="background: rgba(255, 170, 0, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffaa00;">
                        <h4 style="color: #ffaa00; margin-bottom: 1rem;">Contributing Factors</h4>
                        <ul style="color: #8b92b0; line-height: 2;">
                            ${alert.rootCause.contributingFactors.map(factor => `<li>${factor}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                </div>

                <div class="detail-section">
                    <h3>üí• Impact Analysis</h3>
                    
                    ${alert.impact.production ? `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #00d9ff; margin-bottom: 1rem;">üè≠ Production Impact</h4>
                        <div class="detail-grid">
                            ${Object.entries(alert.impact.production).map(([key, value]) => `
                                <div class="detail-item">
                                    <div class="detail-label">${key.replace(/([A-Z])/g, ' $1').trim()}</div>
                                    <div class="detail-value">${value}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}

                    ${alert.impact.financial ? `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #ff3366; margin-bottom: 1rem;">üí∞ Financial Impact</h4>
                        <div class="detail-grid">
                            ${Object.entries(alert.impact.financial).map(([key, value]) => `
                                <div class="detail-item">
                                    <div class="detail-label">${key.replace(/([A-Z])/g, ' $1').trim()}</div>
                                    <div class="detail-value" style="color: ${key.includes('total') || key.includes('loss') || key.includes('penalty') ? '#ff3366' : '#8b92b0'};">${value}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}

                    ${alert.impact.customer ? `
                    <div style="background: rgba(255, 51, 102, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ff3366;">
                        <h4 style="color: #ff3366; margin-bottom: 1rem;">üë• Customer Impact</h4>
                        <div class="detail-grid">
                            ${Object.entries(alert.impact.customer).map(([key, value]) => `
                                <div class="detail-item">
                                    <div class="detail-label">${key.replace(/([A-Z])/g, ' $1').trim()}</div>
                                    <div class="detail-value">${value}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                </div>

                ${alert.actionPlan && alert.actionPlan.length > 0 ? `
                <div class="detail-section">
                    <h3>‚úÖ Action Plan</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Priority</th>
                                <th>Action</th>
                                <th>Owner</th>
                                <th>Timeline</th>
                                <th>Cost</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${alert.actionPlan.map(action => `
                                <tr>
                                    <td><span class="status-badge ${action.priority === 'IMMEDIATE' ? 'down' : action.priority === 'SHORT-TERM' ? 'maintenance' : 'operational'}">
                                        ${action.priority}
                                    </span></td>
                                    <td><strong>${action.action}</strong></td>
                                    <td>${action.owner}</td>
                                    <td>${action.timeline}</td>
                                    <td>${action.cost}</td>
                                    <td style="color: ${action.status.includes('Progress') ? '#00d9ff' : action.status.includes('Approved') || action.status.includes('Execute') ? '#00ff88' : '#8b92b0'};">
                                        ${action.status}
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border: 2px solid #00d9ff; margin-top: 1.5rem; text-align: center;">
                    <button class="btn btn-primary" style="font-size: 1.1rem; padding: 0.75rem 2rem;" onclick="alert('This would create a work order in your MES/ERP system with all the details from this alert.')">
                        üìã Create Work Order
                    </button>
                    <button class="btn btn-secondary" style="font-size: 1.1rem; padding: 0.75rem 2rem; margin-left: 1rem;" onclick="alert('This would export the full analysis to PDF for documentation.')">
                        üìÑ Export Analysis
                    </button>
                </div>
            `;

            showDrillDown(content);
        }

        // ============================================
        // WHAT-IF SIMULATION ENGINE
        // ============================================
        function runWhatIfSimulation() {
            const prompt = document.getElementById('what-if-prompt').value.trim();
            
            if (!prompt) {
                alert('Please describe your scenario first!');
                return;
            }

            // Parse the prompt to determine scenario type
            const promptLower = prompt.toLowerCase();
            let scenarioData = null;

            // Match scenario patterns
            if (promptLower.includes('add') && (promptLower.includes('shift') || promptLower.includes('3rd shift'))) {
                scenarioData = getScenario_AddShift();
            } else if (promptLower.includes('supplier') && (promptLower.includes('stop') || promptLower.includes('fail'))) {
                scenarioData = getScenario_SupplierFail();
            } else if (promptLower.includes('safety stock') || (promptLower.includes('increase') && promptLower.includes('stock'))) {
                scenarioData = getScenario_IncreaseSafetyStock();
            } else if (promptLower.includes('machine') && (promptLower.includes('break') || promptLower.includes('down'))) {
                scenarioData = getScenario_MachineBreakdown();
            } else if (promptLower.includes('predictive maintenance')) {
                scenarioData = getScenario_PredictiveMaintenance();
            } else if (promptLower.includes('demand') && promptLower.includes('increase')) {
                scenarioData = getScenario_DemandIncrease();
            } else {
                // Default/generic scenario
                scenarioData = getScenario_Generic(prompt);
            }

            // Show the simulation results
            displaySimulationResults(scenarioData);
        }

        function getScenario_AddShift() {
            return {
                title: 'Add 3rd Shift on Line 3',
                initialChange: {
                    description: 'Add night shift (10PM-6AM) on Line 3 with 8 operators and 1 supervisor',
                    directImpact: 'Operating hours increase from 16hrs/day to 24hrs/day (+50%)'
                },
                cascadingSteps: [
                    {
                        step: 1,
                        title: 'Immediate Production Impact',
                        dataObjects: [
                            {object: 'Line 3 Schedule', before: '2 shifts (6AM-10PM)', after: '3 shifts (24/7)', change: '+8 hours/day'},
                            {object: 'Line 3 Capacity', before: '10,000 units/month', after: '13,300 units/month', change: '+3,300 units (+33%)'},
                            {object: 'Line 3 OEE Target', before: '45%', after: '52% (with learning curve)', change: '+7%'}
                        ],
                        businessProcesses: [
                            {process: 'Production Scheduling', impact: 'Must create 3rd shift schedule with rotation policy'},
                            {process: 'Work Order Planning', impact: 'Can accept +3,300 units/month additional orders'}
                        ]
                    },
                    {
                        step: 2,
                        title: 'Workforce & HR Impact',
                        dataObjects: [
                            {object: 'Line 3 Headcount', before: '16 operators', after: '24 operators', change: '+8 operators'},
                            {object: 'Supervisor Count', before: '2 supervisors', after: '3 supervisors', change: '+1 supervisor'},
                            {object: 'Training Hours Required', before: '0', after: '320 hours', change: '40 hrs/person √ó 8 people'},
                            {object: 'Certification Status', before: '16 certified', after: '24 certified', change: '+8 certifications needed'}
                        ],
                        businessProcesses: [
                            {process: 'Recruitment', impact: '4-week hiring process for 8 operators + 1 supervisor'},
                            {process: 'Onboarding & Training', impact: '2-week onboarding + 4-week equipment training'},
                            {process: 'Payroll', impact: 'Monthly payroll increases by $37K (labor + benefits)'}
                        ]
                    },
                    {
                        step: 3,
                        title: 'Maintenance & Quality Impact',
                        dataObjects: [
                            {object: 'PM Schedule', before: 'Maintenance during 10PM-6AM window', after: 'Reduced to weekend windows only', change: 'PM window -66%'},
                            {object: 'Spare Parts Inventory', before: '$25K', after: '$35K', change: '+$10K buffer needed'},
                            {object: 'Quality Inspection Coverage', before: '2-shift coverage', after: '3-shift coverage', change: '+1 QC inspector needed'}
                        ],
                        businessProcesses: [
                            {process: 'Preventive Maintenance', impact: 'Must reschedule all PM to weekend windows'},
                            {process: 'Quality Control', impact: 'Need 24/7 QC coverage, hire 1 night QC inspector'},
                            {process: 'Spare Parts Management', impact: 'Increase buffer stock for night shift breakdowns'}
                        ]
                    },
                    {
                        step: 4,
                        title: 'Supply Chain & Logistics Impact',
                        dataObjects: [
                            {object: 'Part M-456 Consumption', before: '465 units/week', after: '620 units/week', change: '+155 units/week (+33%)'},
                            {object: 'Raw Material Deliveries', before: '2 deliveries/week', after: '3 deliveries/week', change: '+1 delivery/week'},
                            {object: 'Finished Goods Shipping', before: '10,000 units/month', after: '13,300 units/month', change: '+3,300 units/month'}
                        ],
                        businessProcesses: [
                            {process: 'Procurement', impact: 'Must negotiate higher volumes with suppliers (+33%)'},
                            {process: 'Inbound Logistics', impact: 'Coordinate night deliveries for material replenishment'},
                            {process: 'Outbound Logistics', impact: 'Additional truck capacity needed (+33%)'}
                        ]
                    },
                    {
                        step: 5,
                        title: 'Customer & Revenue Impact',
                        dataObjects: [
                            {object: 'Available Capacity', before: '10,000 units/month', after: '13,300 units/month', change: '+3,300 units'},
                            {object: 'Revenue Potential', before: '$850K/month', after: '$1.03M/month', change: '+$180K/month'},
                            {object: 'Customer OTIF', before: '93.2%', after: '96.5% (predicted)', change: '+3.3% from reduced backlog'},
                            {object: 'Order Lead Time', before: '15 days', after: '11 days', change: '-4 days (26% faster)'}
                        ],
                        businessProcesses: [
                            {process: 'Sales & Order Management', impact: 'Can accept larger orders from existing customers'},
                            {process: 'Customer Service', impact: 'Improved OTIF and lead times enhance satisfaction'},
                            {process: 'Revenue Recognition', impact: 'Additional $180K/month revenue starting Week 12'}
                        ]
                    }
                ],
                financialImpact: {
                    oneTime: [
                        {item: 'Recruitment & hiring', cost: '$12,000'},
                        {item: 'Training & onboarding', cost: '$18,000'},
                        {item: 'Facilities upgrades (lighting, break room)', cost: '$20,000'},
                        {item: 'IT & systems setup', cost: '$3,000'},
                        {item: 'Spare parts buffer stock', cost: '$10,000'},
                        {item: 'Total One-Time Investment', cost: '$63,000', highlight: true}
                    ],
                    recurring: [
                        {item: '8 Operators ($4K each)', cost: '$32,000/month'},
                        {item: '1 Supervisor', cost: '$5,000/month'},
                        {item: 'Additional overhead (utilities, supplies)', cost: '$8,000/month'},
                        {item: 'Total Recurring Cost', cost: '$45,000/month', highlight: true}
                    ],
                    revenue: [
                        {item: 'Additional production (3,300 units)', revenue: '+$180,000/month'},
                        {item: 'Less recurring costs', revenue: '-$45,000/month'},
                        {item: 'Net Monthly Benefit', revenue: '+$135,000/month', highlight: true}
                    ],
                    roi: {
                        payback: '2 weeks',
                        monthlyROI: '3.0x',
                        annualValue: '$1.62M',
                        fiveYearNPV: '$8.1M'
                    }
                },
                finalOutcome: {
                    summary: 'Adding a 3rd shift increases capacity by 33%, generating $135K/month net benefit with a 2-week payback period.',
                    recommendation: 'STRONGLY RECOMMENDED',
                    confidence: '95%',
                    keyBenefits: [
                        'Increased capacity: +3,300 units/month (+33%)',
                        'Improved customer service: OTIF 93.2% ‚Üí 96.5%',
                        'Reduced lead time: 15 days ‚Üí 11 days',
                        'Strong financial return: 3.0x ROI, $1.62M annual value'
                    ],
                    keyRisks: [
                        'Night shift typically shows 10-18% lower OEE than day shift',
                        'Recruitment challenge: Need 9 qualified people in 4 weeks',
                        'Reduced maintenance windows may increase breakdown risk',
                        'Learning curve: 8-12 weeks to reach target OEE'
                    ],
                    nextSteps: [
                        'Immediate: Approve budget and start recruitment process',
                        'Week 1-4: Hire 8 operators + 1 supervisor',
                        'Week 5-7: Complete training and certifications',
                        'Week 8: Launch 3rd shift',
                        'Week 8-12: Monitor and optimize (target: 80% OEE by Week 12)'
                    ]
                }
            };
        }

        function getScenario_SupplierFail() {
            return {
                title: 'Supplier S-123 Stops Delivering Part M-456',
                initialChange: {
                    description: 'Supplier S-123 (single source for Part M-456) has a factory fire and cannot deliver for 90 days',
                    directImpact: 'Current stock: 850 units (15 days at current consumption rate of 465 units/week)'
                },
                cascadingSteps: [
                    {
                        step: 1,
                        title: 'Immediate Inventory Crisis',
                        dataObjects: [
                            {object: 'Part M-456 Stock', before: '850 units', after: '0 units in 15 days', change: 'STOCKOUT in 15 days'},
                            {object: 'Inbound Deliveries', before: '500 units/week', after: '0 units/week', change: '-100%'},
                            {object: 'Consumption Rate', before: '465 units/week', after: 'Cannot sustain', change: 'Production stop imminent'}
                        ],
                        businessProcesses: [
                            {process: 'Inventory Management', impact: 'CRITICAL: Stock depletes to zero in 15 days'},
                            {process: 'Production Planning', impact: 'Must halt Lines 3, 5, 7 when stock reaches zero'}
                        ]
                    },
                    {
                        step: 2,
                        title: 'Production Shutdown Impact',
                        dataObjects: [
                            {object: 'Line 3 Status', before: 'Operational', after: 'DOWN (no material)', change: 'Production stopped'},
                            {object: 'Line 5 Status', before: 'Operational', after: 'DOWN (no material)', change: 'Production stopped'},
                            {object: 'Line 7 Status', before: 'Operational', after: 'DOWN (no material)', change: 'Production stopped'},
                            {object: 'Total Capacity Lost', before: '45,420 units/month', after: '20,800 units/month', change: '-24,620 units (-54%)'}
                        ],
                        businessProcesses: [
                            {process: 'Production Operations', impact: '3 of 8 lines shutdown, 45 operators idle'},
                            {process: 'Work Order Management', impact: '18 active work orders cannot be completed'},
                            {process: 'Labor Management', impact: 'Decision needed: Layoff, reassign, or pay idle workers'}
                        ]
                    },
                    {
                        step: 3,
                        title: 'Customer & Revenue Collapse',
                        dataObjects: [
                            {object: 'Active Orders', before: '24 orders', after: '18 cannot be fulfilled', change: '-75% of orders at risk'},
                            {object: 'Affected Customers', before: '0', after: '12 customers', change: '12 customers impacted'},
                            {object: 'Revenue at Risk', before: '$2.8M/month', after: '$1.2M/month', change: '-$1.6M/month (-57%)'},
                            {object: 'Late Penalties', before: '$0', after: '$250K', change: '$250K in contractual penalties'}
                        ],
                        businessProcesses: [
                            {process: 'Customer Communication', impact: 'Must notify 12 customers of delivery delays'},
                            {process: 'Sales & Account Management', impact: 'Emergency negotiations to retain accounts'},
                            {process: 'Finance', impact: 'Revenue forecast reduced by 57%, cash flow crisis'}
                        ]
                    },
                    {
                        step: 4,
                        title: 'Emergency Recovery Actions',
                        dataObjects: [
                            {object: 'Alternative Supplier Search', before: 'No action', after: 'Qualify S-456 emergency', change: '30-day lead time'},
                            {object: 'Factory B Transfer', before: 'No transfer', after: '1,200 units available', change: '3-day emergency transfer'},
                            {object: 'Customer Priority Allocation', before: 'FIFO', after: 'Strategic account priority', change: 'Revised fulfillment order'}
                        ],
                        businessProcesses: [
                            {process: 'Procurement', impact: 'Emergency supplier qualification (waive normal 90-day process)'},
                            {process: 'Supply Chain', impact: 'Arrange emergency inter-factory transfer from Factory B'},
                            {process: 'Executive Management', impact: 'Daily crisis management meetings'}
                        ]
                    },
                    {
                        step: 5,
                        title: 'Long-Term Supply Chain Restructuring',
                        dataObjects: [
                            {object: 'Supplier Strategy', before: 'Single source', after: 'Dual source implemented', change: 'S-456 qualified as backup'},
                            {object: 'Safety Stock Policy', before: '15 days', after: '30 days', change: '+100% safety stock'},
                            {object: 'Cross-Site Visibility', before: 'None', after: 'Real-time inventory dashboard', change: 'System implemented'}
                        ],
                        businessProcesses: [
                            {process: 'Supply Chain Strategy', impact: 'Eliminate all single-source dependencies'},
                            {process: 'Risk Management', impact: 'Quarterly supplier risk assessments implemented'},
                            {process: 'IT Systems', impact: 'Cross-factory inventory visibility system deployed'}
                        ]
                    }
                ],
                financialImpact: {
                    losses: [
                        {item: 'Lost revenue (90-day crisis)', cost: '$4.8M'},
                        {item: 'Customer late penalties', cost: '$250K'},
                        {item: 'Idle labor costs', cost: '$180K'},
                        {item: 'Emergency expedite fees', cost: '$75K'},
                        {item: 'Customer relationship damage (est.)', cost: '$500K lifetime value'},
                        {item: 'Total Crisis Cost', cost: '$5.8M', highlight: true}
                    ],
                    recovery: [
                        {item: 'Emergency Factory B transfer (1,200 units)', cost: '$2,800'},
                        {item: 'Expedited alternative supplier qualification', cost: '$25,000'},
                        {item: 'Emergency air freight (first 3 deliveries)', cost: '$45,000'},
                        {item: 'Total Recovery Investment', cost: '$72,800', highlight: true}
                    ],
                    prevention: [
                        {item: 'Dual-source setup (one-time)', cost: '$45,000'},
                        {item: 'Increased safety stock carrying cost', cost: '$140K/year'},
                        {item: 'Cross-site inventory system', cost: '$85,000 one-time'},
                        {item: 'Total Prevention Investment', cost: '$270K', highlight: true}
                    ],
                    netImpact: {
                        crisisCost: '$5.8M',
                        recoveryInvestment: '$72.8K',
                        preventionValue: '$270K prevents $5.8M crisis',
                        roi: '21.5x prevention ROI'
                    }
                },
                finalOutcome: {
                    summary: 'Single-source supplier failure causes 54% production capacity loss, $5.8M total impact over 90 days. Prevention through dual-sourcing costs $270K but avoids catastrophic loss.',
                    recommendation: 'CRITICAL: IMPLEMENT DUAL-SOURCING IMMEDIATELY',
                    confidence: '99%',
                    keyBenefits: [
                        'AVOIDED: $5.8M crisis cost if prevention implemented',
                        'Dual-sourcing reduces risk by 75%',
                        'Safety stock increase prevents 90% of stockouts',
                        'Cross-site visibility enables rapid response'
                    ],
                    keyRisks: [
                        'CURRENT STATE: Catastrophic vulnerability to supplier failure',
                        '12 strategic customer relationships at risk',
                        '45 employees affected by production shutdown',
                        'Competitor opportunity to capture market share'
                    ],
                    nextSteps: [
                        'IMMEDIATE: Execute emergency Factory B transfer (1,200 units)',
                        'Week 1: Qualify alternative supplier S-456 (waive normal 90-day process)',
                        'Week 2: Place emergency order with S-456 for 5,000 units',
                        'Week 4: Implement dual-source strategy permanently',
                        'Month 2: Increase safety stock policy from 15 to 30 days',
                        'Month 3: Deploy cross-factory inventory visibility system'
                    ]
                }
            };
        }

        function getScenario_Generic(prompt) {
            return {
                title: 'Custom Scenario: ' + prompt.substring(0, 50) + (prompt.length > 50 ? '...' : ''),
                initialChange: {
                    description: prompt,
                    directImpact: 'Analyzing scenario impact across all systems...'
                },
                cascadingSteps: [
                    {
                        step: 1,
                        title: 'Direct Operational Impact',
                        dataObjects: [
                            {object: 'Primary affected system', before: 'Current state', after: 'New state', change: 'Impact to be calculated'}
                        ],
                        businessProcesses: [
                            {process: 'Affected process 1', impact: 'Impact analysis pending'}
                        ]
                    }
                ],
                financialImpact: {
                    oneTime: [{item: 'Analysis pending', cost: 'TBD'}],
                    recurring: [{item: 'Analysis pending', cost: 'TBD'}],
                    revenue: [{item: 'Analysis pending', revenue: 'TBD'}],
                    roi: {payback: 'TBD', monthlyROI: 'TBD', annualValue: 'TBD', fiveYearNPV: 'TBD'}
                },
                finalOutcome: {
                    summary: 'Detailed simulation for this custom scenario requires additional parameters. Please select a pre-configured scenario or provide more specific details.',
                    recommendation: 'ANALYSIS PENDING',
                    confidence: 'N/A',
                    keyBenefits: ['Analysis in progress...'],
                    keyRisks: ['Analysis in progress...'],
                    nextSteps: ['Refine scenario parameters', 'Run detailed simulation', 'Review recommendations']
                }
            };
        }

        function displaySimulationResults(data) {
            const resultsDiv = document.getElementById('simulation-results');
            
            let stepsHTML = '';
            data.cascadingSteps.forEach(step => {
                stepsHTML += `
                    <div class="detail-section">
                        <h3>Step ${step.step}: ${step.title}</h3>
                        
                        <h4 style="color: #00d9ff; margin-top: 1.5rem;">üìä Data Objects Affected</h4>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Data Object</th>
                                    <th>Before</th>
                                    <th>After</th>
                                    <th>Change</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${step.dataObjects.map(obj => `
                                    <tr>
                                        <td><strong>${obj.object}</strong></td>
                                        <td>${obj.before}</td>
                                        <td style="color: ${obj.after.includes('DOWN') || obj.after.includes('0 units') ? '#ff3366' : '#00ff88'};">
                                            ${obj.after}
                                        </td>
                                        <td style="color: ${obj.change.includes('-') || obj.change.includes('stop') || obj.change.includes('DOWN') ? '#ff3366' : obj.change.includes('+') ? '#00ff88' : '#00d9ff'};">
                                            ${obj.change}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <h4 style="color: #ffaa00; margin-top: 1.5rem;">‚öôÔ∏è Business Processes Impacted</h4>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Process</th>
                                    <th>Impact Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${step.businessProcesses.map(proc => `
                                    <tr>
                                        <td><strong>${proc.process}</strong></td>
                                        <td>${proc.impact}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            });

            const content = `
                <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff; margin-bottom: 2rem;">
                    <h2 style="color: #00d9ff; margin-bottom: 1rem;">üìä Simulation: ${data.title}</h2>
                    <div style="margin-bottom: 1rem;">
                        <strong>Initial Change:</strong><br>
                        ${data.initialChange.description}
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #ffaa00;">Direct Impact:</strong> ${data.initialChange.directImpact}
                    </div>
                </div>

                <h3 class="section-title">üîÑ Cascading Impact Analysis</h3>
                ${stepsHTML}

                <div class="detail-section">
                    <h3>üí∞ Financial Impact Analysis</h3>
                    
                    ${data.financialImpact.oneTime ? `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #00d9ff;">One-Time Costs</h4>
                        <table class="asset-table">
                            <tbody>
                                ${data.financialImpact.oneTime.map(item => `
                                    <tr style="${item.highlight ? 'background: rgba(0, 217, 255, 0.1); font-weight: 600;' : ''}">
                                        <td>${item.item}</td>
                                        <td style="text-align: right; ${item.highlight ? 'color: #00d9ff; font-size: 1.2rem;' : ''}">${item.cost}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ` : ''}

                    ${data.financialImpact.recurring ? `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #ffaa00;">Recurring Costs</h4>
                        <table class="asset-table">
                            <tbody>
                                ${data.financialImpact.recurring.map(item => `
                                    <tr style="${item.highlight ? 'background: rgba(255, 170, 0, 0.1); font-weight: 600;' : ''}">
                                        <td>${item.item}</td>
                                        <td style="text-align: right; ${item.highlight ? 'color: #ffaa00; font-size: 1.2rem;' : ''}">${item.cost}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ` : ''}

                    ${data.financialImpact.revenue ? `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #00ff88;">Revenue Impact</h4>
                        <table class="asset-table">
                            <tbody>
                                ${data.financialImpact.revenue.map(item => `
                                    <tr style="${item.highlight ? 'background: rgba(0, 255, 136, 0.1); font-weight: 600;' : ''}">
                                        <td>${item.item}</td>
                                        <td style="text-align: right; ${item.highlight ? 'color: #00ff88; font-size: 1.2rem;' : ''}">${item.revenue}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ` : ''}

                    ${data.financialImpact.losses ? `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #ff3366;">Total Losses</h4>
                        <table class="asset-table">
                            <tbody>
                                ${data.financialImpact.losses.map(item => `
                                    <tr style="${item.highlight ? 'background: rgba(255, 51, 102, 0.1); font-weight: 600;' : ''}">
                                        <td>${item.item}</td>
                                        <td style="text-align: right; ${item.highlight ? 'color: #ff3366; font-size: 1.2rem;' : ''}">${item.cost}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ` : ''}

                    <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border: 2px solid #00ff88;">
                        <h4 style="color: #00ff88; margin-bottom: 1rem;">üìà ROI Summary</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Payback Period</div>
                                <div class="detail-value" style="color: #00ff88;">${data.financialImpact.roi.payback}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Monthly ROI</div>
                                <div class="detail-value" style="color: #00ff88;">${data.financialImpact.roi.monthlyROI}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Annual Value</div>
                                <div class="detail-value" style="color: #00ff88;">${data.financialImpact.roi.annualValue}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">5-Year NPV</div>
                                <div class="detail-value" style="color: #00ff88; font-size: 1.5rem;">${data.financialImpact.roi.fiveYearNPV}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üéØ Final Outcome & Recommendation</h3>
                    
                    <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <p style="font-size: 1.1rem; line-height: 1.8;">${data.finalOutcome.summary}</p>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00ff88;">
                            <h4 style="color: #00ff88; margin-bottom: 1rem;">‚úì Key Benefits</h4>
                            <ul style="line-height: 2; color: #8b92b0;">
                                ${data.finalOutcome.keyBenefits.map(benefit => `<li>${benefit}</li>`).join('')}
                            </ul>
                        </div>
                        <div style="background: rgba(255, 51, 102, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ff3366;">
                            <h4 style="color: #ff3366; margin-bottom: 1rem;">‚ö†Ô∏è Key Risks</h4>
                            <ul style="line-height: 2; color: #8b92b0;">
                                ${data.finalOutcome.keyRisks.map(risk => `<li>${risk}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div style="background: ${data.finalOutcome.recommendation.includes('STRONGLY') || data.finalOutcome.recommendation.includes('CRITICAL') ? 'rgba(0, 255, 136, 0.15)' : data.finalOutcome.recommendation.includes('CAUTION') ? 'rgba(255, 170, 0, 0.15)' : 'rgba(0, 217, 255, 0.15)'}; padding: 1.5rem; border-radius: 8px; border: 2px solid ${data.finalOutcome.recommendation.includes('STRONGLY') || data.finalOutcome.recommendation.includes('CRITICAL') ? '#00ff88' : data.finalOutcome.recommendation.includes('CAUTION') ? '#ffaa00' : '#00d9ff'}; margin-bottom: 1.5rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 1.3rem; font-weight: 600; margin-bottom: 0.5rem; color: ${data.finalOutcome.recommendation.includes('STRONGLY') || data.finalOutcome.recommendation.includes('CRITICAL') ? '#00ff88' : data.finalOutcome.recommendation.includes('CAUTION') ? '#ffaa00' : '#00d9ff'};">
                                    ${data.finalOutcome.recommendation}
                                </div>
                                <div style="color: #8b92b0;">
                                    Confidence Level: ${data.finalOutcome.confidence}
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="showImplementationPlan('${data.title.toLowerCase().replace(/[^a-z0-9]/g, '-')}')">
                                Create Implementation Plan
                            </button>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px;">
                        <h4 style="color: #00d9ff; margin-bottom: 1rem;">üìã Next Steps</h4>
                        <ol style="line-height: 2; color: #8b92b0; font-size: 1.05rem;">
                            ${data.finalOutcome.nextSteps.map(step => `<li>${step}</li>`).join('')}
                        </ol>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-secondary" onclick="document.getElementById('simulation-results').style.display='none'; document.getElementById('what-if-prompt').value='';">
                        ‚Üê Run Another Simulation
                    </button>
                </div>
            `;

            resultsDiv.innerHTML = content;
            resultsDiv.style.display = 'block';
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // ============================================
        // WHAT-IF SCENARIO FUNCTIONS
        // ============================================
        function runWhatIfScenario(scenarioId) {
            const scenarios = {
                'add-shift': {
                    title: 'Add 3rd Shift on Line 3',
                    description: 'Adding night shift (10PM-6AM) to Line 3',
                    baseline: {
                        capacity: '10,000 units/month',
                        oee: '45%',
                        utilization: '16 hours/day',
                        revenue: '$850K/month',
                        operators: 16
                    },
                    changes: {
                        capacity: '13,300 units/month (+33%)',
                        oee: '52% (+7% with learning curve)',
                        utilization: '24 hours/day',
                        revenue: '$1.03M/month (+21%)',
                        operators: 24
                    },
                    costs: {
                        labor: '$32K/month (8 operators)',
                        overhead: '$8K/month',
                        supervision: '$5K/month',
                        total: '$45K/month'
                    },
                    netBenefit: '+$135K/month',
                    roi: '3.0x',
                    payback: '4 months',
                    risks: [
                        'Night shift typically shows 18% lower OEE',
                        'Supervision challenges',
                        'Maintenance window reduction',
                        'Fatigue-related quality issues'
                    ],
                    mitigations: [
                        'Rotate operators weekly',
                        'Increase night shift supervision',
                        'Implement mandatory breaks',
                        'Weekly fatigue assessments'
                    ]
                },
                'new-machine': {
                    title: 'Add CNC Machine to Line 2',
                    description: 'Install new 5-axis CNC machine',
                    baseline: {capacity: '8,500 units/month', oee: '82%', revenue: '$720K/month'},
                    changes: {capacity: '10,200 units/month (+20%)', oee: '82%', revenue: '$865K/month (+20%)'},
                    costs: {investment: '$450K', installation: '$50K', training: '$15K', total: '$515K'},
                    netBenefit: '+$145K/month after payback',
                    roi: '2.8x over 5 years',
                    payback: '18 months',
                    risks: ['Installation delays', 'Operator training curve', 'Integration challenges'],
                    mitigations: ['Lock in delivery date', 'Start training early', 'Hire integration specialist']
                },
                'reduce-changeover': {
                    title: 'Reduce Changeover Time by 50%',
                    description: 'Implement SMED methodology',
                    baseline: {changeover: '45 minutes', changovers: '120/month', downtime: '90 hours/month'},
                    changes: {changeover: '22 minutes (-50%)', changovers: '120/month', downtime: '44 hours/month (-46 hours)'},
                    costs: {consulting: '$25K', training: '$15K', tools: '$8K', total: '$48K one-time'},
                    netBenefit: '+46 hours production/month = +$95K/month',
                    roi: '25x annually',
                    payback: '0.5 months',
                    risks: ['Operator resistance', 'Initial slowdown', 'Quality risks'],
                    mitigations: ['Involve operators in design', 'Phased rollout', 'Enhanced QC during ramp']
                },
                'preventive-maintenance': {
                    title: 'Implement Predictive Maintenance',
                    description: 'Add IoT sensors and predictive analytics',
                    baseline: {mtbf: '285 hours', unplanned: '8.5%', maintenance: '$85K/month'},
                    changes: {mtbf: '420 hours (+47%)', unplanned: '3.2% (-62%)', maintenance: '$95K/month'},
                    costs: {sensors: '$120K', software: '$45K/year', training: '$12K', total: '$165K + $45K/year'},
                    netBenefit: '+$180K/year from downtime reduction',
                    roi: '1.8x annually',
                    payback: '11 months',
                    risks: ['Sensor reliability', 'False alarms', 'Data quality'],
                    mitigations: ['Use industrial-grade sensors', 'Tune algorithms', 'Data validation process']
                },
                'quality-investment': {
                    title: 'Invest in Quality Systems',
                    description: 'Automated inspection and SPC',
                    baseline: {fpy: '91.1%', scrap: '8.9%', rework: '$42K/month'},
                    changes: {fpy: '98.5% (+7.4%)', scrap: '1.5% (-83%)', rework: '$7K/month (-83%)'},
                    costs: {equipment: '$280K', integration: '$45K', training: '$18K', total: '$343K'},
                    netBenefit: '+$35K/month scrap reduction',
                    roi: '1.4x annually',
                    payback: '10 months',
                    risks: ['Equipment reliability', 'Integration complexity', 'Over-rejection'],
                    mitigations: ['Proven vendor', 'Phased deployment', 'Calibration protocol']
                },
                'increase-safety-stock': {
                    title: 'Increase Safety Stock to 30 Days',
                    description: 'Double safety stock for critical parts',
                    baseline: {stock: '15 days', inventory: '$450K', stockouts: '2.3/year'},
                    changes: {stock: '30 days', inventory: '$900K (+$450K)', stockouts: '0.2/year (-91%)'},
                    costs: {inventory: '+$450K working capital', carrying: '+$45K/year (10%)'},
                    netBenefit: 'Avoid $380K/year stockout costs',
                    roi: '8.4x annually',
                    payback: 'Immediate risk mitigation',
                    risks: ['Capital tied up', 'Obsolescence', 'Storage space'],
                    mitigations: ['Negotiate consignment', 'FIFO management', 'Expand warehouse']
                },
                'automation': {
                    title: 'Automate Material Handling',
                    description: 'Add AGVs and automated loading',
                    baseline: {labor: '12 handlers', cost: '$65K/month', errors: '45/month'},
                    changes: {labor: '4 handlers', cost: '$30K/month + $15K equipment', errors: '8/month (-82%)'},
                    costs: {agvs: '$380K', installation: '$65K', maintenance: '+$15K/month', total: '$445K + $15K/month'},
                    netBenefit: '+$20K/month net',
                    roi: '1.8x over 5 years',
                    payback: '22 months',
                    risks: ['Technical complexity', 'Workflow disruption', 'ROI sensitivity'],
                    mitigations: ['Pilot test', 'Change management', 'Conservative assumptions']
                },
                'product-mix': {
                    title: 'Optimize Product Mix',
                    description: 'Focus on high-margin products',
                    baseline: {margin: '18.5%', products: '45 SKUs', revenue: '$2.8M/month'},
                    changes: {margin: '24.2% (+5.7%)', products: '32 SKUs (-13)', revenue: '$2.7M/month'},
                    costs: {analysis: '$18K', customer: '$12K transition', total: '$30K'},
                    netBenefit: '+$160K/month from margin increase',
                    roi: '64x annually',
                    payback: '<1 month',
                    risks: ['Customer reaction', 'Revenue decline', 'Competitor advantage'],
                    mitigations: ['Customer communication', 'Gradual phase-out', 'Monitor competitors']
                },
                'training-program': {
                    title: 'Comprehensive Operator Training',
                    description: 'Multi-skill certification program',
                    baseline: {skills: '1.2 per operator', flexibility: 'Low', efficiency: '68.5%'},
                    changes: {skills: '3.5 per operator', flexibility: 'High', efficiency: '76.2% (+7.7%)'},
                    costs: {program: '$45K', time: '$32K lost production', ongoing: '$8K/month', total: '$77K + $8K/month'},
                    netBenefit: '+$85K/month from efficiency gain',
                    roi: '13x annually',
                    payback: '1 month',
                    risks: ['Operator turnover', 'Training time', 'Skill retention'],
                    mitigations: ['Retention bonuses', 'Modular training', 'Refresher courses']
                },
                'vendor-consolidation': {
                    title: 'Consolidate Supplier Base',
                    description: 'Reduce from 45 to 22 suppliers',
                    baseline: {suppliers: '45', admin: '$48K/month', leverage: 'Low'},
                    changes: {suppliers: '22 (-51%)', admin: '$28K/month (-42%)', leverage: 'High'},
                    costs: {analysis: '$35K', transition: '$42K', total: '$77K one-time'},
                    netBenefit: '+$20K/month admin + $32K/month volume discounts',
                    roi: '8.1x annually',
                    payback: '1.5 months',
                    risks: ['Single-source risk', 'Transition disruption', 'Relationship damage'],
                    mitigations: ['Maintain 2+ sources for critical parts', 'Phased transition', 'Professional communication']
                },
                'energy-optimization': {
                    title: 'Energy Management System',
                    description: 'Smart controls and monitoring',
                    baseline: {energy: '$85K/month', efficiency: 'Low', monitoring: 'Manual'},
                    changes: {energy: '$68K/month (-20%)', efficiency: 'High', monitoring: 'Automated'},
                    costs: {system: '$125K', installation: '$35K', total: '$160K'},
                    netBenefit: '+$17K/month savings',
                    roi: '1.3x annually',
                    payback: '9.4 months',
                    risks: ['Savings below estimate', 'Equipment compatibility', 'User adoption'],
                    mitigations: ['Energy audit first', 'Compatible equipment', 'Training program']
                }
            };

            const scenario = scenarios[scenarioId] || scenarios['add-shift'];

            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">What-If: ${scenario.title}</h2>
                        <div class="drill-down-breadcrumb">
                            What-If Scenarios > <span>${scenario.title}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="detail-section" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(0, 217, 255, 0.05));">
                    <h3>üìã Scenario Description</h3>
                    <p style="font-size: 1.1rem; line-height: 1.8;">${scenario.description}</p>
                </div>

                <div class="detail-section">
                    <h3>üìä Baseline vs Scenario Comparison</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Current Baseline</th>
                                <th>After Change</th>
                                <th>Delta</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Capacity</strong></td>
                                <td>${scenario.baseline.capacity}</td>
                                <td style="color: #00ff88;">${scenario.changes.capacity}</td>
                                <td style="color: #00ff88;">+33%</td>
                            </tr>
                            <tr>
                                <td><strong>OEE</strong></td>
                                <td>${scenario.baseline.oee}</td>
                                <td style="color: #00ff88;">${scenario.changes.oee}</td>
                                <td style="color: #00ff88;">+7%</td>
                            </tr>
                            <tr>
                                <td><strong>Utilization</strong></td>
                                <td>${scenario.baseline.utilization}</td>
                                <td style="color: #00ff88;">${scenario.changes.utilization}</td>
                                <td style="color: #00ff88;">+50%</td>
                            </tr>
                            <tr>
                                <td><strong>Revenue</strong></td>
                                <td>${scenario.baseline.revenue}</td>
                                <td style="color: #00ff88;">${scenario.changes.revenue}</td>
                                <td style="color: #00ff88;">+21%</td>
                            </tr>
                            <tr>
                                <td><strong>Operators</strong></td>
                                <td>${scenario.baseline.operators}</td>
                                <td>${scenario.changes.operators}</td>
                                <td>+8</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="detail-section">
                    <h3>üí∞ Financial Analysis</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">Labor Cost</div>
                            <div class="detail-value">${scenario.costs.labor}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Overhead</div>
                            <div class="detail-value">${scenario.costs.overhead}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Supervision</div>
                            <div class="detail-value">${scenario.costs.supervision}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Total Cost</div>
                            <div class="detail-value">${scenario.costs.total}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Net Benefit</div>
                            <div class="detail-value" style="color: #00ff88; font-size: 1.5rem;">${scenario.netBenefit}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ROI</div>
                            <div class="detail-value" style="color: #00ff88; font-size: 1.5rem;">${scenario.roi}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Payback Period</div>
                            <div class="detail-value" style="color: #00ff88;">${scenario.payback}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">5-Year NPV</div>
                            <div class="detail-value" style="color: #00ff88;">$8.1M</div>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>‚ö†Ô∏è Risks & Mitigation</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                        <div>
                            <h4 style="color: #ff3366; margin-bottom: 1rem;">Risks Identified</h4>
                            <ul style="color: #8b92b0; line-height: 2;">
                                ${scenario.risks.map(risk => `<li>${risk}</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #00ff88; margin-bottom: 1rem;">Mitigation Strategies</h4>
                            <ul style="color: #8b92b0; line-height: 2;">
                                ${scenario.mitigations.map(mit => `<li>${mit}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border: 2px solid #00ff88; margin-top: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem;">‚úì Recommendation: PROCEED</div>
                            <div style="color: #8b92b0;">
                                Strong business case with 3.0x ROI and 4-month payback. Risks are manageable with proper mitigation.
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-primary" onclick="showImplementationPlan('${scenarioId}')">
                                Create Implementation Plan
                            </button>
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        function showImplementationPlan(scenarioId) {
            const plans = {
                'add-shift': {
                    title: 'Add 3rd Shift on Line 3',
                    totalDuration: '8 weeks',
                    totalBudget: '$65,000',
                    expectedROI: '3.0x',
                    phases: [
                        {
                            phase: 'Phase 1: Planning & Approval',
                            duration: '2 weeks',
                            budget: '$5,000',
                            milestones: [
                                {
                                    milestone: 'Business case approval',
                                    owner: 'Operations Director',
                                    dueDate: 'Week 1',
                                    status: 'Complete',
                                    dependencies: 'None'
                                },
                                {
                                    milestone: 'Budget allocation',
                                    owner: 'Finance',
                                    dueDate: 'Week 1',
                                    status: 'Complete',
                                    dependencies: 'Business case'
                                },
                                {
                                    milestone: 'Hiring requisitions submitted',
                                    owner: 'HR',
                                    dueDate: 'Week 2',
                                    status: 'In Progress',
                                    dependencies: 'Budget approval'
                                }
                            ]
                        },
                        {
                            phase: 'Phase 2: Recruitment & Training',
                            duration: '4 weeks',
                            budget: '$38,000',
                            milestones: [
                                {
                                    milestone: 'Interview and hire 8 operators',
                                    owner: 'HR - Recruitment',
                                    dueDate: 'Week 4',
                                    status: 'Not Started',
                                    dependencies: 'Requisitions approved'
                                },
                                {
                                    milestone: 'Hire 1 shift supervisor',
                                    owner: 'HR - Recruitment',
                                    dueDate: 'Week 4',
                                    status: 'Not Started',
                                    dependencies: 'Requisitions approved'
                                },
                                {
                                    milestone: 'Complete onboarding',
                                    owner: 'HR - Training',
                                    dueDate: 'Week 5',
                                    status: 'Not Started',
                                    dependencies: 'Hiring complete'
                                },
                                {
                                    milestone: 'Equipment operation training',
                                    owner: 'Operations - Training Team',
                                    dueDate: 'Week 6',
                                    status: 'Not Started',
                                    dependencies: 'Onboarding'
                                },
                                {
                                    milestone: 'Safety & quality certifications',
                                    owner: 'Quality / Safety',
                                    dueDate: 'Week 6',
                                    status: 'Not Started',
                                    dependencies: 'Equipment training'
                                }
                            ]
                        },
                        {
                            phase: 'Phase 3: Infrastructure & Setup',
                            duration: '2 weeks',
                            budget: '$18,000',
                            milestones: [
                                {
                                    milestone: 'Install additional lighting',
                                    owner: 'Facilities',
                                    dueDate: 'Week 5',
                                    status: 'Not Started',
                                    dependencies: 'Budget approval'
                                },
                                {
                                    milestone: 'Set up break room facilities',
                                    owner: 'Facilities',
                                    dueDate: 'Week 5',
                                    status: 'Not Started',
                                    dependencies: 'Budget approval'
                                },
                                {
                                    milestone: 'IT systems access & setup',
                                    owner: 'IT',
                                    dueDate: 'Week 6',
                                    status: 'Not Started',
                                    dependencies: 'Hiring complete'
                                },
                                {
                                    milestone: 'Stock spare parts for night shift',
                                    owner: 'Maintenance',
                                    dueDate: 'Week 7',
                                    status: 'Not Started',
                                    dependencies: 'None'
                                },
                                {
                                    milestone: 'Update maintenance schedule',
                                    owner: 'Maintenance Planning',
                                    dueDate: 'Week 7',
                                    status: 'Not Started',
                                    dependencies: 'Shift start date'
                                }
                            ]
                        },
                        {
                            phase: 'Phase 4: Launch & Ramp-Up',
                            duration: '2 weeks',
                            budget: '$4,000',
                            milestones: [
                                {
                                    milestone: 'Shadow shifts with day crew',
                                    owner: 'Operations',
                                    dueDate: 'Week 7',
                                    status: 'Not Started',
                                    dependencies: 'Training complete'
                                },
                                {
                                    milestone: 'First production shift',
                                    owner: 'Operations',
                                    dueDate: 'Week 8 - Monday',
                                    status: 'Not Started',
                                    dependencies: 'Shadow shifts'
                                },
                                {
                                    milestone: 'Daily performance reviews',
                                    owner: 'Operations Director',
                                    dueDate: 'Week 8-12 (ongoing)',
                                    status: 'Not Started',
                                    dependencies: 'Launch'
                                },
                                {
                                    milestone: 'Achieve 80% of target OEE',
                                    owner: 'Night Shift Supervisor',
                                    dueDate: 'Week 12',
                                    status: 'Not Started',
                                    dependencies: 'Launch + learning curve'
                                }
                            ]
                        }
                    ],
                    resources: [
                        {resource: '8 Machine Operators', allocation: '100%', cost: '$32K/month ongoing'},
                        {resource: '1 Shift Supervisor', allocation: '100%', cost: '$5K/month ongoing'},
                        {resource: 'Training Team', allocation: '50% for 4 weeks', cost: '$8K one-time'},
                        {resource: 'HR Recruitment', allocation: '75% for 4 weeks', cost: '$6K one-time'},
                        {resource: 'Facilities Team', allocation: '25% for 2 weeks', cost: '$3K one-time'},
                        {resource: 'IT Support', allocation: '10% for 2 weeks', cost: '$1K one-time'}
                    ],
                    risks: [
                        {
                            risk: 'Unable to hire qualified operators',
                            probability: 'Medium',
                            impact: 'High',
                            mitigation: 'Start recruitment early, offer competitive wages, consider temp-to-hire',
                            owner: 'HR'
                        },
                        {
                            risk: 'Night shift OEE lower than expected',
                            probability: 'High',
                            impact: 'Medium',
                            mitigation: 'Implement weekly operator rotation, increase supervision, monitor fatigue',
                            owner: 'Operations'
                        },
                        {
                            risk: 'Maintenance window conflicts',
                            probability: 'Medium',
                            impact: 'Medium',
                            mitigation: 'Schedule PM during weekend overlap windows, increase spare parts inventory',
                            owner: 'Maintenance'
                        }
                    ],
                    successMetrics: [
                        {metric: 'Shift OEE', target: '52%', measurement: 'Daily from MES', baseline: '45%'},
                        {metric: 'Production volume', target: '13,300 units/month', measurement: 'Monthly output', baseline: '10,000 units/month'},
                        {metric: 'Quality rate', target: '>97%', measurement: 'FPY tracking', baseline: '97.5%'},
                        {metric: 'Safety incidents', target: '0', measurement: 'Incident reports', baseline: '0.2/month'},
                        {metric: 'Operator turnover', target: '<10%/year', measurement: 'HR records', baseline: '8%/year'},
                        {metric: 'Net monthly benefit', target: '$135K', measurement: 'P&L analysis', baseline: '$0'}
                    ]
                },
                'default': {
                    title: 'Implementation Plan',
                    totalDuration: '12 weeks',
                    totalBudget: 'TBD',
                    expectedROI: 'TBD',
                    phases: [
                        {
                            phase: 'Phase 1: Planning',
                            duration: '2 weeks',
                            budget: 'TBD',
                            milestones: [
                                {milestone: 'Define scope', owner: 'Project Manager', dueDate: 'Week 1', status: 'Not Started', dependencies: 'None'},
                                {milestone: 'Secure approvals', owner: 'Management', dueDate: 'Week 2', status: 'Not Started', dependencies: 'Scope defined'}
                            ]
                        }
                    ],
                    resources: [],
                    risks: [],
                    successMetrics: []
                }
            };

            const plan = plans[scenarioId] || plans['default'];

            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Implementation Plan: ${plan.title}</h2>
                        <div class="drill-down-breadcrumb">
                            What-If Scenarios > ${plan.title} > <span>Implementation Plan</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div class="metrics-grid" style="margin-bottom: 2rem;">
                    <div class="metric-card">
                        <div class="metric-label">Total Duration</div>
                        <div class="metric-value info">${plan.totalDuration}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Budget</div>
                        <div class="metric-value warning">${plan.totalBudget}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Expected ROI</div>
                        <div class="metric-value good">${plan.expectedROI}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Milestones</div>
                        <div class="metric-value info">${plan.phases.reduce((sum, phase) => sum + phase.milestones.length, 0)}</div>
                    </div>
                </div>

                ${plan.phases.map((phase, phaseIndex) => `
                    <div class="detail-section">
                        <h3>${phase.phase}</h3>
                        <div style="display: flex; gap: 2rem; margin-bottom: 1.5rem;">
                            <div><strong>Duration:</strong> ${phase.duration}</div>
                            <div><strong>Budget:</strong> ${phase.budget}</div>
                        </div>

                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th style="width: 5%;">#</th>
                                    <th style="width: 30%;">Milestone</th>
                                    <th style="width: 20%;">Owner</th>
                                    <th style="width: 15%;">Due Date</th>
                                    <th style="width: 15%;">Status</th>
                                    <th style="width: 15%;">Dependencies</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${phase.milestones.map((milestone, mIndex) => `
                                    <tr>
                                        <td><strong>${phaseIndex + 1}.${mIndex + 1}</strong></td>
                                        <td>${milestone.milestone}</td>
                                        <td>${milestone.owner}</td>
                                        <td>${milestone.dueDate}</td>
                                        <td><span class="status-badge ${milestone.status === 'Complete' ? 'operational' : milestone.status === 'In Progress' ? 'maintenance' : 'down'}">
                                            ${milestone.status}
                                        </span></td>
                                        <td style="font-size: 0.875rem; color: #8b92b0;">${milestone.dependencies}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `).join('')}

                ${plan.resources.length > 0 ? `
                <div class="detail-section">
                    <h3>üë• Resource Allocation</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Allocation</th>
                                <th>Cost</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${plan.resources.map(resource => `
                                <tr>
                                    <td><strong>${resource.resource}</strong></td>
                                    <td>${resource.allocation}</td>
                                    <td>${resource.cost}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                ${plan.risks.length > 0 ? `
                <div class="detail-section">
                    <h3>‚ö†Ô∏è Risk Management Plan</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Risk</th>
                                <th>Probability</th>
                                <th>Impact</th>
                                <th>Mitigation Strategy</th>
                                <th>Owner</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${plan.risks.map(risk => `
                                <tr>
                                    <td>${risk.risk}</td>
                                    <td><span class="status-badge ${risk.probability === 'High' ? 'down' : risk.probability === 'Medium' ? 'maintenance' : 'operational'}">
                                        ${risk.probability}
                                    </span></td>
                                    <td><span class="status-badge ${risk.impact === 'High' ? 'down' : risk.impact === 'Medium' ? 'maintenance' : 'operational'}">
                                        ${risk.impact}
                                    </span></td>
                                    <td style="font-size: 0.875rem;">${risk.mitigation}</td>
                                    <td>${risk.owner}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                ${plan.successMetrics.length > 0 ? `
                <div class="detail-section">
                    <h3>üìä Success Metrics & KPIs</h3>
                    <table class="asset-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Baseline</th>
                                <th>Target</th>
                                <th>Measurement Method</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${plan.successMetrics.map(metric => `
                                <tr>
                                    <td><strong>${metric.metric}</strong></td>
                                    <td>${metric.baseline}</td>
                                    <td style="color: #00ff88;"><strong>${metric.target}</strong></td>
                                    <td style="font-size: 0.875rem; color: #8b92b0;">${metric.measurement}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}

                <div class="detail-section">
                    <h3>üìÖ Timeline Visualization (Gantt Chart)</h3>
                    <div style="background: rgba(0,0,0,0.3); padding: 2rem; border-radius: 8px; text-align: center;">
                        <div style="color: #8b92b0; margin-bottom: 1rem;">Week-by-Week Timeline</div>
                        <div style="display: grid; grid-template-columns: 150px repeat(12, 1fr); gap: 2px; font-size: 0.75rem;">
                            <div style="background: rgba(0, 217, 255, 0.2); padding: 0.5rem; font-weight: 600;">Phase</div>
                            ${Array.from({length: 12}, (_, i) => `<div style="background: rgba(0, 217, 255, 0.1); padding: 0.5rem;">W${i+1}</div>`).join('')}
                            
                            ${plan.phases.map(phase => {
                                const startWeek = phase.phase.includes('Phase 1') ? 0 : phase.phase.includes('Phase 2') ? 2 : phase.phase.includes('Phase 3') ? 6 : 6;
                                const weeks = parseInt(phase.duration.split(' ')[0]);
                                return `
                                    <div style="background: rgba(0, 217, 255, 0.2); padding: 0.5rem; text-align: left; font-weight: 600;">${phase.phase.split(':')[0]}</div>
                                    ${Array.from({length: 12}, (_, i) => {
                                        const inPhase = i >= startWeek && i < startWeek + weeks;
                                        return `<div style="background: ${inPhase ? 'rgba(0, 255, 136, 0.4)' : 'rgba(0,0,0,0.2)'}; padding: 0.5rem; border-radius: 4px;">${inPhase ? '‚ñì' : ''}</div>`;
                                    }).join('')}
                                `;
                            }).join('')}
                        </div>
                        <div style="margin-top: 1.5rem; color: #8b92b0; font-size: 0.875rem;">
                            <strong>Legend:</strong> ‚ñì = Active Phase
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button class="btn btn-primary" style="flex: 1; font-size: 1.1rem; padding: 1rem;" onclick="alert('This would create project tasks in your project management system with all milestones, owners, and due dates.')">
                        ‚úÖ Approve & Create Project
                    </button>
                    <button class="btn btn-secondary" style="flex: 1; font-size: 1.1rem; padding: 1rem;" onclick="alert('This would export the implementation plan to Excel/PDF with full Gantt chart.')">
                        üì• Export to Excel/PDF
                    </button>
                    <button class="btn btn-secondary" style="font-size: 1.1rem; padding: 1rem;" onclick="closeDrillDown()">
                        ‚Üê Back to Scenario
                    </button>
                </div>
            `;

            showDrillDown(content);
        }

        function selectWhatIfCategory(category) {
            alert(`Category selected: ${category}\n\nNext steps in wizard:\n1. Select specific variables\n2. Define baseline conditions\n3. Input proposed changes\n4. Run simulation\n5. View results with sensitivity analysis`);
        }

        // ============================================
        // MULTIDIMENSIONAL SEARCH ENGINE
        // ============================================
        const searchQueries = {
            0: {
                query: "Which supplier is best performing?",
                timestamp: "2 hours ago"
            },
            1: {
                query: "What's causing quality issues on Line 3?",
                timestamp: "3 hours ago"
            },
            2: {
                query: "Compare OEE across all factories",
                timestamp: "Yesterday"
            },
            3: {
                query: "Which work orders are at risk?",
                timestamp: "Yesterday"
            },
            4: {
                query: "Show me all late deliveries from suppliers",
                timestamp: "2 days ago"
            }
        };

        function loadPreviousSearch(index) {
            const search = searchQueries[index];
            if (search) {
                document.getElementById('multidim-search-input').value = search.query;
                runMultidimensionalSearch();
            }
        }

        function runMultidimensionalSearch() {
            const query = document.getElementById('multidim-search-input').value.trim();
            
            if (!query) {
                alert('Please enter a search query!');
                return;
            }

            const queryLower = query.toLowerCase();
            let searchResult = null;

            // Match query patterns
            if (queryLower.includes('supplier') && (queryLower.includes('best') || queryLower.includes('performing'))) {
                searchResult = getSearchResult_BestSupplier();
            } else if (queryLower.includes('quality') && queryLower.includes('line 3')) {
                searchResult = getSearchResult_QualityLine3();
            } else if (queryLower.includes('oee') && queryLower.includes('factories')) {
                searchResult = getSearchResult_OEEComparison();
            } else if (queryLower.includes('work order') && queryLower.includes('risk')) {
                searchResult = getSearchResult_WorkOrdersAtRisk();
            } else if (queryLower.includes('late') && queryLower.includes('deliver')) {
                searchResult = getSearchResult_LateDeliveries();
            } else {
                searchResult = getSearchResult_Generic(query);
            }

            // Display the thinking process and results
            displaySearchResults(query, searchResult);
        }

        function getSearchResult_BestSupplier() {
            return {
                subtasks: [
                    {status: 'completed', title: 'Query supplier performance database', description: 'Fetching data for all 45 active suppliers across 5 metrics'},
                    {status: 'completed', title: 'Calculate composite performance scores', description: 'Weighted scoring: Quality 30%, On-time 25%, Price 20%, Responsiveness 15%, Compliance 10%'},
                    {status: 'completed', title: 'Analyze correlation with production outcomes', description: 'Cross-referencing supplier performance with line OEE and quality data'},
                    {status: 'completed', title: 'Generate comparative analysis', description: 'Ranking suppliers and identifying top/bottom performers'}
                ],
                thinkingProcess: [
                    "User wants to identify the best performing supplier",
                    "Need to define 'best performing' - will use composite score across multiple dimensions",
                    "Key metrics: Quality (PPM), On-time delivery (OTIF), Price competitiveness, Responsiveness, Compliance",
                    "Should also consider volume and criticality of parts supplied",
                    "Will query supplier database, calculate scores, and provide ranking with data evidence"
                ],
                dataUsed: [
                    {
                        source: 'Supplier Performance Database',
                        table: 'suppliers_metrics',
                        rows: 45,
                        timeframe: 'Last 6 months',
                        fields: ['supplier_id', 'supplier_name', 'quality_ppm', 'otif_percent', 'price_variance', 'response_time', 'compliance_score']
                    },
                    {
                        source: 'Procurement System',
                        table: 'purchase_orders',
                        rows: 2847,
                        timeframe: 'Last 6 months',
                        fields: ['po_number', 'supplier_id', 'order_date', 'delivery_date', 'promised_date', 'total_value']
                    },
                    {
                        source: 'Quality Management',
                        table: 'incoming_inspection',
                        rows: 1653,
                        timeframe: 'Last 6 months',
                        fields: ['inspection_id', 'supplier_id', 'part_number', 'lot_size', 'defects_found', 'ppm']
                    }
                ],
                analysis: {
                    summary: 'Analyzed 45 suppliers across 5 performance dimensions using 4,545 data points over 6 months',
                    topPerformers: [
                        {
                            rank: 1,
                            name: 'Supplier S-789',
                            score: 94.2,
                            metrics: {
                                quality: {value: '125 PPM', score: 98, industry: '500 PPM'},
                                otif: {value: '98.5%', score: 99, industry: '85%'},
                                price: {value: '-2% vs market', score: 92, industry: 'Market'},
                                responsiveness: {value: '4.2 hours avg', score: 95, industry: '12 hours'},
                                compliance: {value: '100%', score: 100, industry: '92%'}
                            },
                            volume: '$2.4M annual',
                            parts: 'Critical hydraulic components',
                            relationship: '8 years',
                            notes: 'Consistently exceeds expectations. Zero stockouts. Proactive communication.'
                        },
                        {
                            rank: 2,
                            name: 'Supplier S-234',
                            score: 91.8,
                            metrics: {
                                quality: {value: '280 PPM', score: 94, industry: '500 PPM'},
                                otif: {value: '96.2%', score: 96, industry: '85%'},
                                price: {value: 'Market rate', score: 85, industry: 'Market'},
                                responsiveness: {value: '6.8 hours avg', score: 92, industry: '12 hours'},
                                compliance: {value: '98%', score: 98, industry: '92%'}
                            },
                            volume: '$1.8M annual',
                            parts: 'Electronic components',
                            relationship: '5 years',
                            notes: 'Excellent quality. Occasional delivery delays during peak seasons.'
                        },
                        {
                            rank: 3,
                            name: 'Supplier S-456',
                            score: 88.5,
                            metrics: {
                                quality: {value: '420 PPM', score: 88, industry: '500 PPM'},
                                otif: {value: '94.8%', score: 95, industry: '85%'},
                                price: {value: '+3% vs market', score: 82, industry: 'Market'},
                                responsiveness: {value: '8.5 hours avg', score: 88, industry: '12 hours'},
                                compliance: {value: '96%', score: 96, industry: '92%'}
                            },
                            volume: '$3.1M annual',
                            parts: 'Machined parts',
                            relationship: '12 years',
                            notes: 'Reliable high-volume supplier. Premium pricing justified by quality.'
                        }
                    ],
                    bottomPerformers: [
                        {
                            rank: 43,
                            name: 'Supplier S-123',
                            score: 62.3,
                            metrics: {
                                quality: {value: '1,850 PPM', score: 58, industry: '500 PPM'},
                                otif: {value: '78.3%', score: 62, industry: '85%'},
                                price: {value: '+8% vs market', score: 65, industry: 'Market'},
                                responsiveness: {value: '28 hours avg', score: 55, industry: '12 hours'},
                                compliance: {value: '82%', score: 82, industry: '92%'}
                            },
                            volume: '$1.2M annual',
                            parts: 'Part M-456 (critical)',
                            relationship: '3 years',
                            notes: 'Performance declining. New facility has quality issues. Recommend dual-sourcing.',
                            action: 'URGENT: Find alternative supplier'
                        }
                    ],
                    insights: [
                        'Top 3 suppliers account for $7.3M (41% of total spend) and average 91.5 score',
                        'Bottom 5 suppliers average 64.8 score but represent only $4.2M (23% of spend)',
                        'Quality PPM has strongest correlation with production OEE (r=0.78)',
                        'Supplier S-123 is single-source for critical Part M-456 - HIGH RISK',
                        'Consolidating bottom 5 suppliers could save $280K annually + reduce quality costs'
                    ],
                    recommendations: [
                        {
                            priority: 'HIGH',
                            action: 'Qualify alternative for Part M-456',
                            reason: 'S-123 is critical single-source with declining performance',
                            impact: 'Reduce supply chain risk, improve quality',
                            timeline: '30 days'
                        },
                        {
                            priority: 'MEDIUM',
                            action: 'Consolidate bottom 5 suppliers',
                            reason: '5 suppliers scoring <68 with combined volume of $4.2M',
                            impact: '$280K annual savings + administrative efficiency',
                            timeline: '90 days'
                        },
                        {
                            priority: 'LOW',
                            action: 'Recognize top performers',
                            reason: 'S-789, S-234, S-456 consistently exceed expectations',
                            impact: 'Strengthen relationships, encourage continued excellence',
                            timeline: 'This quarter'
                        }
                    ]
                }
            };
        }

        function getSearchResult_QualityLine3() {
            return {
                subtasks: [
                    {status: 'completed', title: 'Query Line 3 quality data', description: 'Fetching defect data, FPY, and inspection results'},
                    {status: 'completed', title: 'Analyze defect patterns', description: 'Categorizing defects by type, frequency, and severity'},
                    {status: 'completed', title: 'Cross-reference with production data', description: 'Correlating defects with operators, shifts, and machine states'},
                    {status: 'completed', title: 'Identify root causes', description: 'Running statistical analysis to find causal factors'}
                ],
                thinkingProcess: [
                    "User needs to understand root cause of quality issues on Line 3",
                    "Line 3 currently shows 45% OEE with quality as a major component",
                    "Should analyze: defect types, frequency, timing patterns, correlations",
                    "Check: operator certifications, machine condition, supplier quality, process parameters",
                    "Provide actionable root cause analysis with data evidence"
                ],
                dataUsed: [
                    {
                        source: 'Quality Management System',
                        table: 'quality_inspections',
                        rows: 1847,
                        timeframe: 'Last 30 days',
                        fields: ['inspection_id', 'line_id', 'defect_type', 'defect_count', 'lot_size', 'inspector', 'timestamp']
                    },
                    {
                        source: 'MES Production Data',
                        table: 'production_runs',
                        rows: 892,
                        timeframe: 'Last 30 days',
                        fields: ['run_id', 'line_id', 'operator_id', 'shift', 'machine_id', 'units_produced', 'timestamp']
                    },
                    {
                        source: 'Supplier Quality',
                        table: 'incoming_inspection',
                        rows: 245,
                        timeframe: 'Last 30 days - Part M-456',
                        fields: ['supplier_id', 'part_number', 'ppm', 'lot_number', 'receive_date']
                    }
                ],
                analysis: {
                    summary: 'Line 3 shows elevated defect rate of 8.9% (vs 2.5% target). Analysis of 2,984 data points reveals 3 primary root causes accounting for 87% of quality issues.',
                    defectBreakdown: [
                        {defect: 'Dimensional Variance', count: 485, percent: 59, root: 'Supplier S-123 material inconsistency'},
                        {defect: 'Surface Finish', count: 185, percent: 23, root: 'Machine M-205 tool wear'},
                        {defect: 'Assembly Defects', count: 150, percent: 18, root: 'Operator certification gaps'}
                    ],
                    rootCauses: [
                        {
                            cause: 'Supplier S-123 Material Quality',
                            contribution: '59%',
                            evidence: 'Part M-456 from S-123 shows 15% dimensional variance vs 2% from other suppliers. 78% of Line 3 dimensional defects correlate with S-123 late deliveries.',
                            correlation: '0.82',
                            action: 'Implement 100% incoming inspection for S-123 + qualify alternative supplier'
                        },
                        {
                            cause: 'Machine M-205 Tool Degradation',
                            contribution: '23%',
                            evidence: 'Surface finish defects increase 3.2x in 7 days before scheduled tool change. Machine M-205 operating 450 hours past recommended tool life.',
                            correlation: '0.75',
                            action: 'Replace tooling immediately + reduce tool change interval from 1000hr to 800hr'
                        },
                        {
                            cause: 'Operator Certification Expiry',
                            contribution: '18%',
                            evidence: '5 of 8 Line 3 operators have expired certifications. Assembly defect rate for expired operators: 8.1% vs 2.3% for certified.',
                            correlation: '0.68',
                            action: 'Schedule immediate recertification for 5 operators'
                        }
                    ],
                    recommendations: [
                        {priority: 'IMMEDIATE', action: '100% incoming inspection S-123', cost: '$12K/year', benefit: '-59% defects', timeline: 'Start today'},
                        {priority: 'IMMEDIATE', action: 'Replace Machine M-205 tooling', cost: '$2,500', benefit: '-23% defects', timeline: '24 hours'},
                        {priority: 'SHORT-TERM', action: 'Recertify 5 operators', cost: '$8,500', benefit: '-18% defects', timeline: '2 weeks'},
                        {priority: 'STRATEGIC', action: 'Qualify alternative to S-123', cost: '$45K', benefit: 'Risk mitigation', timeline: '30 days'}
                    ],
                    expectedImpact: 'Implementing all 3 actions: 8.9% ‚Üí 2.1% defect rate, Line 3 OEE: 45% ‚Üí 72% (+27%)'
                }
            };
        }

        function getSearchResult_Generic(query) {
            return {
                subtasks: [
                    {status: 'completed', title: 'Parse query intent', description: 'Understanding what data you need'},
                    {status: 'thinking', title: 'Identifying data sources', description: 'Determining relevant systems to query...'}
                ],
                thinkingProcess: [
                    "Analyzing query: " + query,
                    "This query requires more specific parameters to provide detailed analysis",
                    "Suggesting refinement or showing general approach"
                ],
                dataUsed: [
                    {
                        source: 'Query Intent Analysis',
                        table: 'N/A',
                        rows: 0,
                        timeframe: 'Current',
                        fields: ['Parsed query structure']
                    }
                ],
                analysis: {
                    summary: 'This query needs more specific parameters. Try refining your question with specific metrics, time periods, or entities.',
                    suggestions: [
                        'Be more specific about what you want to analyze',
                        'Specify time periods (e.g., "last 30 days")',
                        'Name specific entities (lines, suppliers, products)',
                        'Include metrics you care about (OEE, quality, cost)'
                    ]
                }
            };
        }

        function displaySearchResults(query, result) {
            const resultsArea = document.getElementById('search-results-area');
            const analysisTray = document.getElementById('analysis-tray');
            const trayContent = document.getElementById('analysis-tray-content');

            // Show analysis tray
            analysisTray.style.display = 'block';

            // Populate thinking process in tray
            let subtasksHTML = result.subtasks.map(task => `
                <div class="analysis-step ${task.status}">
                    <div class="analysis-step-header">
                        <div class="analysis-step-icon">${task.status === 'completed' ? '‚úì' : '‚ü≥'}</div>
                        <div class="analysis-step-title">${task.title}</div>
                    </div>
                    <div class="analysis-step-content">${task.description}</div>
                </div>
            `).join('');

            let thinkingHTML = `
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
                    <div style="color: #ffaa00; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem;">üí≠ Thinking Process</div>
                    <ol style="color: #8b92b0; font-size: 0.813rem; line-height: 1.8; padding-left: 1.25rem; margin: 0;">
                        ${result.thinkingProcess.map(thought => `<li>${thought}</li>`).join('')}
                    </ol>
                </div>
            `;

            let dataSourcesHTML = `
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
                    <div style="color: #00d9ff; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.75rem;">üìä Data Sources Used</div>
                    ${result.dataUsed.map(ds => `
                        <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(139, 146, 176, 0.2);">
                            <div style="color: #ffffff; font-size: 0.813rem; font-weight: 600;">${ds.source}</div>
                            <div style="color: #8b92b0; font-size: 0.75rem; margin-top: 0.25rem;">
                                Table: ${ds.table}<br>
                                Rows: ${ds.rows.toLocaleString()}<br>
                                Period: ${ds.timeframe}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            trayContent.innerHTML = subtasksHTML + thinkingHTML + dataSourcesHTML;

            // Display main results
            let mainResultsHTML = `
                <div style="margin-bottom: 2rem;">
                    <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff; margin-bottom: 1.5rem;">
                        <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Your Query:</div>
                        <div style="color: #00d9ff; font-size: 1.2rem; font-weight: 600;">${query}</div>
                    </div>

                    ${result.analysis.summary ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #00ff88; margin-bottom: 1rem;">üìä Analysis Summary</h3>
                        <p style="color: #ffffff; line-height: 1.8; font-size: 1.05rem;">${result.analysis.summary}</p>
                    </div>
                    ` : ''}

                    ${result.analysis.topPerformers ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #00ff88; margin-bottom: 1.5rem;">üèÜ Top Performers</h3>
                        ${result.analysis.topPerformers.map(supplier => `
                            <div style="background: rgba(0, 255, 136, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00ff88; margin-bottom: 1.5rem;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div>
                                        <div style="color: #00ff88; font-size: 1.5rem; font-weight: 600;">#${supplier.rank} ${supplier.name}</div>
                                        <div style="color: #8b92b0; margin-top: 0.25rem;">${supplier.volume} annual ‚Ä¢ ${supplier.parts}</div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 2.5rem; font-weight: bold; color: #00ff88;">${supplier.score}</div>
                                        <div style="color: #8b92b0; font-size: 0.875rem;">Overall Score</div>
                                    </div>
                                </div>

                                <table class="asset-table" style="margin-top: 1rem;">
                                    <thead>
                                        <tr>
                                            <th>Metric</th>
                                            <th>Value</th>
                                            <th>Score</th>
                                            <th>Industry Avg</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Quality (PPM)</td>
                                            <td style="color: #00ff88;">${supplier.metrics.quality.value}</td>
                                            <td><strong>${supplier.metrics.quality.score}/100</strong></td>
                                            <td style="color: #8b92b0;">${supplier.metrics.quality.industry}</td>
                                        </tr>
                                        <tr>
                                            <td>On-Time Delivery</td>
                                            <td style="color: #00ff88;">${supplier.metrics.otif.value}</td>
                                            <td><strong>${supplier.metrics.otif.score}/100</strong></td>
                                            <td style="color: #8b92b0;">${supplier.metrics.otif.industry}</td>
                                        </tr>
                                        <tr>
                                            <td>Price Competitiveness</td>
                                            <td style="color: #00ff88;">${supplier.metrics.price.value}</td>
                                            <td><strong>${supplier.metrics.price.score}/100</strong></td>
                                            <td style="color: #8b92b0;">${supplier.metrics.price.industry}</td>
                                        </tr>
                                        <tr>
                                            <td>Responsiveness</td>
                                            <td style="color: #00ff88;">${supplier.metrics.responsiveness.value}</td>
                                            <td><strong>${supplier.metrics.responsiveness.score}/100</strong></td>
                                            <td style="color: #8b92b0;">${supplier.metrics.responsiveness.industry}</td>
                                        </tr>
                                        <tr>
                                            <td>Compliance</td>
                                            <td style="color: #00ff88;">${supplier.metrics.compliance.value}</td>
                                            <td><strong>${supplier.metrics.compliance.score}/100</strong></td>
                                            <td style="color: #8b92b0;">${supplier.metrics.compliance.industry}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 6px; margin-top: 1rem;">
                                    <strong style="color: #00d9ff;">Notes:</strong> ${supplier.notes}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    ` : ''}

                    ${result.analysis.bottomPerformers && result.analysis.bottomPerformers.length > 0 ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #ff3366; margin-bottom: 1.5rem;">‚ö†Ô∏è Attention Required</h3>
                        ${result.analysis.bottomPerformers.map(supplier => `
                            <div style="background: rgba(255, 51, 102, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ff3366;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div>
                                        <div style="color: #ff3366; font-size: 1.5rem; font-weight: 600;">#${supplier.rank} ${supplier.name}</div>
                                        <div style="color: #8b92b0; margin-top: 0.25rem;">${supplier.volume} annual ‚Ä¢ ${supplier.parts}</div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 2.5rem; font-weight: bold; color: #ff3366;">${supplier.score}</div>
                                        <div style="color: #8b92b0; font-size: 0.875rem;">Overall Score</div>
                                    </div>
                                </div>
                                <div style="background: rgba(255, 51, 102, 0.1); padding: 1rem; border-radius: 6px; margin-top: 1rem; border: 2px solid #ff3366;">
                                    <strong style="color: #ff3366;">‚ö†Ô∏è ${supplier.action}</strong><br>
                                    <span style="color: #8b92b0; margin-top: 0.5rem; display: block;">${supplier.notes}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    ` : ''}

                    ${result.analysis.defectBreakdown ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #00d9ff; margin-bottom: 1.5rem;">üîç Defect Breakdown</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Defect Type</th>
                                    <th>Count</th>
                                    <th>% of Total</th>
                                    <th>Root Cause</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.analysis.defectBreakdown.map(defect => `
                                    <tr>
                                        <td><strong>${defect.defect}</strong></td>
                                        <td>${defect.count}</td>
                                        <td><strong>${defect.percent}%</strong></td>
                                        <td style="color: #8b92b0;">${defect.root}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ` : ''}

                    ${result.analysis.rootCauses ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #ffaa00; margin-bottom: 1.5rem;">üéØ Root Cause Analysis</h3>
                        ${result.analysis.rootCauses.map((cause, index) => `
                            <div style="background: rgba(255, 170, 0, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffaa00; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <h4 style="color: #ffaa00; margin: 0;">${index + 1}. ${cause.cause}</h4>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #ffaa00;">${cause.contribution}</div>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <strong style="color: #00d9ff;">Evidence:</strong><br>
                                    <span style="color: #8b92b0; line-height: 1.8;">${cause.evidence}</span>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <strong style="color: #00d9ff;">Correlation:</strong> 
                                    <span style="color: #00ff88; font-weight: 600;">${cause.correlation}</span>
                                </div>
                                <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 6px;">
                                    <strong style="color: #00ff88;">Recommended Action:</strong><br>
                                    <span style="color: #ffffff;">${cause.action}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    ` : ''}

                    ${result.analysis.insights ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #00d9ff; margin-bottom: 1rem;">üí° Key Insights</h3>
                        <ul style="color: #8b92b0; line-height: 2; font-size: 1.05rem;">
                            ${result.analysis.insights.map(insight => `<li>${insight}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}

                    ${result.analysis.recommendations ? `
                    <div style="background: rgba(0, 255, 136, 0.1); padding: 1.5rem; border-radius: 8px; border: 2px solid #00ff88;">
                        <h3 style="color: #00ff88; margin-bottom: 1.5rem;">‚úÖ Recommended Actions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Action</th>
                                    <th>Reason</th>
                                    <th>Impact</th>
                                    <th>Timeline</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.analysis.recommendations.map(rec => `
                                    <tr>
                                        <td><span class="status-badge ${rec.priority === 'HIGH' || rec.priority === 'IMMEDIATE' ? 'down' : rec.priority === 'MEDIUM' || rec.priority === 'SHORT-TERM' ? 'maintenance' : 'operational'}">
                                            ${rec.priority}
                                        </span></td>
                                        <td><strong>${rec.action}</strong></td>
                                        <td style="font-size: 0.875rem;">${rec.reason}</td>
                                        <td style="color: #00ff88;">${rec.impact || rec.benefit}</td>
                                        <td>${rec.timeline}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ` : ''}

                    ${result.analysis.expectedImpact ? `
                    <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border: 2px solid #00d9ff; margin-top: 2rem;">
                        <h3 style="color: #00d9ff; margin-bottom: 1rem;">üéØ Expected Impact</h3>
                        <p style="color: #ffffff; font-size: 1.1rem; line-height: 1.8;">${result.analysis.expectedImpact}</p>
                    </div>
                    ` : ''}

                    ${result.analysis.suggestions ? `
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
                        <h3 style="color: #ffaa00; margin-bottom: 1rem;">üí≠ Suggestions to Improve Query</h3>
                        <ul style="color: #8b92b0; line-height: 2;">
                            ${result.analysis.suggestions.map(sug => `<li>${sug}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                </div>
            `;

            resultsArea.innerHTML = mainResultsHTML;
        }

        // ============================================
        // VALUE STREAM DETAIL DRILL-DOWN
        // ============================================
        function showValueStreamDetail(componentId) {
            // This will show detailed dashboard for each value stream component
            let content = '';
            
            switch(componentId) {
                case 'crm':
                    content = getCRMDashboard();
                    break;
                case 'sales':
                    content = getSalesPlanningDashboard();
                    break;
                case 'procurement':
                    content = getProcurementDashboard();
                    break;
                case 'inbound':
                    content = getInboundLogisticsDashboard();
                    break;
                case 'wms-rm':
                    content = getWMSRawMaterialsDashboard();
                    break;
                case 'planning':
                    content = getProductionPlanningDashboard();
                    break;
                case 'production':
                    content = getProductionDashboard();
                    break;
                case 'assets':
                    content = getAssetsDashboard();
                    break;
                case 'maintenance':
                    content = getMaintenanceDashboard();
                    break;
                case 'quality':
                    content = getQualityDashboard();
                    break;
                case 'wms-fg':
                    content = getWMSFinishedGoodsDashboard();
                    break;
                case 'outbound':
                    content = getOutboundLogisticsDashboard();
                    break;
                case 'delivery':
                    content = getCustomerDeliveryDashboard();
                    break;
                case 'service':
                    content = getCustomerServiceDashboard();
                    break;
                case 'erp':
                    content = getERPDashboard();
                    break;
                case 'hr':
                    content = getHRDashboard();
                    break;
                case 'finance':
                    content = getFinanceDashboard();
                    break;
                default:
                    content = getGenericComponentDashboard(componentId);
            }
            
            showDrillDown(content);
        }

        function getCRMDashboard() {
            return `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">üë• Customer / CRM - Detailed Dashboard</h2>
                        <div class="drill-down-breadcrumb">Value Stream ‚Üí CRM</div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid rgba(0, 217, 255, 0.2);">
                    <div class="tab-button active" onclick="showTab(event, 'crm-current')">Current Status</div>
                    <div class="tab-button" onclick="showTab(event, 'crm-history')">History</div>
                </div>

                <!-- Current Status Tab -->
                <div id="crm-current" class="tab-content active">
                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Overall Health: EXCELLENT (96/100)</h3>
                        <p style="color: #8b92b0; line-height: 1.8;">Customer relationships are strong with high satisfaction scores. Order pipeline is healthy with 12% growth predicted for Q1.</p>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Key Performance Metrics</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Active Customers</div>
                                <div style="color: #00d9ff; font-size: 2rem; font-weight: bold;">248</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">+12 this month</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">CSAT Score</div>
                                <div style="color: #00ff88; font-size: 2rem; font-weight: bold;">4.8/5</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">+0.2 vs last Q</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Active Orders</div>
                                <div style="color: #00d9ff; font-size: 2rem; font-weight: bold;">248</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">$4.2M value</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Retention Rate</div>
                                <div style="color: #00ff88; font-size: 2rem; font-weight: bold;">94%</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">Best in industry</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>üìà Top 5 Customers by Revenue</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Customer</th>
                                    <th>Annual Revenue</th>
                                    <th>Orders YTD</th>
                                    <th>OTIF</th>
                                    <th>Relationship</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>ABC Manufacturing</strong></td>
                                    <td>$1.2M</td>
                                    <td>48</td>
                                    <td style="color: #00ff88;">98.5%</td>
                                    <td style="color: #00ff88;">Strategic</td>
                                </tr>
                                <tr>
                                    <td><strong>DEF Manufacturing</strong></td>
                                    <td>$950K</td>
                                    <td>38</td>
                                    <td style="color: #ffaa00;">93.2%</td>
                                    <td style="color: #00ff88;">Strategic</td>
                                </tr>
                                <tr>
                                    <td><strong>GHI Industries</strong></td>
                                    <td>$780K</td>
                                    <td>32</td>
                                    <td style="color: #00ff88;">97.1%</td>
                                    <td style="color: #00d9ff;">Key Account</td>
                                </tr>
                                <tr>
                                    <td><strong>JKL Corp</strong></td>
                                    <td>$650K</td>
                                    <td>28</td>
                                    <td style="color: #00ff88;">96.8%</td>
                                    <td style="color: #00d9ff;">Key Account</td>
                                </tr>
                                <tr>
                                    <td><strong>MNO Enterprises</strong></td>
                                    <td>$520K</td>
                                    <td>22</td>
                                    <td style="color: #00ff88;">95.4%</td>
                                    <td style="color: #8b92b0;">Regular</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="detail-section">
                        <h3>üîÆ Predictions & Observations</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00d9ff;">
                                <strong style="color: #00d9ff;">üìà Demand Prediction</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Q1 2025 demand expected to increase by 12% based on customer forecasts and historical trends</p>
                            </div>
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00ff88;">
                                <strong style="color: #00ff88;">‚úì Observation</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Customer satisfaction improved 0.2 points due to OTIF improvements (93.2% ‚Üí 96.5%)</p>
                            </div>
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00ff88;">
                                <strong style="color: #00ff88;">üí° Improvement Opportunity</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Implement customer portal for real-time order tracking - expected to increase satisfaction to 4.9/5</p>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00d9ff;">
                                <strong style="color: #00d9ff;">üìä Remediation</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">DEF Manufacturing OTIF at 93.2% - coordinate with production to improve on-time delivery</p>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Next Best Actions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Action</th>
                                    <th>Expected Impact</th>
                                    <th>Timeline</th>
                                    <th>Owner</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="status-badge maintenance">HIGH</span></td>
                                    <td><strong>Review Q1 demand forecast with top 5 customers</strong></td>
                                    <td style="color: #00ff88;">Validate 12% growth prediction</td>
                                    <td>2 weeks</td>
                                    <td>Sales Director</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge operational">MEDIUM</span></td>
                                    <td><strong>Implement customer self-service portal</strong></td>
                                    <td style="color: #00ff88;">CSAT: 4.8 ‚Üí 4.9, reduce support calls 30%</td>
                                    <td>Q1 2025</td>
                                    <td>IT Manager</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge operational">LOW</span></td>
                                    <td><strong>Customer appreciation event for strategic accounts</strong></td>
                                    <td style="color: #00ff88;">Strengthen relationships, upsell opportunities</td>
                                    <td>This quarter</td>
                                    <td>Account Managers</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="crm-history" class="tab-content">
                    <div class="detail-section">
                        <h3>üìú Issue History & Resolutions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Issue</th>
                                    <th>Status</th>
                                    <th>Resolution Summary</th>
                                    <th>Resolved By</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Nov 15, 2024</td>
                                    <td><strong>ABC Manufacturing complaint about late deliveries</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Coordinated with production to prioritize ABC orders. Implemented dedicated production slot. OTIF improved from 92% to 98.5%.</td>
                                    <td>Sarah Johnson</td>
                                </tr>
                                <tr>
                                    <td>Oct 28, 2024</td>
                                    <td><strong>DEF Manufacturing requested volume increase +20%</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Evaluated capacity with production planning. Approved 15% increase immediately, 20% after Line 3 improvements. Customer satisfied with phased approach.</td>
                                    <td>Sales Director</td>
                                </tr>
                                <tr>
                                    <td>Oct 12, 2024</td>
                                    <td><strong>Quality complaint from GHI Industries (3 defective lots)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Root cause: Supplier S-123 material issues. Replaced defective units, implemented 100% inspection for S-123 materials. No further complaints.</td>
                                    <td>QC Manager</td>
                                </tr>
                                <tr>
                                    <td>Sep 20, 2024</td>
                                    <td><strong>Lost bid to JKL Corp (price competition)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Reviewed pricing strategy. Offered value-added services (JIT delivery, quality guarantees). Won next bid with 10% higher price but better terms.</td>
                                    <td>Sales Director</td>
                                </tr>
                                <tr>
                                    <td>Aug 30, 2024</td>
                                    <td><strong>Customer portal downtime (4 hours)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Server issue fixed. Implemented redundant servers and monitoring. Uptime improved to 99.9%. Issued customer communication and apology.</td>
                                    <td>IT Manager</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Historical Trends</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="color: #00d9ff; font-weight: 600; margin-bottom: 0.5rem;">Issue Resolution Time</div>
                                <div style="color: #8b92b0; font-size: 0.875rem;">Average: <strong style="color: #00ff88;">2.4 days</strong> (vs 5.2 days last year)</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="color: #00d9ff; font-weight: 600; margin-bottom: 0.5rem;">Customer Complaints</div>
                                <div style="color: #8b92b0; font-size: 0.875rem;"><strong style="color: #00ff88;">5 total</strong> in last 6 months (down from 18)</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="color: #00d9ff; font-weight: 600; margin-bottom: 0.5rem;">Resolution Rate</div>
                                <div style="color: #8b92b0; font-size: 0.875rem;"><strong style="color: #00ff88;">100%</strong> of issues resolved within SLA</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getSalesPlanningDashboard() {
            return `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">üìä Sales & Demand Planning - Detailed Dashboard</h2>
                        <div class="drill-down-breadcrumb">Value Stream ‚Üí Sales & Planning</div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid rgba(0, 217, 255, 0.2);">
                    <div class="tab-button active" onclick="showTab(event, 'sales-current')">Current Status</div>
                    <div class="tab-button" onclick="showTab(event, 'sales-history')">History</div>
                </div>

                <!-- Current Status Tab -->
                <div id="sales-current" class="tab-content active">
                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Overall Health: EXCELLENT (94/100)</h3>
                        <p style="color: #8b92b0; line-height: 1.8;">Sales pipeline is strong with $4.2M active opportunities. Forecast accuracy improved to 87%. S&OP process well-aligned with operations.</p>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Key Performance Metrics</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Pipeline Value</div>
                                <div style="color: #00d9ff; font-size: 2rem; font-weight: bold;">$4.2M</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">+15% vs last Q</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Forecast Accuracy</div>
                                <div style="color: #00ff88; font-size: 2rem; font-weight: bold;">87%</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">+5% improvement</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">Win Rate</div>
                                <div style="color: #00d9ff; font-size: 2rem; font-weight: bold;">68%</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">Industry avg: 55%</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="color: #8b92b0; font-size: 0.875rem; margin-bottom: 0.5rem;">S&OP Cycle Time</div>
                                <div style="color: #00ff88; font-size: 2rem; font-weight: bold;">5 days</div>
                                <div style="color: #00ff88; font-size: 0.813rem;">Target: 7 days</div>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>üìà Demand Forecast (Next 6 Months)</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>Forecast</th>
                                    <th>Confidence</th>
                                    <th>Capacity Available</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>January 2025</strong></td>
                                    <td>48,500 units</td>
                                    <td style="color: #00ff88;">92%</td>
                                    <td>45,420 units</td>
                                    <td style="color: #ffaa00;">Tight capacity</td>
                                </tr>
                                <tr>
                                    <td><strong>February 2025</strong></td>
                                    <td>52,000 units</td>
                                    <td style="color: #00ff88;">88%</td>
                                    <td>45,420 units</td>
                                    <td style="color: #ff3366;">Capacity shortage</td>
                                </tr>
                                <tr>
                                    <td><strong>March 2025</strong></td>
                                    <td>54,500 units</td>
                                    <td style="color: #00d9ff;">85%</td>
                                    <td>45,420 units</td>
                                    <td style="color: #ff3366;">Capacity shortage</td>
                                </tr>
                                <tr>
                                    <td><strong>April 2025</strong></td>
                                    <td>51,000 units</td>
                                    <td style="color: #00d9ff;">82%</td>
                                    <td>45,420 units</td>
                                    <td style="color: #ffaa00;">Tight capacity</td>
                                </tr>
                                <tr>
                                    <td><strong>May 2025</strong></td>
                                    <td>49,000 units</td>
                                    <td style="color: #00d9ff;">80%</td>
                                    <td>45,420 units</td>
                                    <td style="color: #ffaa00;">Tight capacity</td>
                                </tr>
                                <tr>
                                    <td><strong>June 2025</strong></td>
                                    <td>47,500 units</td>
                                    <td style="color: #ffaa00;">78%</td>
                                    <td>45,420 units</td>
                                    <td style="color: #ffaa00;">Tight capacity</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="detail-section">
                        <h3>üîÆ Predictions & Observations</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div style="background: rgba(255, 170, 0, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #ffaa00;">
                                <strong style="color: #ffaa00;">‚ö†Ô∏è Capacity Alert</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Demand exceeds capacity for Feb-Jun 2025. Risk of losing $1.2M in orders if capacity not increased.</p>
                            </div>
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00ff88;">
                                <strong style="color: #00ff88;">‚úì Observation</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Forecast accuracy improved 5% after implementing AI-based demand sensing</p>
                            </div>
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00ff88;">
                                <strong style="color: #00ff88;">üí° Improvement</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Adding 3rd shift on Line 3 can address capacity gap (+3,300 units/month)</p>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00d9ff;">
                                <strong style="color: #00d9ff;">üìà Prediction</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Q1 growth of 15% likely to continue through H1 2025 based on economic indicators</p>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Next Best Actions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Action</th>
                                    <th>Expected Impact</th>
                                    <th>Timeline</th>
                                    <th>Owner</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="status-badge down">URGENT</span></td>
                                    <td><strong>Update capacity plan for Q1-Q2 demand surge</strong></td>
                                    <td style="color: #00ff88;">Avoid losing $1.2M in orders</td>
                                    <td>This week</td>
                                    <td>Planning Manager</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge maintenance">HIGH</span></td>
                                    <td><strong>Coordinate with production on Line 3 improvements</strong></td>
                                    <td style="color: #00ff88;">Add 3,300 units/month capacity</td>
                                    <td>2 weeks</td>
                                    <td>S&OP Lead</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge operational">MEDIUM</span></td>
                                    <td><strong>Refine demand model with customer input</strong></td>
                                    <td style="color: #00ff88;">Improve accuracy to 90%+</td>
                                    <td>1 month</td>
                                    <td>Demand Planner</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="sales-history" class="tab-content">
                    <div class="detail-section">
                        <h3>üìú Issue History & Resolutions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Issue</th>
                                    <th>Status</th>
                                    <th>Resolution Summary</th>
                                    <th>Resolved By</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Nov 20, 2024</td>
                                    <td><strong>Forecast accuracy dropped to 78%</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Root cause: Missing customer promotion data. Implemented weekly customer check-ins. Accuracy improved to 87% within 3 weeks.</td>
                                    <td>Demand Planner</td>
                                </tr>
                                <tr>
                                    <td>Oct 15, 2024</td>
                                    <td><strong>S&OP cycle taking 9 days (vs 7-day target)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Streamlined approval process. Implemented parallel reviews instead of sequential. Cycle time reduced to 5 days.</td>
                                    <td>S&OP Lead</td>
                                </tr>
                                <tr>
                                    <td>Sep 25, 2024</td>
                                    <td><strong>Capacity mismatch - unable to fulfill $350K order</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Coordinated emergency capacity from Factory B. Fulfilled order with 1-week delay. Customer accepted. Implemented capacity buffer policy.</td>
                                    <td>Planning Manager</td>
                                </tr>
                                <tr>
                                    <td>Aug 10, 2024</td>
                                    <td><strong>Sales-operations misalignment on product mix</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Established weekly alignment meetings. Created shared dashboard. Mix variance reduced from 15% to 5%.</td>
                                    <td>S&OP Lead</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function getProductionDashboard() {
            return `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">üè≠ Production Lines - Detailed Dashboard</h2>
                        <div class="drill-down-breadcrumb">Value Stream ‚Üí Production</div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid rgba(0, 217, 255, 0.2);">
                    <div class="tab-button active" onclick="showTab(event, 'prod-current')">Current Status</div>
                    <div class="tab-button" onclick="showTab(event, 'prod-history')">History</div>
                </div>

                <!-- Current Status Tab -->
                <div id="prod-current" class="tab-content active">
                    <div class="detail-section" style="background: rgba(255, 51, 102, 0.1); border-left: 4px solid #ff3366;">
                        <h3 style="color: #ff3366;">üî¥ Critical Issues</h3>
                        <div style="background: rgba(255, 51, 102, 0.05); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <strong style="color: #ff3366;">Machine M-205 DOWN</strong>
                            <p style="color: #8b92b0; margin: 0.5rem 0;">Bearing failure due to inadequate lubrication. Production on Line 4 stopped.</p>
                            <div style="margin-top: 0.5rem;">
                                <span style="background: rgba(255, 51, 102, 0.2); padding: 0.25rem 0.75rem; border-radius: 12px; color: #ff3366; font-size: 0.813rem; font-weight: 600;">Impact: $45K revenue loss</span>
                                <span style="background: rgba(255, 51, 102, 0.2); padding: 0.25rem 0.75rem; border-radius: 12px; color: #ff3366; font-size: 0.813rem; font-weight: 600; margin-left: 0.5rem;">ETA: 30 minutes</span>
                            </div>
                        </div>
                        <div style="background: rgba(255, 170, 0, 0.05); padding: 1rem; border-radius: 8px;">
                            <strong style="color: #ffaa00;">Line 3 Low OEE (45%)</strong>
                            <p style="color: #8b92b0; margin: 0.5rem 0;">Quality issues (8.9% defect rate) due to supplier material problems and operator certification gaps.</p>
                            <div style="margin-top: 0.5rem;">
                                <span style="background: rgba(255, 170, 0, 0.2); padding: 0.25rem 0.75rem; border-radius: 12px; color: #ffaa00; font-size: 0.813rem; font-weight: 600;">Potential: +27% OEE improvement</span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Production Performance by Line</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Line</th>
                                    <th>Status</th>
                                    <th>OEE</th>
                                    <th>Output Today</th>
                                    <th>Target</th>
                                    <th>Issues</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Line 1</strong></td>
                                    <td><span class="status-badge operational">Operational</span></td>
                                    <td><strong>78%</strong></td>
                                    <td>5,850 units</td>
                                    <td>7,500 units</td>
                                    <td style="color: #8b92b0;">None</td>
                                </tr>
                                <tr>
                                    <td><strong>Line 2</strong></td>
                                    <td><span class="status-badge operational">Operational</span></td>
                                    <td><strong>82%</strong></td>
                                    <td>6,150 units</td>
                                    <td>7,500 units</td>
                                    <td style="color: #8b92b0;">None</td>
                                </tr>
                                <tr style="background: rgba(255, 170, 0, 0.1);">
                                    <td><strong>Line 3</strong></td>
                                    <td><span class="status-badge maintenance">Issues</span></td>
                                    <td style="color: #ff3366;"><strong>45%</strong></td>
                                    <td>3,375 units</td>
                                    <td>7,500 units</td>
                                    <td style="color: #ff3366;">Quality issues, operator certs</td>
                                </tr>
                                <tr style="background: rgba(255, 51, 102, 0.1);">
                                    <td><strong>Line 4</strong></td>
                                    <td><span class="status-badge down">DOWN</span></td>
                                    <td style="color: #ff3366;"><strong>0%</strong></td>
                                    <td>0 units</td>
                                    <td>7,500 units</td>
                                    <td style="color: #ff3366;">Machine M-205 bearing failure</td>
                                </tr>
                                <tr>
                                    <td><strong>Line 5</strong></td>
                                    <td><span class="status-badge operational">Operational</span></td>
                                    <td><strong>85%</strong></td>
                                    <td>6,375 units</td>
                                    <td>7,500 units</td>
                                    <td style="color: #8b92b0;">None</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="detail-section">
                        <h3>üîÆ Predictions & Observations</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00d9ff;">
                                <strong style="color: #00d9ff;">üìà Capacity Prediction</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">With Line 4 recovery and Line 3 improvements, OEE can increase to 75% (+12%)</p>
                            </div>
                            <div style="background: rgba(255, 170, 0, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #ffaa00;">
                                <strong style="color: #ffaa00;">‚ö†Ô∏è Observation</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Night shift OEE is 12% lower than day shift - requires investigation</p>
                            </div>
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00ff88;">
                                <strong style="color: #00ff88;">‚úì Improvement Opportunity</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Adding 3rd shift on Line 3 can increase capacity by 33% ($135K/month net benefit)</p>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00d9ff;">
                                <strong style="color: #00d9ff;">üîß Remediation Needed</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">3 machines operating past recommended PM intervals - schedule maintenance</p>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Next Best Actions (Prioritized)</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Action</th>
                                    <th>Impact</th>
                                    <th>Timeline</th>
                                    <th>Owner</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="status-badge down">IMMEDIATE</span></td>
                                    <td><strong>Fix Machine M-205 bearing</strong></td>
                                    <td style="color: #00ff88;">Restore Line 4 (7,500 units/day)</td>
                                    <td>30 minutes</td>
                                    <td>John Smith</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge down">HIGH</span></td>
                                    <td><strong>100% incoming inspection S-123</strong></td>
                                    <td style="color: #00ff88;">Reduce Line 3 defects by 59%</td>
                                    <td>Start today</td>
                                    <td>QC Manager</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge maintenance">MEDIUM</span></td>
                                    <td><strong>Recertify 5 Line 3 operators</strong></td>
                                    <td style="color: #00ff88;">Reduce defects by 18%</td>
                                    <td>2 weeks</td>
                                    <td>HR Manager</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge operational">LOW</span></td>
                                    <td><strong>Evaluate 3rd shift on Line 3</strong></td>
                                    <td style="color: #00ff88;">+33% capacity, $135K/mo net</td>
                                    <td>30 days</td>
                                    <td>Operations Dir.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="prod-history" class="tab-content">
                    <div class="detail-section">
                        <h3>üìú Issue History & Resolutions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Issue</th>
                                    <th>Status</th>
                                    <th>Resolution Summary</th>
                                    <th>Resolved By</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Nov 18, 2024</td>
                                    <td><strong>Line 2 unplanned downtime (6 hours)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Hydraulic failure on press machine. Replaced hydraulic pump and lines. Implemented predictive monitoring. No recurrence in 5 weeks.</td>
                                    <td>Maintenance Lead</td>
                                </tr>
                                <tr>
                                    <td>Oct 22, 2024</td>
                                    <td><strong>Line 1 OEE dropped to 62% (target 75%)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Root cause: Frequent changeovers due to poor scheduling. Implemented batch optimization. OEE improved to 78% within 2 weeks.</td>
                                    <td>Production Manager</td>
                                </tr>
                                <tr>
                                    <td>Sep 30, 2024</td>
                                    <td><strong>Quality issue batch rejection (2,500 units)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Defective raw material from Supplier S-123. Implemented 100% incoming inspection for S-123. Reworked 1,800 units, scrapped 700. Customer accepted with discount.</td>
                                    <td>QC Manager</td>
                                </tr>
                                <tr>
                                    <td>Aug 15, 2024</td>
                                    <td><strong>Line 5 chronic minor stoppages (45 per shift)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Implemented 5S and TPM on Line 5. Operator training on quick changeovers. Stoppages reduced to 12 per shift. OEE improved from 72% to 85%.</td>
                                    <td>Operations Director</td>
                                </tr>
                                <tr>
                                    <td>Jul 28, 2024</td>
                                    <td><strong>Production missed daily target 3 days in a row</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Capacity planning issue - overcommitted. Adjusted schedule, added overtime on Lines 1 & 2. Made up shortfall within 5 days. Improved S&OP process.</td>
                                    <td>Planning Manager</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Historical Performance Trends</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="color: #00d9ff; font-weight: 600; margin-bottom: 0.5rem;">Average OEE Trend</div>
                                <div style="color: #8b92b0; font-size: 0.875rem;">6 months ago: 65% ‚Üí Today: 68.5% (+3.5%)</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="color: #00d9ff; font-weight: 600; margin-bottom: 0.5rem;">Unplanned Downtime</div>
                                <div style="color: #8b92b0; font-size: 0.875rem;">8.5% ‚Üí 5.2% (-3.3% improvement)</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="color: #00d9ff; font-weight: 600; margin-bottom: 0.5rem;">Issue Resolution Time</div>
                                <div style="color: #8b92b0; font-size: 0.875rem;">Average: 4.2 hours (target: <6 hours)</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getProcurementDashboard() {
            return `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">üè¢ Suppliers & Procurement - Detailed Dashboard</h2>
                        <div class="drill-down-breadcrumb">Value Stream ‚Üí Procurement</div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid rgba(0, 217, 255, 0.2);">
                    <div class="tab-button active" onclick="showTab(event, 'proc-current')">Current Status</div>
                    <div class="tab-button" onclick="showTab(event, 'proc-history')">History</div>
                </div>

                <!-- Current Status Tab -->
                <div id="proc-current" class="tab-content active">
                    <div class="detail-section" style="background: rgba(255, 170, 0, 0.1); border-left: 4px solid #ffaa00;">
                        <h3 style="color: #ffaa00;">‚ö†Ô∏è Critical Supplier Risk</h3>
                        <div style="background: rgba(255, 51, 102, 0.05); padding: 1rem; border-radius: 8px;">
                            <strong style="color: #ff3366;">Supplier S-123 Performance Declining</strong>
                            <p style="color: #8b92b0; margin: 0.5rem 0;">Score: 62.3/100 | Quality PPM: 1,850 (3.7x industry) | OTIF: 78.3%</p>
                            <p style="color: #ff3366; margin: 0.5rem 0;"><strong>HIGH RISK:</strong> Single-source for critical Part M-456. If S-123 stops delivering, 3 production lines will shut down in 15 days ($5.8M loss over 90 days).</p>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>üèÜ Top 5 Performing Suppliers</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Supplier</th>
                                    <th>Score</th>
                                    <th>Quality PPM</th>
                                    <th>OTIF</th>
                                    <th>Annual Volume</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>#1</strong></td>
                                    <td>S-789</td>
                                    <td style="color: #00ff88;"><strong>94.2</strong></td>
                                    <td>125 PPM</td>
                                    <td>98.5%</td>
                                    <td>$2.4M</td>
                                </tr>
                                <tr>
                                    <td><strong>#2</strong></td>
                                    <td>S-234</td>
                                    <td style="color: #00ff88;"><strong>91.8</strong></td>
                                    <td>280 PPM</td>
                                    <td>96.2%</td>
                                    <td>$1.8M</td>
                                </tr>
                                <tr>
                                    <td><strong>#3</strong></td>
                                    <td>S-456</td>
                                    <td style="color: #00d9ff;"><strong>88.5</strong></td>
                                    <td>420 PPM</td>
                                    <td>94.8%</td>
                                    <td>$3.1M</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="detail-section">
                        <h3>üîÆ Predictions & Observations</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div style="background: rgba(255, 51, 102, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #ff3366;">
                                <strong style="color: #ff3366;">‚ö†Ô∏è High Risk Prediction</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">S-123 trend shows continued decline. 85% probability of stockout in next 60 days if not addressed.</p>
                            </div>
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00ff88;">
                                <strong style="color: #00ff88;">‚úì Improvement Opportunity</strong>
                                <p style="color: #8b92b0; margin: 0.5rem 0;">Consolidating bottom 5 suppliers can save $280K annually + reduce admin overhead</p>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Next Best Actions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Action</th>
                                    <th>Impact</th>
                                    <th>Timeline</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="status-badge down">HIGH</span></td>
                                    <td><strong>Qualify alternative for Part M-456</strong></td>
                                    <td style="color: #00ff88;">Eliminate single-source risk</td>
                                    <td>30 days</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge maintenance">MEDIUM</span></td>
                                    <td><strong>Consolidate bottom 5 suppliers</strong></td>
                                    <td style="color: #00ff88;">$280K annual savings</td>
                                    <td>90 days</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge operational">LOW</span></td>
                                    <td><strong>Recognize top performers (S-789, S-234, S-456)</strong></td>
                                    <td style="color: #00ff88;">Strengthen relationships</td>
                                    <td>This quarter</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="proc-history" class="tab-content">
                    <div class="detail-section">
                        <h3>üìú Issue History & Resolutions</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Issue</th>
                                    <th>Status</th>
                                    <th>Resolution Summary</th>
                                    <th>Resolved By</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Nov 25, 2024</td>
                                    <td><strong>S-234 late delivery (5 days delay)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Weather-related shipping delay. S-234 provided daily updates. Negotiated expedited shipping. Material arrived with 2-day delay total. No production impact.</td>
                                    <td>Procurement Lead</td>
                                </tr>
                                <tr>
                                    <td>Oct 30, 2024</td>
                                    <td><strong>Quality issue from S-123 (1,850 PPM)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>New facility quality control issues. Implemented 100% incoming inspection. S-123 agreed to quality improvement plan. Working with alternative S-456.</td>
                                    <td>QC Manager</td>
                                </tr>
                                <tr>
                                    <td>Sep 18, 2024</td>
                                    <td><strong>Price increase request from S-456 (+8%)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Negotiated 3% increase with volume commitment. Locked price for 18 months. Identified cost savings in logistics to offset increase.</td>
                                    <td>Procurement Director</td>
                                </tr>
                                <tr>
                                    <td>Aug 12, 2024</td>
                                    <td><strong>Supplier S-892 bankruptcy filing</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>Minor supplier for non-critical parts. Quickly qualified S-357 as replacement. Transitioned all orders in 2 weeks. No production disruption.</td>
                                    <td>Procurement Lead</td>
                                </tr>
                                <tr>
                                    <td>Jul 20, 2024</td>
                                    <td><strong>Capacity constraint at S-789 (top supplier)</strong></td>
                                    <td><span class="status-badge operational">RESOLVED</span></td>
                                    <td>S-789 unable to meet increased demand. Negotiated capacity expansion investment ($50K). Split orders with S-234 temporarily. S-789 capacity online in 8 weeks.</td>
                                    <td>Procurement Director</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function getGenericComponentDashboard(componentId) {
            const componentNames = {
                'sales': 'Sales & Demand Planning',
                'planning': 'Production Planning',
                'inbound': 'Inbound Logistics',
                'delivery': 'Customer Delivery',
                'finance': 'Finance'
            };
            
            return `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">${componentNames[componentId] || 'Component'} Dashboard</h2>
                        <div class="drill-down-breadcrumb">Value Stream ‚Üí ${componentNames[componentId] || componentId}</div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid rgba(0, 217, 255, 0.2);">
                    <div class="tab-button active" onclick="showTab(event, 'gen-current')">Current Status</div>
                    <div class="tab-button" onclick="showTab(event, 'gen-history')">History</div>
                </div>

                <!-- Current Status Tab -->
                <div id="gen-current" class="tab-content active">
                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Overall Health: EXCELLENT</h3>
                        <p style="color: #8b92b0; line-height: 1.8;">This component is performing well with no critical issues at this time. All key metrics are within expected ranges.</p>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Performance Overview</h3>
                        <p style="color: #8b92b0;">Comprehensive performance metrics and detailed analysis for ${componentNames[componentId] || componentId} coming soon...</p>
                    </div>

                    <div class="detail-section">
                        <h3>üîÆ Predictions & Observations</h3>
                        <div style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #00d9ff;">
                            <strong style="color: #00d9ff;">üìä Observation</strong>
                            <p style="color: #8b92b0; margin: 0.5rem 0;">This component is operating within normal parameters with good performance trends.</p>
                        </div>
                    </div>

                    <div class="detail-section" style="background: rgba(0, 255, 136, 0.1); border-left: 4px solid #00ff88;">
                        <h3 style="color: #00ff88;">‚úÖ Next Best Actions</h3>
                        <p style="color: #8b92b0;">Continue monitoring performance. No immediate actions required.</p>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="gen-history" class="tab-content">
                    <div class="detail-section">
                        <h3>üìú Issue History & Resolutions</h3>
                        <p style="color: #8b92b0;">No significant issues recorded in the past 6 months. This component has maintained excellent operational performance.</p>
                    </div>
                </div>
            `;
        }

        // Placeholder functions for other components (can be expanded later)
        function getQualityDashboard() { return getGenericComponentDashboard('quality'); }
        function getAssetsDashboard() { return getGenericComponentDashboard('assets'); }
        function getMaintenanceDashboard() { return getGenericComponentDashboard('maintenance'); }
        function getWMSRawMaterialsDashboard() { return getGenericComponentDashboard('wms-rm'); }
        function getWMSFinishedGoodsDashboard() { return getGenericComponentDashboard('wms-fg'); }
        function getHRDashboard() { return getGenericComponentDashboard('hr'); }
        function getERPDashboard() { return getGenericComponentDashboard('erp'); }
        function getInboundLogisticsDashboard() { return getGenericComponentDashboard('inbound'); }
        function getProductionPlanningDashboard() { return getSalesPlanningDashboard(); }
        function getOutboundLogisticsDashboard() { return getGenericComponentDashboard('outbound'); }
        function getCustomerDeliveryDashboard() { return getGenericComponentDashboard('delivery'); }
        function getCustomerServiceDashboard() { return getCRMDashboard(); }
        function getFinanceDashboard() { return getGenericComponentDashboard('finance'); }

        // Tab switching function
        function showTab(event, tabId) {
            // Get the drill-down content container
            const panel = document.getElementById('drill-down-content');
            
            if (!panel) return;
            
            // Hide all tab contents in this panel
            const tabContents = panel.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tab buttons in this panel
            const tabButtons = panel.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            // Show the selected tab content
            const targetTab = document.getElementById(tabId);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // Add active class to the clicked button
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // DETAILED LINE VIEW WITH MACHINES AND SENSORS
        function showLineDetailView(lineNum, status) {
            const lineData = {
                1: {name: 'Assembly Line', machines: 6, oee: 92, product: 'Product A-Series'},
                2: {name: 'CNC Machining', machines: 5, oee: 89, product: 'Component B-456'},
                3: {name: 'CNC Machining', machines: 5, oee: 45, product: 'Component B-456'},
                4: {name: 'Welding Station', machines: 4, oee: 91, product: 'Frame Assembly'},
                5: {name: 'Assembly Line', machines: 6, oee: 78, product: 'Product A-Series'},
                6: {name: 'Packaging Line', machines: 3, oee: 88, product: 'Final Packaging'},
                7: {name: 'Testing Station', machines: 4, oee: 85, product: 'Quality Testing'},
                8: {name: 'Painting Line', machines: 3, oee: 0, product: 'Surface Treatment'}
            };

            const line = lineData[lineNum];
            
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Line ${lineNum} - ${line.name}</h2>
                        <div class="drill-down-breadcrumb">
                            Live Operations Monitor > Lines Visualization > <span>Line ${lineNum}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div style="margin-bottom: 1rem;">
                    <button class="btn btn-back" onclick="showLinesVisualization()">
                        ‚Üê Back to Factory Layout
                    </button>
                </div>

                <div class="tab-navigation">
                    <button class="tab-button active" onclick="switchTab('line-layout')">Line Layout & Machines</button>
                    <button class="tab-button" onclick="switchTab('line-oee')">OEE Calculation</button>
                    <button class="tab-button" onclick="switchTab('line-production')">Production Details</button>
                    <button class="tab-button" onclick="switchTab('line-sensors')">Live Sensor Data</button>
                </div>

                <!-- Line Layout Tab -->
                <div id="tab-line-layout" class="tab-content active">
                    <div class="detail-section">
                        <h3>üè≠ Production Line Layout</h3>
                        <div style="background: rgba(0,0,0,0.3); padding: 2rem; border-radius: 8px; overflow-x: auto;">
                            <div style="display: flex; align-items: center; gap: 1rem; min-width: fit-content;">
                                <div style="text-align: center; padding: 1rem;">
                                    <div style="font-size: 2rem;">üì•</div>
                                    <div style="font-size: 0.875rem; color: #8b92b0;">Raw Material</div>
                                </div>
                                
                                ${Array.from({length: line.machines}, (_, i) => {
                                    const machineNum = i + 1;
                                    const isDown = lineNum === 3 && machineNum === 3;
                                    const machineColor = isDown ? '#ff3366' : '#00ff88';
                                    return `
                                        <div>
                                            <div style="font-size: 2rem; color: #8b92b0;">‚Üí</div>
                                        </div>
                                        <div style="background: rgba(${isDown ? '255,51,102' : '0,255,136'},0.1); 
                                                    padding: 1.5rem; border-radius: 8px; border: 2px solid ${machineColor}; 
                                                    text-align: center; cursor: pointer; min-width: 150px;"
                                             onclick="showMachineDetail(${lineNum}, ${machineNum}, ${isDown})">
                                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚öôÔ∏è</div>
                                            <div style="font-weight: 600; margin-bottom: 0.5rem;">Machine ${machineNum}</div>
                                            <div style="font-size: 0.75rem; color: ${machineColor}; margin-bottom: 0.5rem;">
                                                ${isDown ? 'üî¥ DOWN' : 'üü¢ RUNNING'}
                                            </div>
                                            <div style="font-size: 0.75rem; color: #8b92b0;">
                                                ${isDown ? '0' : Math.floor(Math.random() * 50 + 150)} units/hr
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                                
                                <div>
                                    <div style="font-size: 2rem; color: #8b92b0;">‚Üí</div>
                                </div>
                                <div style="text-align: center; padding: 1rem;">
                                    <div style="font-size: 2rem;">üì¶</div>
                                    <div style="font-size: 0.875rem; color: #8b92b0;">Finished Goods</div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 1rem; padding: 1rem; background: rgba(0, 217, 255, 0.1); border-radius: 8px;">
                            üëÜ Click any machine to see detailed sensor data and performance metrics
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>üìä Machine Status Summary</h3>
                        <table class="asset-table">
                            <thead>
                                <tr>
                                    <th>Machine</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                    <th>Utilization</th>
                                    <th>Output (units/hr)</th>
                                    <th>Temperature</th>
                                    <th>Vibration</th>
                                    <th>Alerts</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${Array.from({length: line.machines}, (_, i) => {
                                    const machineNum = i + 1;
                                    const isDown = lineNum === 3 && machineNum === 3;
                                    return `
                                        <tr onclick="showMachineDetail(${lineNum}, ${machineNum}, ${isDown})" style="cursor: pointer;">
                                            <td><strong>Machine ${machineNum}</strong></td>
                                            <td>${line.name} Unit</td>
                                            <td><span class="status-badge ${isDown ? 'down' : 'operational'}">
                                                ${isDown ? 'DOWN' : 'Running'}
                                            </span></td>
                                            <td>${isDown ? '0' : Math.floor(Math.random() * 30 + 70)}%</td>
                                            <td>${isDown ? '0' : Math.floor(Math.random() * 50 + 150)}</td>
                                            <td style="color: ${isDown ? '#ff3366' : '#00ff88'};">
                                                ${isDown ? '---' : Math.floor(Math.random() * 20 + 60)}¬∞C
                                            </td>
                                            <td style="color: ${isDown ? '#ff3366' : '#00ff88'};">
                                                ${isDown ? '---' : (Math.random() * 2).toFixed(2)} mm/s
                                            </td>
                                            <td>${isDown ? 'üî¥ Bearing Failure' : '‚úì Normal'}</td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- OEE Calculation Tab -->
                <div id="tab-line-oee" class="tab-content">
                    <div class="detail-section">
                        <h3>Line ${lineNum} OEE: <span style="color: ${line.oee > 85 ? '#00ff88' : line.oee > 70 ? '#ffaa00' : '#ff3366'};">${line.oee}%</span></h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-top: 1.5rem;">
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">
                                    ${lineNum === 3 ? '65%' : '92%'}
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Availability</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">
                                    ${lineNum === 3 ? '78%' : '95%'}
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Performance</div>
                            </div>
                            <div style="background: rgba(0, 217, 255, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #00d9ff;">
                                <div style="font-size: 2rem; font-weight: bold; color: #00d9ff; margin-bottom: 0.5rem;">
                                    ${lineNum === 3 ? '89%' : '98%'}
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Quality</div>
                            </div>
                        </div>

                        ${lineNum === 3 ? `
                            <div style="background: rgba(255, 51, 102, 0.1); padding: 1.5rem; border-radius: 8px; margin-top: 1.5rem; border-left: 4px solid #ff3366;">
                                <h4 style="color: #ff3366; margin-bottom: 1rem;">Critical Issue Impacting OEE</h4>
                                <p style="color: #8b92b0; line-height: 1.8;">
                                    <strong>Root Cause:</strong> Machine 3 bearing failure<br>
                                    <strong>Downtime:</strong> 4.2 hours (current shift)<br>
                                    <strong>Impact:</strong> Line availability dropped from 92% to 65%<br>
                                    <strong>Overall OEE Impact:</strong> -27% (from 72% to 45%)<br>
                                    <strong>Production Loss:</strong> 850 units<br>
                                    <strong>Revenue Impact:</strong> $45,000
                                </p>
                            </div>
                        ` : ''}
                    </div>
                </div>

                <!-- Production Details Tab -->
                <div id="tab-line-production" class="tab-content">
                    <div class="detail-section">
                        <h3>Production Information</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Product</div>
                                <div class="detail-value">${line.product}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Current Work Order</div>
                                <div class="detail-value">WO-${12340 + lineNum}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Target Quantity</div>
                                <div class="detail-value">${Math.floor(Math.random() * 2000 + 3000)} units</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Produced Today</div>
                                <div class="detail-value">${lineNum === 3 ? '245' : Math.floor(Math.random() * 1000 + 1500)} units</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Target Completion</div>
                                <div class="detail-value">Today 6:00 PM</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Status</div>
                                <div class="detail-value">
                                    <span class="status-badge ${lineNum === 3 ? 'down' : 'operational'}">
                                        ${lineNum === 3 ? 'Behind Schedule' : 'On Track'}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Sensor Data Tab -->
                <div id="tab-line-sensors" class="tab-content">
                    <div class="detail-section">
                        <h3>üî¥ Live Sensor Streams (Refreshing...)</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            ${Array.from({length: line.machines}, (_, i) => {
                                const machineNum = i + 1;
                                const isDown = lineNum === 3 && machineNum === 3;
                                return `
                                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; border-left: 4px solid ${isDown ? '#ff3366' : '#00ff88'};">
                                        <div style="font-weight: 600; margin-bottom: 1rem;">Machine ${machineNum} Sensors</div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                            <div>
                                                <div style="color: #8b92b0; font-size: 0.875rem;">Temperature</div>
                                                <div style="font-size: 1.5rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                                    ${isDown ? '---' : Math.floor(Math.random() * 20 + 60)}¬∞C
                                                </div>
                                            </div>
                                            <div>
                                                <div style="color: #8b92b0; font-size: 0.875rem;">Vibration</div>
                                                <div style="font-size: 1.5rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                                    ${isDown ? '---' : (Math.random() * 2).toFixed(2)} mm/s
                                                </div>
                                            </div>
                                            <div>
                                                <div style="color: #8b92b0; font-size: 0.875rem;">Power</div>
                                                <div style="font-size: 1.5rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                                    ${isDown ? '0' : Math.floor(Math.random() * 20 + 40)} kW
                                                </div>
                                            </div>
                                            <div>
                                                <div style="color: #8b92b0; font-size: 0.875rem;">Speed</div>
                                                <div style="font-size: 1.5rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                                    ${isDown ? '0' : Math.floor(Math.random() * 500 + 1000)} RPM
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }

        // MACHINE DETAIL WITH STREAMING SENSOR DATA
        function showMachineDetail(lineNum, machineNum, isDown) {
            const content = `
                <div class="drill-down-header">
                    <div>
                        <h2 class="drill-down-title">Line ${lineNum} - Machine ${machineNum}</h2>
                        <div class="drill-down-breadcrumb">
                            Live Operations Monitor > Line ${lineNum} > <span>Machine ${machineNum}</span>
                        </div>
                    </div>
                    <button class="drill-down-close" onclick="closeDrillDown()">‚úï</button>
                </div>

                <div style="margin-bottom: 1rem;">
                    <button class="btn btn-back" onclick="showLineDetailView(${lineNum}, '${isDown ? 'down' : 'operational'}')">
                        ‚Üê Back to Line ${lineNum}
                    </button>
                </div>

                <div class="detail-section">
                    <h3>üî¥ Live Sensor Data Stream</h3>
                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 8px; border: 2px solid ${isDown ? '#ff3366' : '#00ff88'};">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                            <div style="text-align: center;">
                                <div style="color: #8b92b0; margin-bottom: 0.5rem;">Temperature</div>
                                <div style="font-size: 3rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                    ${isDown ? '---' : Math.floor(Math.random() * 20 + 60)}¬∞C
                                </div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">
                                    ${isDown ? 'Offline' : 'Normal range: 50-80¬∞C'}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #8b92b0; margin-bottom: 0.5rem;">Vibration</div>
                                <div style="font-size: 3rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                    ${isDown ? '---' : (Math.random() * 2).toFixed(2)}
                                </div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">
                                    ${isDown ? 'Offline' : 'mm/s ‚Ä¢ Normal < 3.0'}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #8b92b0; margin-bottom: 0.5rem;">Power Consumption</div>
                                <div style="font-size: 3rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                    ${isDown ? '0' : Math.floor(Math.random() * 20 + 40)}
                                </div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">
                                    ${isDown ? 'Offline' : 'kW ‚Ä¢ Nominal: 55 kW'}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #8b92b0; margin-bottom: 0.5rem;">Spindle Speed</div>
                                <div style="font-size: 3rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                    ${isDown ? '0' : Math.floor(Math.random() * 500 + 1000)}
                                </div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">
                                    ${isDown ? 'Offline' : 'RPM ‚Ä¢ Target: 1200'}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #8b92b0; margin-bottom: 0.5rem;">Cycle Time</div>
                                <div style="font-size: 3rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#00ff88'};">
                                    ${isDown ? '---' : (Math.random() * 2 + 8).toFixed(1)}
                                </div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">
                                    ${isDown ? 'Offline' : 'min/unit ‚Ä¢ Target: 9.5'}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #8b92b0; margin-bottom: 0.5rem;">Tool Wear</div>
                                <div style="font-size: 3rem; font-weight: bold; color: ${isDown ? '#ff3366' : '#ffaa00'};">
                                    ${isDown ? '---' : Math.floor(Math.random() * 30 + 50)}%
                                </div>
                                <div style="font-size: 0.875rem; color: #8b92b0;">
                                    ${isDown ? 'Offline' : 'Change at 85%'}
                                </div>
                            </div>
                        </div>

                        ${isDown ? `
                            <div style="background: rgba(255, 51, 102, 0.2); padding: 1.5rem; border-radius: 8px; margin-top: 1.5rem; border-left: 4px solid #ff3366;">
                                <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem; color: #ff3366;">
                                    ‚ö†Ô∏è MACHINE DOWN - Bearing Failure
                                </div>
                                <p style="color: #8b92b0; line-height: 1.8;">
                                    <strong>Detected:</strong> 1:45 PM (4.2 hours ago)<br>
                                    <strong>Last Vibration Reading:</strong> 8.5 mm/s (3x normal before shutdown)<br>
                                    <strong>Last Temperature:</strong> 95¬∞C (15¬∞C over normal)<br>
                                    <strong>Maintenance Team:</strong> Assigned, ETA 30 minutes<br>
                                    <strong>Parts Ordered:</strong> Bearing B-8945, Seal S-234<br>
                                    <strong>Estimated Repair Time:</strong> 6 hours
                                </p>
                            </div>
                        ` : `
                            <div style="background: rgba(0, 255, 136, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1.5rem; text-align: center;">
                                <strong style="color: #00ff88;">‚úì All sensors within normal parameters</strong>
                            </div>
                        `}
                    </div>
                </div>

                <div class="detail-section">
                    <h3>üìä Machine Performance (Last 24 Hours)</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">Units Produced</div>
                            <div class="detail-value">${isDown ? '1,245 (before failure)' : '2,450'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Operating Time</div>
                            <div class="detail-value">${isDown ? '19.8 hrs' : '23.2 hrs'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Downtime</div>
                            <div class="detail-value" style="color: ${isDown ? '#ff3366' : '#00ff88'};">${isDown ? '4.2 hrs' : '0.8 hrs'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Utilization</div>
                            <div class="detail-value" style="color: ${isDown ? '#ffaa00' : '#00ff88'};">${isDown ? '82%' : '96%'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Quality Rate</div>
                            <div class="detail-value" style="color: ${isDown ? '#ffaa00' : '#00ff88'};">${isDown ? '92%' : '98%'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Energy Used</div>
                            <div class="detail-value">${isDown ? '985' : '1,280'} kWh</div>
                        </div>
                    </div>
                </div>
            `;

            showDrillDown(content);
        }
    </script>
</body>
</html>
