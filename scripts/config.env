# GenIMS PostgreSQL Database Configuration
# Set these environment variables before running scripts

# ============================================================================
# PostgreSQL Server Connection
# ============================================================================

# Azure PostgreSQL Server Details
export POSTGRES_HOST="insights-db.postgres.database.azure.com"
export POSTGRES_PORT="5432"
export POSTGRES_USER="turintonadmin"
export POSTGRES_PASSWORD="Passw0rd123!"

# ============================================================================
# Database Names (13 Separate Databases per Module)
# ============================================================================

export DB_MASTER="genims_master_db"
export DB_OPERATIONS="genims_operations_db"
export DB_MANUFACTURING="genims_manufacturing_db"
export DB_MAINTENANCE="genims_maintenance_db"
export DB_QUALITY="genims_quality_db"
export DB_ERP="genims_erp_db"
export DB_FINANCIAL="genims_financial_db"
export DB_ERP_WMS_SYNC="genims_erp_wms_sync_db"
export DB_WMS="genims_wms_db"
export DB_TMS="genims_tms_db"
export DB_CRM="genims_crm_db"
export DB_SERVICE="genims_service_db"
export DB_HR="genims_hr_db"
export DB_SUPPLIER="genims_supplier_db"

# ============================================================================
# Directory Paths
# ============================================================================

export BASE_DIR="/Users/devendrayadav/insightql/GenIMS"
export SCRIPTS_DIR="$BASE_DIR/scripts"
export LOGS_DIR="$BASE_DIR/logs"
export BACKUP_DIR="$BASE_DIR/backups"

# ============================================================================
# Script Flags
# ============================================================================

# Verbose output
export VERBOSE=true

# Skip confirmations (use with caution!)
export SKIP_CONFIRMATION=false

# ============================================================================
# Data Generation Parameters
# ============================================================================

# Number of years of historical data to generate
export HISTORICAL_DATA_YEARS=2

# Parallel processing threads
export PARALLEL_THREADS=4

# ============================================================================
# Daemon Configuration: Operations Database (IoT & SCADA)
# ============================================================================

# Database: genims_operations_db
# Module: Machine Data (IoT sensors, SCADA systems)
export OPERATIONS_ENABLED=true
export OPERATIONS_NAME="Operations"
export OPERATIONS_DATABASE="genims_operations_db"
export OPERATIONS_FOLDER="02 - Machine data"
export OPERATIONS_DAEMONS="iot_daemon scada_daemon"

# IoT Daemon Configuration - FAST GENERATION MODE
export IOT_DAEMON_ENABLED=true
export IOT_SAMPLING_INTERVAL=10
export IOT_BATCH_SIZE=10000
export IOT_RECORDS_PER_CYCLE=200
export IOT_TOTAL_RECORDS=86400
export IOT_LOG_FILE="$LOGS_DIR/iot_daemon.log"

# SCADA Daemon Configuration - FAST GENERATION MODE
export SCADA_DAEMON_ENABLED=true
export SCADA_SAMPLING_INTERVAL=60
export SCADA_BATCH_SIZE=5000
export SCADA_RECORDS_PER_CYCLE=200
export SCADA_TOTAL_RECORDS=14400
export SCADA_LOG_FILE="$LOGS_DIR/scada_daemon.log"

# Fast Generation Mode - Simulation Parameters
export SIMULATION_START_DATE="2026-01-01"
export SIMULATION_START_TIME="00:00:00"

# Kafka Configuration (Optional) - DISABLED
export KAFKA_ENABLED=false
export KAFKA_BOOTSTRAP_SERVERS="localhost:9092"
export KAFKA_IOT_TOPIC="iot-sensor-data"
export KAFKA_SCADA_TOPIC="scada-machine-data"

# Daemon Management
export DAEMON_LOG_LEVEL="INFO"
export DAEMON_LOG_DIR="/Users/devendrayadav/insightql/GenIMS/logs"
export DAEMON_PID_DIR="/Users/devendrayadav/insightql/GenIMS/.daemon_pids"
export DAEMON_GRACE_PERIOD=30
export DAEMON_AUTO_RESTART=true
export DAEMON_RESTART_DELAY=5
export DAEMON_HEALTH_CHECK_INTERVAL=60

# ============================================================================
# Daemon Configuration (Folder 03 - MES Data)
# ============================================================================

# Database: genims_manufacturing_db
# Module: Manufacturing Execution System (MES)
export MANUFACTURING_ENABLED=true
export MANUFACTURING_NAME="Manufacturing"
export MANUFACTURING_DATABASE="genims_manufacturing_db"
export MANUFACTURING_FOLDER="03 - MES Data"
export MANUFACTURING_DAEMONS="mes_hourly_daemon"

# MES Daemon Configuration
export MES_ENABLED=true
export MES_CYCLE_INTERVAL=3600
export MES_BATCH_SIZE=5000
export MES_LOG_FILE="$LOGS_DIR/mes_hourly_daemon.log"
# ============================================================================
# Daemon Configuration: ERP Database
# ============================================================================

# Database: genims_erp_db
# Module: Enterprise Resource Planning
export ERP_ENABLED=true
export ERP_NAME="ERP"
export ERP_DATABASE="genims_erp_db"
export ERP_FOLDER="04 - ERP & MES Integration"
export ERP_DAEMONS="erp_daily_daemon"

# ERP Daemon Configuration
export ERP_CYCLE_INTERVAL=86400
export ERP_RUN_TIME_HOUR=2

# ============================================================================
# Daemon Configuration: WMS/TMS Database
# ============================================================================

# Database: genims_wms_db (also uses genims_tms_db, genims_erp_db)
# Module: Warehouse & Transport Management
export WMS_ENABLED=true
export WMS_NAME="WMS"
export WMS_DATABASE="genims_wms_db"
export WMS_FOLDER="05 - WMS + TMS"
export WMS_DAEMONS="wms_tms_daemon"

# WMS/TMS Daemon Configuration
export WMS_CYCLE_INTERVAL=1800

# ============================================================================
# Daemon Configuration: Maintenance Database
# ============================================================================

# Database: genims_maintenance_db
# Module: Computerized Maintenance Management System (CMMS)
export MAINTENANCE_ENABLED=true
export MAINTENANCE_NAME="Maintenance"
export MAINTENANCE_DATABASE="genims_maintenance_db"
export MAINTENANCE_FOLDER="06 - CMMS"
export MAINTENANCE_DAEMONS="cmms_daemon"

# CMMS Daemon Configuration
export CMMS_CYCLE_INTERVAL=1800

# ============================================================================
# Daemon Configuration: CRM Database
# ============================================================================

# Database: genims_crm_db
# Module: Customer Relationship Management
export CRM_ENABLED=true
export CRM_NAME="CRM"
export CRM_DATABASE="genims_crm_db"
export CRM_FOLDER="07 - CRM"
export CRM_DAEMONS="crm_daemon"

# CRM Daemon Configuration
export CRM_CYCLE_INTERVAL=1800

# ============================================================================
# Daemon Configuration: Service Database
# ============================================================================

# Database: genims_service_db
# Module: Customer Support & Service Management
export SERVICE_ENABLED=true
export SERVICE_NAME="Service"
export SERVICE_DATABASE="genims_service_db"
export SERVICE_FOLDER="08 - Support & Service"
export SERVICE_DAEMONS="service_daemon"

# Service Daemon Configuration
export SERVICE_CYCLE_INTERVAL=1800

# ============================================================================
# Daemon Configuration: HR Database
# ============================================================================

# Database: genims_hr_db
# Module: Human Resources & Human Capital Management
export HR_ENABLED=true
export HR_NAME="HR"
export HR_DATABASE="genims_hr_db"
export HR_FOLDER="09 - HR-HCM"
export HR_DAEMONS="hcm_daemon"

# HCM Daemon Configuration
export HCM_CYCLE_INTERVAL=3600

# ============================================================================
# Daemon Configuration: Financial Database
# ============================================================================

# Database: genims_financial_db (also uses genims_erp_wms_sync_db)
# Module: Financial Accounting & Inventory Sync
export FINANCIAL_ENABLED=true
export FINANCIAL_NAME="Financial"
export FINANCIAL_DATABASE="genims_financial_db"
export FINANCIAL_FOLDER="10 - Financial Accounting & ERP <> WMS Sync"
export FINANCIAL_DAEMONS="financial_sync_daemon"

# Financial Daemon Configuration
export FINANCIAL_CYCLE_INTERVAL=300

# ============================================================================
# Daemon Configuration: Supplier Database
# ============================================================================

# Database: genims_supplier_db
# Module: Supplier Portal & Management
export SUPPLIER_ENABLED=true
export SUPPLIER_NAME="Supplier"
export SUPPLIER_DATABASE="genims_supplier_db"
export SUPPLIER_FOLDER="11 - Supplier Portal"
export SUPPLIER_DAEMONS="supplier_portal_daemon"

# Supplier Daemon Configuration
export SUPPLIER_CYCLE_INTERVAL=3600

# ============================================================================
# Daemon Configuration: Quality Database
# ============================================================================

# Database: genims_quality_db
# Module: Quality Management System (QMS)
export QUALITY_ENABLED=true
export QUALITY_NAME="Quality"
export QUALITY_DATABASE="genims_quality_db"
export QUALITY_FOLDER="12 - QMS"
export QUALITY_DAEMONS="qms_daemon"

# QMS Daemon Configuration
export QMS_CYCLE_INTERVAL=1800

# ============================================================================
# PostgreSQL Connection Strings (Format: postgresql://user:password@host:port/database)
# ==========MAINTENANCE="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_MAINTENANCE"
export CONN_QUALITY="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_QUALITY"
export CONN_ERP="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_ERP"
export CONN_FINANCIAL="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_FINANCIAL"
export CONN_WMS="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_WMS"
export CONN_TMS="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_TMS"
export CONN_CRM="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_CRM"
export CONN_SERVICE="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_SERVICEMASTER"
export CONN_OPERATIONS="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_OPERATIONS"
export CONN_MANUFACTURING="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_MANUFACTURING"
export CONN_ERP_FINANCIAL="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_ERP_FINANCIAL"
export CONN_SUPPLY_CHAIN="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_SUPPLY_CHAIN"
export CONN_CRM="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_CRM"
export CONN_HR="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_HR"
export CONN_SUPPLIER="postgresql://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$DB_SUPPLIER"

# ============================================================================
# Notes
# ============================================================================

# Before running scripts:
# 1. Update POSTGRES_PASSWORD with your actual password
# 2. Ensure PostgreSQL is accessible from your network
# 3. Ensure your firewall allows connections to the PostgreSQL host
# 4. Test connection: psql -h $POSTGRES_HOST -U $POSTGRES_USER -d postgres -c "SELECT 1"
